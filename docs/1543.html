<html>
<head>
<title>CSC From A to Z — part3</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">CSC从A到Z —第3部分</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/csc-from-a-to-z-part3-98d1ecf0154?source=collection_archive---------23-----------------------#2022-07-30">https://medium.com/coinmonks/csc-from-a-to-z-part3-98d1ecf0154?source=collection_archive---------23-----------------------#2022-07-30</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><figure class="fi fk ir is it iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff iq"><img src="../Images/1045f698e335b8ecbc8fab836c0f7120.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Iz1_Zdkag5RIaQGuQhPBnw.png"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">smart contract</figcaption></figure><h2 id="9a38" class="jf jg ht bd jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc dt translated">连接到智能合同</h2><p id="94f5" class="pw-post-body-paragraph kd ke ht kf b kg kh ki kj kk kl km kn jq ko kp kq ju kr ks kt jy ku kv kw kx hm dt translated">以太坊与比特币的主要区别在于智能合约，在以太坊网络中，智能合约是一个被执行的程序，可以访问区块链数据。</p><p id="9395" class="pw-post-body-paragraph kd ke ht kf b kg ky ki kj kk kz km kn jq la kp kq ju lb ks kt jy lc kv kw kx hm dt translated">智能合约是用名为Solidity的编程语言编写的，像Java一样，Solidity被编译成在虚拟机上运行的字节码，这被称为以太坊虚拟机。</p><h2 id="06c1" class="jf jg ht bd jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc dt translated">与智能合同的交互</h2><p id="76cb" class="pw-post-body-paragraph kd ke ht kf b kg kh ki kj kk kl km kn jq ko kp kq ju kr ks kt jy ku kv kw kx hm dt translated">要使用JavaScript与智能合约交互，您需要三样东西:</p><ol class=""><li id="294e" class="ld le ht kf b kg ky kk kz jq lf ju lg jy lh kx li lj lk ll dt translated">指向智能协定的地址。</li><li id="ead5" class="ld le ht kf b kg lm kk ln jq lo ju lp jy lq kx li lj lk ll dt translated">全部或部分合同程序二进制接口。</li><li id="46b9" class="ld le ht kf b kg lm kk ln jq lo ju lp jy lq kx li lj lk ll dt translated">连接到csc网络的提供商。</li></ol><p id="b31e" class="pw-post-body-paragraph kd ke ht kf b kg ky ki kj kk kz km kn jq la kp kq ju lb ks kt jy lc kv kw kx hm dt translated">在本课结束时，你已经学会，每个EOA和智能合同有一个地址，这是你如何找到智能合同在区块链。</p><figure class="ls lt lu lv fq iu fe ff paragraph-image"><div class="fe ff lr"><img src="../Images/ebf09defedd4fa298ad37ca1e7743e9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1274/format:webp/1*P72ef5jRBWJE0jBG8C0Vyg.png"/></div></figure><p id="7253" class="pw-post-body-paragraph kd ke ht kf b kg ky ki kj kk kz km kn jq la kp kq ju lb ks kt jy lc kv kw kx hm dt translated">为了理解契约做什么，你需要一个应用程序二进制接口，或简称为ABI，一个你以后要调用的函数的函数签名列表，Ethers.js使用ABI来指定函数期望什么参数以及当它完成时返回什么值。</p><p id="3b1c" class="pw-post-body-paragraph kd ke ht kf b kg ky ki kj kk kz km kn jq la kp kq ju lb ks kt jy lc kv kw kx hm dt translated">使用Ethers.js时，可以将ABI定义为字符串数组，其中字符串是Solidity函数签名，就像用Solidity编程语言编写一样。</p><p id="8eb3" class="pw-post-body-paragraph kd ke ht kf b kg ky ki kj kk kz km kn jq la kp kq ju lb ks kt jy lc kv kw kx hm dt translated">下面是一个函数的ABI的例子:</p><figure class="ls lt lu lv fq iu fe ff paragraph-image"><div class="fe ff lw"><img src="../Images/57957ed917a792d0e1c4057769dcb6b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1266/format:webp/1*-5LjEYoIJh_qnttFAdHNbw.png"/></div></figure><p id="00ad" class="pw-post-body-paragraph kd ke ht kf b kg ky ki kj kk kz km kn jq la kp kq ju lb ks kt jy lc kv kw kx hm dt translated">函数用function关键字定义，后面跟一个名字，圆括号里是参数，Solidity是静态类型的，不支持浮点，但是支持不同大小的整数类型。</p><p id="4f18" class="pw-post-body-paragraph kd ke ht kf b kg ky ki kj kk kz km kn jq la kp kq ju lb ks kt jy lc kv kw kx hm dt translated">在上面的例子中，该函数接受一个类型为uint256的参数，名为<strong class="kf hu"> tokenId </strong>。</p><p id="d264" class="pw-post-body-paragraph kd ke ht kf b kg ky ki kj kk kz km kn jq la kp kq ju lb ks kt jy lc kv kw kx hm dt translated">foreign关键字是一个访问修饰符，它将函数标记为可从契约外部调用。</p><p id="4da8" class="pw-post-body-paragraph kd ke ht kf b kg ky ki kj kk kz km kn jq la kp kq ju lb ks kt jy lc kv kw kx hm dt translated">关键字view也非常重要，因为它告诉EVM这个函数不会改变链上的任何状态，只会读取它。</p><p id="fd68" class="pw-post-body-paragraph kd ke ht kf b kg ky ki kj kk kz km kn jq la kp kq ju lb ks kt jy lc kv kw kx hm dt translated">查看允许您在没有钱包的情况下调用该功能，因为您使用的csc网关可以从区块链的本地版本中读取所有数据。</p><p id="63af" class="pw-post-body-paragraph kd ke ht kf b kg ky ki kj kk kz km kn jq la kp kq ju lb ks kt jy lc kv kw kx hm dt translated">关键字会告诉你，你通过调用函数得到了什么，地址是一个令牌的所有者。</p><p id="50bb" class="pw-post-body-paragraph kd ke ht kf b kg ky ki kj kk kz km kn jq la kp kq ju lb ks kt jy lc kv kw kx hm dt translated">下一步是创建一个新的契约实例，并调用由ABI定义的ownerOf函数</p><p id="82f4" class="pw-post-body-paragraph kd ke ht kf b kg ky ki kj kk kz km kn jq la kp kq ju lb ks kt jy lc kv kw kx hm dt translated">请注意下面的例子:</p><figure class="ls lt lu lv fq iu fe ff paragraph-image"><div class="fe ff lx"><img src="../Images/15e5c29fa8912cdbe2642f677d5949ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1290/format:webp/1*lErnjC-0WUOV30W28_dI8w.png"/></div></figure><p id="5df8" class="pw-post-body-paragraph kd ke ht kf b kg ky ki kj kk kz km kn jq la kp kq ju lb ks kt jy lc kv kw kx hm dt translated"><strong class="kf hu">结果:</strong></p><figure class="ls lt lu lv fq iu fe ff paragraph-image"><div class="fe ff lw"><img src="../Images/21c907b3b5c83933980e1238919d16ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1266/format:webp/1*ntSeMGoFWVnQRa2kWbCJEQ.png"/></div></figure><p id="e201" class="pw-post-body-paragraph kd ke ht kf b kg ky ki kj kk kz km kn jq la kp kq ju lb ks kt jy lc kv kw kx hm dt translated">像区块链的所有东西一样，它位于一个地址，这正是函数返回的内容。她的地址可以引用创建我们的合同的另一个合同，即所谓的工厂合同，该地址也可以引用一个EOA，它也存在于此示例中。</p><h2 id="99ee" class="jf jg ht bd jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc dt translated">结论</h2><p id="2fc8" class="pw-post-body-paragraph kd ke ht kf b kg kh ki kj kk kl km kn jq ko kp kq ju kr ks kt jy ku kv kw kx hm dt translated">在本课中，您将学习智能合约交互，如何在区块链提供程序的帮助下查找地址，以及如何通过ABI调用其函数。</p><blockquote class="ly"><p id="634c" class="lz ma ht bd mb mc md me mf mg mh kx ek translated">交易新手？试试<a class="ae mi" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">加密交易机器人</a>或者<a class="ae mi" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">复制交易</a></p></blockquote></div></div>    
</body>
</html>