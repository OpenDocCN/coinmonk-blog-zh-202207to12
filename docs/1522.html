<html>
<head>
<title>Calculate volatility from candles fetched from crypto exchanges.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从加密交易所取出的蜡烛计算波动性。</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/measures-volatility-from-candles-3032a2db8786?source=collection_archive---------2-----------------------#2022-07-30">https://medium.com/coinmonks/measures-volatility-from-candles-3032a2db8786?source=collection_archive---------2-----------------------#2022-07-30</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="6d70" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我们将向您展示如何使用<a class="ae jo" href="https://github.com/ccxt/ccxt/blob/master/README.md" rel="noopener ugc nofollow" target="_blank"> ccxt </a>从加密交易所获取的蜡烛计算价格波动性(标准差和<a class="ae jo" href="https://en.wikipedia.org/wiki/Standard_score" rel="noopener ugc nofollow" target="_blank"> zscore </a>)。</p><p id="9ba5" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">例如，让我们以gateio上的单曲/USDT为例。我们希望测量始于UTC 20220714 16:30(或当地时间20220715 00:30午夜过后)的峰值附近的波动性:</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff jp"><img src="../Images/52138e0e5e05278ad687b23d703c7ee3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CZXXd_GD0JABTkMbNq7KKQ.png"/></div></div></figure><p id="5738" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><a class="ae jo" href="https://www.tradingview.com/chart/SINGLEUSDT/GycTq33q-SINGLE-USDT-spike-on-20220714-16-30-UTC/" rel="noopener ugc nofollow" target="_blank">https://www . trading view . com/chart/SINGLE usdt/gyctq 33 q-SINGLE-USDT-spike-on-2022 07 14-16-30-UTC/</a></p><p id="c0d2" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">下面是python代码(Jupyter笔记本):</p><pre class="jq jr js jt fq kb kc kd ke aw kf dt"><span id="9608" class="kg kh ht kc b fv ki kj l kk kl">from datetime import datetime, timedelta<br/>from ccxt.gateio import gateio<br/><br/>exchange = gateio()<br/><br/>symbol : str = 'SINGLE/USDT'<br/>timeframe : str = "1m"<br/>num_candles = 1000<br/>'''<br/>Our interest is spike that started UTC 20220714 16:30 (or local time 20220715 00:30 passed midnight)<br/>https://www.tradingview.com/chart/SINGLEUSDT/GycTq33q-SINGLE-USDT-spike-on-20220714-16-30-UTC/<br/>'''<br/>cutoff = datetime(2022, 7, 15, 0, 0)<br/>cutoff = int(cutoff.timestamp()) * 1000<br/><br/>candles = exchange.fetch_ohlcv(symbol=symbol, timeframe=timeframe, since=cutoff, limit=num_candles)<br/>candles</span><span id="d2aa" class="kg kh ht kc b fv km kj l kk kl">[[1657814400000, 0.015507, 0.015507, 0.015507, 0.015507, 0.0],<br/> [1657814460000, 0.015507, 0.015507, 0.015507, 0.015507, 0.0],<br/> [1657814520000, 0.015434, 0.015434, 0.015434, 0.015434, 4.501449572],<br/> [1657814580000, 0.015434, 0.015434, 0.015434, 0.015434, 0.0],<br/> [1657814640000, 0.015482, 0.015482, 0.015482, 0.015482, 3.319232426],<br/> ... many candles ...<br/> [1657874220000, 0.021507, 0.021507, 0.021507, 0.021507, 0.0],<br/> [1657874280000, 0.021471, 0.021471, 0.021471, 0.021471, 6.472690602],<br/> [1657874340000, 0.021471, 0.021471, 0.021471, 0.021471, 0.0]]</span><span id="6058" class="kg kh ht kc b fv km kj l kk kl">import pytz<br/>import os<br/>import pandas as pd<br/>divisor : int = 1000 if os.name=='nt' else 1<br/>candles = pd.DataFrame(candles)<br/>candles.rename(columns={0: "timestamp", 1: "open", 2: "high", 3: "low", 4: "close", 5: "volume"}, inplace=True)<br/>candles['datetime_utc'] = candles['timestamp'].apply(lambda ts : datetime.fromtimestamp(int(ts)/divisor).astimezone(pytz.utc))<br/>candles.set_index(['datetime_utc'], inplace=True)<br/>candles</span></pre><figure class="jq jr js jt fq ju fe ff paragraph-image"><div class="ab fr cl kn"><img src="../Images/eaadafcce49a9e4a18ee2b269affde01.png" data-original-src="https://miro.medium.com/v2/format:webp/1*52EzGDBtOi_RYBcXuWy7TQ.png"/></div></figure><pre class="jq jr js jt fq kb kc kd ke aw kf dt"><span id="6e7a" class="kg kh ht kc b fv ki kj l kk kl">candles['std'] = candles['open'].rolling(10).std()<br/>candles['mean'] = candles['open'].rolling(10).mean()<br/>candles['z'] = (candles['open'] - candles['mean']) / candles['std']<br/>candles</span></pre><p id="2fbd" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><em class="ko">【STD】</em>和<em class="ko">【mean】</em>是根据后十行的值计算的。请注意当价格在协调世界时20220714年16:20开始变动时，“std”和<a class="ae jo" href="https://en.wikipedia.org/wiki/Standard_score" rel="noopener ugc nofollow" target="_blank">“z-score”</a>如何跳跃(从&lt; 0.2到&gt; 1.0)。价格在16:35稳定后，z值回落至&lt; 0.1</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff kp"><img src="../Images/ef665e17f792c247861ab0fba66c118d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1frt9FP706zxi0MPi1Bqcg.png"/></div></div></figure><p id="5ad3" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">为什么我们要测量波动性？大多数交易算法在特定的市场条件下工作:上涨，下跌趋势，区间。例如，<a class="ae jo" rel="noopener" href="/hummingbot/a-comprehensive-guide-to-avellaneda-stoikovs-market-making-strategy-102d64bf5df6">做市商</a>(例如Hummingbot Avellaneda)和<a class="ae jo" href="https://www.huobi.com/support/en-us/detail/900003573146" rel="noopener ugc nofollow" target="_blank"> Grid </a>最好在区间市场中操作。</p><blockquote class="kq"><p id="d740" class="kr ks ht bd kt ku kv kw kx ky kz jn ek translated">交易新手？尝试<a class="ae jo" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">加密交易机器人</a>或<a class="ae jo" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">复制交易</a></p></blockquote></div></div>    
</body>
</html>