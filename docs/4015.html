<html>
<head>
<title>Smart Contract Capabilities Have Exposed Deeper Software Vulnerabilities</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">智能合同功能暴露了更深层次的软件漏洞</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/smart-contract-capabilities-have-exposed-deeper-software-vulnerabilities-100523af0db3?source=collection_archive---------48-----------------------#2022-09-21">https://medium.com/coinmonks/smart-contract-capabilities-have-exposed-deeper-software-vulnerabilities-100523af0db3?source=collection_archive---------48-----------------------#2022-09-21</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="fd20" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">网络犯罪分子更频繁地利用分散金融平台的漏洞来获取加密货币，这让投资者损失了金钱</strong></p><p id="ff23" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">根据Chainalysis的分析，今年前七个月，加密货币在攻击中被盗的金额达到了惊人的19亿美元，比去年同期增长了60%。DeFi协议是2022年几起最重大的加密货币盗窃案的目标，包括3月份价值6.25亿美元的电脑游戏Axie Infinity的Ronin网络黑客攻击。</p><p id="7d00" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">DeFi革命巩固了智能合约的地位。广泛的智能合约功能也揭示了支持分散金融服务的更深层次的不完善。</p><p id="ec9c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">DeFi协议的大多数盗窃都是由智能合同代码中的错误引起的。</p><p id="66ae" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">智能合约中的漏洞很快被黑客利用。2022年，Defiyield rekt <a class="ae jo" href="https://defiyield.app/rekt-database" rel="noopener ugc nofollow" target="_blank">数据库</a>中报告了33个智能合同漏洞。这些攻击造成的损失总计12.46亿美元。</p><p id="2b22" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">一些常见的漏洞是重入、未处理的异常、锁定以太、事务顺序依赖、整数溢出和下溢以及无限制的操作。</p><p id="fecb" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">让我们来看看历史上几起著名的抢劫案，了解发生了什么以及它们是如何被利用的。</p><p id="e7b8" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">智能合约漏洞实例</strong></p><p id="659b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">当谈到智能合同时，他们正在积极接管技术市场。然而，智能合同漏洞有可能导致远比它们旨在解决的问题更严重的问题，从对人们日常生活至关重要的行业运营中的严重问题，到特定公司在金钱和声誉方面不可挽回的损失。</p><p id="6a2b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">考虑虫洞的情况，其中一系列事件最终导致120k ETH从虫洞桥上真正移除。攻击实际上如下进行:</p><ul class=""><li id="bb9b" class="jp jq ht is b it iu ix iy jb jr jf js jj jt jn ju jv jw jx dt translated">通过调用post_vaa，攻击者创建了一个验证器动作批准(vaa)。</li><li id="78af" class="jp jq ht is b it jy ix jz jb ka jf kb jj kc jn ju jv jw jx dt translated">为了铸造攻击中夺取的120，000 ETH，这种VAA被用于完全包装的调用中。</li><li id="a6b8" class="jp jq ht is b it jy ix jz jb ka jf kb jj kc jn ju jv jw jx dt translated">攻击者合法地从桥上取走了铸造的代币。</li></ul><p id="cca1" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">VAA生成过程的充分签名验证中的漏洞是导致攻击成功的原因。签名验证的角色委派了好几次，从post_vaa到verify_signatures再到Secp256k1。</p><p id="d6ac" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">问题是，为了确保Secp256k1在verify_signatures之前被调用，虫洞契约调用了一个名为load_instruction_at的不赞成使用的命令。然而，这个命令不检查系统地址的值，指令sysvar。</p><p id="dc82" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">攻击者使用之前生成的名为Secp256k1 contract的帐户来构建虚假的sysvar指令版本。攻击者没有使用sysvar指令，而是传递了这个帐户。</p><p id="bf90" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">Secp256k1先前被调用的检查已经通过(即使它是在一个完全不同的上下文中)，所以签名被认为已经被正确验证。为了铸造被盗的ETH，这产生了产生合法VAA所需的有效签名。</p><p id="7d87" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">一系列的签名验证授权允许虫洞入侵。伪造的签名未经验证就被允许通过，因为开发人员使用了一个单一的、被否决的函数(它不验证地址)。</p><p id="b03a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">由于使用不推荐使用的函数而导致的糟糕的代码安全性使该项目损失了3亿多美元。</p><p id="230a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">非常重要的是要注意，智能合约不是一个可以随时更新安全漏洞的网站或应用程序。与离线的传统系统相比，智能合同的结果是区块链网络记录，因此它不容易被退回或更新。</p><p id="6f63" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu"> Rari Capital </strong></p><p id="f6ae" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">2021年5月8日，DeFi项目Rari Capital成为智能合同黑客的目标。攻击者窃取了大约60%的项目用户资金或价值约1100万美元的代币。对Rari Capital的攻击利用了该项目的智能合约计算流动性份额的方式。</p><p id="1452" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">问题中的以太坊池与Alpha Finance相关联，并将ETH存入Alpha Finance的ibETH令牌以产生收益。在签订本合同时，Rari Capital团队不知道Alpha Finance ibETH池的两个方面:</p><p id="ff88" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">总ETH计算:</strong>Rari Capital的以太坊池确定ibETH的值为<code class="eh kd ke kf kg b">ibETH. totalETH() / total supply= ibETH ()</code>。事实上，在Alpha Finance的ibETH.work函数中，ibETH.totalETH()的值可能会发生变化，但这个项目并不知道这一点。因此，有可能抬高Rari Capital资产池中ibETH的价值。</p><p id="962b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">契约访问:</strong>项目也不知道在这个函数中，ibETH.work的任何用户都有权调用他们喜欢的任何契约。这允许Rari Capital的以太坊池从函数内部调用取款和存款函数。</p><p id="b880" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">攻击者利用这两个元素来实施他们的攻击。他们通过使用ibETH.work函数来增加Rari Capital资产池中ibETH的价值，从而夸大了ibETH.totalETH的价值。</p><p id="b72f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">然后，他们使用Rari Capital Ethereum池的提款功能，请求比他们最初由于价值膨胀而投入的更多的ETH。这让他们有机会榨干其他Rari Capital客户提供的价值。</p><p id="2249" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">遗言</strong></p><p id="1b56" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">几乎所有的DeFi应用程序都使用货币的数学运算。这些程序包括增加或减少帐户余额，以及转换代币汇率。攻击者经常瞄准算术运算漏洞。</p><p id="54fd" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">总部位于美国的渗透测试公司Bishop Fox进行的研究显示，2021年对DeFI项目的攻击中，51%的攻击使用智能合约漏洞作为主要的进入媒介，平台协议和设计问题占18%。大多数攻击被认为是简单的。</p><p id="358d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">根据区块链研究公司Elliptic的说法，这些协议“特别容易受到黑客攻击”，因为它们的开源代码、庞大的资产池和快速扩张可能会留下安全最佳实践的空白。</p><blockquote class="kh"><p id="44fd" class="ki kj ht bd kk kl km kn ko kp kq jn ek translated">交易新手？试试<a class="ae jo" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">密码交易机器人</a>或者<a class="ae jo" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">复制交易</a></p></blockquote></div></div>    
</body>
</html>