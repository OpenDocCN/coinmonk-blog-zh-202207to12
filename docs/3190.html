<html>
<head>
<title>CSC101-Libraries</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">CSC 101-图书馆</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/csc101-libraries-63f03021da16?source=collection_archive---------33-----------------------#2022-09-04">https://medium.com/coinmonks/csc101-libraries-63f03021da16?source=collection_archive---------33-----------------------#2022-09-04</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="8dd0" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">库类似于契约，包含可重用的代码以减少编码时间，它们主要是为了重用。</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="fe ff jo"><img src="../Images/78db353f85d00a7149d8bc2b6bc3c9de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nYib8N6wIy-Papn96wyEKg.png"/></div></div></figure><h2 id="e7a8" class="ka kb ht bd kc kd ke kf kg kh ki kj kk jb kl km kn jf ko kp kq jj kr ks kt ku dt translated">图书馆</h2><p id="dfc5" class="pw-post-body-paragraph iq ir ht is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hm dt translated">和其他编程语言一样，solidity有库。Solidity中的库的概念和其他编程语言没有什么不同。基本思想是，同一个库是一组可重用的实用程序，你可以在主程序中调用它们来帮助你保持代码的整洁、可重用和易于理解。一个库包含其他契约可以调用的函数。</p><p id="77bc" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">以下是Solidity库的主要特征:</p><ul class=""><li id="94cb" class="la lb ht is b it iu ix iy jb lc jf ld jj le jn lf lg lh li dt translated">当不修改状态变量时，可以直接调用库函数</li><li id="39b7" class="la lb ht is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li dt translated">不能销毁库，因为它被认为是无状态的。</li><li id="2dbc" class="la lb ht is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li dt translated">库不能有状态变量。</li><li id="07e8" class="la lb ht is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li dt translated">库不能继承任何元素。</li><li id="755d" class="la lb ht is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li dt translated">库不能被继承。</li></ul><p id="079f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">注</strong>:通过创建库来部署通用代码，降低了gas成本。</p><h2 id="0eff" class="ka kb ht bd kc kd ke kf kg kh ki kj kk jb kl km kn jf ko kp kq jj kr ks kt ku dt translated">创建库</h2><p id="e1b0" class="pw-post-body-paragraph iq ir ht is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hm dt translated">库协定是通过使用library关键字而不是一般协定来定义的。库没有任何存储，因此它不能保存状态变量，fallback或payable函数也不能在库中创建，因为它不能存储以太(在EVM兼容的网络中，以太意味着网络原生硬币)，但它可以实现一些数据类型，如用户定义的struct和enums，以及存储在以太坊堆栈中而不是存储中的常量变量。</p><p id="c67f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">首先，我们需要创建实体文件。在这个例子中，我们称之为<strong class="is hu"> mylib.sol </strong>。在终端类型中:</p><pre class="jp jq jr js fq lo lp lq lr aw ls dt"><span id="47e7" class="ka kb ht lp b fv lt lu l lv lw">touch mylib.sol</span></pre><p id="edc5" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">如果使用CSC IDE，可以在工作区中创建文件:</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div class="fe ff lx"><img src="../Images/74e87e3aafa329f2eed7d997ab1fd9a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:922/format:webp/1*Ved-Xybmo5719OSI3Rtsyw.png"/></div></figure><p id="b87a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">语法:</strong></p><pre class="jp jq jr js fq lo lp lq lr aw ls dt"><span id="f281" class="ka kb ht lp b fv lt lu l lv lw">library &lt;libraryName&gt; {<br/>    // block of code<br/>}</span></pre><p id="496d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">举例:</strong></p><pre class="jp jq jr js fq lo lp lq lr aw ls dt"><span id="b760" class="ka kb ht lp b fv lt lu l lv lw">pragma solidity ^0.8.0;</span><span id="a2b0" class="ka kb ht lp b fv ly lu l lv lw">library Adder{<br/>    function add(uint a, uint b) public pure returns(uint) {<br/>        return a + b;<br/>    }<br/>}</span></pre><h2 id="14b3" class="ka kb ht bd kc kd ke kf kg kh ki kj kk jb kl km kn jf ko kp kq jj kr ks kt ku dt translated">纯修饰词</h2><p id="1fea" class="pw-post-body-paragraph iq ir ht is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hm dt translated">内存修饰符告诉编译器，我们的变量将要访问区块链的内存，pure是一个修饰符，本质上意味着这个函数不读，也不写任何状态变量。</p><h2 id="727f" class="ka kb ht bd kc kd ke kf kg kh ki kj kk jb kl km kn jf ko kp kq jj kr ks kt ku dt translated">返回类型</h2><p id="1fc8" class="pw-post-body-paragraph iq ir ht is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hm dt translated">最后一个关键字<strong class="is hu"> returns </strong>描述了这个函数返回的值的类型，在我们的例子中，我们返回一个数组中所有整数的和，所以我们返回一个uint类型的变量。</p><p id="68d5" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">耶！我们成功地做到了。！</p><p id="b856" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在是时候导入和使用我们的库了</p><h2 id="374d" class="ka kb ht bd kc kd ke kf kg kh ki kj kk jb kl km kn jf ko kp kq jj kr ks kt ku dt translated">导入库</h2><p id="5bf8" class="pw-post-body-paragraph iq ir ht is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hm dt translated">导入库非常简单。它只需要使用<strong class="is hu"> import </strong>关键字在solidity中导入一个库。可以按如下方式导入库:</p><pre class="jp jq jr js fq lo lp lq lr aw ls dt"><span id="aba1" class="ka kb ht lp b fv lt lu l lv lw">import "./MyLib.sol";</span></pre><h2 id="fbae" class="ka kb ht bd kc kd ke kf kg kh ki kj kk jb kl km kn jf ko kp kq jj kr ks kt ku dt translated">访问同一文件中的库</h2><p id="a34b" class="pw-post-body-paragraph iq ir ht is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hm dt translated">访问存在于同一文件中的契约中的库需要任何种类的so import语句。</p><p id="5ce9" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">为了访问这个库，我们创建了一个简单的智能契约，其中包含一个调用我们的库的add函数的函数。因为库和契约存在于同一个文件中，所以不需要任何import语句。</p><h2 id="8e57" class="ka kb ht bd kc kd ke kf kg kh ki kj kk jb kl km kn jf ko kp kq jj kr ks kt ku dt translated">在其他智能合同中使用库函数</h2><p id="7502" class="pw-post-body-paragraph iq ir ht is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hm dt translated">现在我们想从其他契约中访问一个库函数。</p><pre class="jp jq jr js fq lo lp lq lr aw ls dt"><span id="cf0a" class="ka kb ht lp b fv lt lu l lv lw">import "./example.sol";<br/>                                                           <br/>contract MyContract{                                 <br/>                                <br/>function give_sum(uint[] memory data)external view returns(uint)                                 <br/>{                                    <br/>uint sum;                                   <br/>sum = adder.add(data);                                    <br/>return sum;                                 <br/>}}</span></pre><blockquote class="lz"><p id="852b" class="ma mb ht bd mc md me mf mg mh mi jn ek translated">交易新手？试试<a class="ae mj" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">加密交易机器人</a>或者<a class="ae mj" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">复制交易</a></p><p id="debb" class="ma mb ht bd mc md mk ml mm mn mo jn ek translated">加入Coinmonks <a class="ae mj" href="https://t.me/coincodecap" rel="noopener ugc nofollow" target="_blank">电报频道</a>和<a class="ae mj" href="https://www.youtube.com/c/coinmonks/videos" rel="noopener ugc nofollow" target="_blank"> Youtube频道</a>获取每日<a class="ae mj" href="http://coincodecap.com/" rel="noopener ugc nofollow" target="_blank">加密新闻</a></p></blockquote><h2 id="15d6" class="ka kb ht bd kc kd mp kf kg kh mq kj kk jb mr km kn jf ms kp kq jj mt ks kt ku dt translated">另外，阅读</h2><ul class=""><li id="20fb" class="la lb ht is b it kv ix kw jb mu jf mv jj mw jn lf lg lh li dt translated"><a class="ae mj" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">复制交易</a> | <a class="ae mj" rel="noopener" href="/coinmonks/crypto-tax-software-ed4b4810e338">加密税务软件</a></li><li id="723e" class="la lb ht is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li dt translated"><a class="ae mj" href="https://coincodecap.com/grid-trading" rel="noopener ugc nofollow" target="_blank">网格交易</a> | <a class="ae mj" rel="noopener" href="/coinmonks/the-best-cryptocurrency-hardware-wallets-of-2020-e28b1c124069">加密硬件钱包</a></li><li id="874f" class="la lb ht is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li dt translated"><a class="ae mj" rel="noopener" href="/coinmonks/top-3-telegram-channels-for-crypto-traders-in-2021-8385f4411ff4">密码电报信号</a> | <a class="ae mj" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">密码交易机器人</a></li><li id="f33b" class="la lb ht is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li dt translated"><a class="ae mj" rel="noopener" href="/coinmonks/crypto-exchange-dd2f9d6f3769">最佳加密交易所</a> | <a class="ae mj" rel="noopener" href="/coinmonks/bitcoin-exchange-in-india-7f1fe79715c9">印度最佳加密交易所</a></li><li id="47a8" class="la lb ht is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li dt translated">开发人员的最佳加密API</li><li id="b359" class="la lb ht is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li dt translated">最佳<a class="ae mj" rel="noopener" href="/coinmonks/top-5-crypto-lending-platforms-in-2020-that-you-need-to-know-a1b675cec3fa">密码借贷平台</a></li><li id="3c98" class="la lb ht is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li dt translated"><a class="ae mj" rel="noopener" href="/coinmonks/free-crypto-signals-48b25e61a8da">免费加密信号</a> | <a class="ae mj" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">加密交易机器人</a></li><li id="9487" class="la lb ht is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li dt translated"><a class="ae mj" rel="noopener" href="/coinmonks/leveraged-token-3f5257808b22">杠杆代币的终极指南</a></li></ul></div></div>    
</body>
</html>