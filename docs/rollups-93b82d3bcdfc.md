# 汇总

> 原文：<https://medium.com/coinmonks/rollups-93b82d3bcdfc?source=collection_archive---------4----------------------->

## 第二层

## 提高以太坊的可伸缩性

以太坊，最流行的区块链之一，过渡到 PoS 后仍然面临可扩展性问题。尽管很明显合并对可伸缩性没有帮助，但许多人仍然这样认为。即使以太坊的价格很低，很多人还是买不起。什么是汇总？它将如何提高以太坊的可伸缩性？我们来谈谈上卷及其类型。

![](img/18a84ac3bd64d521b213e09975a51882.png)

## 缩放什么？三难什么？

我已经在其他帖子[【文章】](/@hnishal/ethereum-scaling-e5028944eaac)中详细讨论了以太坊可伸缩性和区块链三难困境。但是简单地说，伸缩性是指系统处理不断增长的工作量的能力，或者说伸缩性。区块链的扩展会导致增加**块确认时间**和增加每秒**事务**(吞吐量)。以太坊的可扩展性一直是热门话题，在 NFT 和 DeFi 热潮期间，网络一直在挣扎。这导致了极高的天然气价格，在某些情况下，天然气费用超过了实际交换的资产。Trilemma 指出，你只能同时实现**去中心化**、**可伸缩性**或**安全性**中的两个，而不能同时实现三个。因此，提出了改善以太网规模解决方案。

## 什么是汇总？

汇总基本上是汇总或捆绑事务，并在链外执行它们。汇总是以太坊扩展解决方案，它在执行将数据存储回第 1 层之后，减轻了第 1 层**(以太坊 mainnet)的负载。因此**汇总**被归类为**第 2 层**解决方案。与其他第 2 层解决方案(如 sidechains rollups)不同，它们的安全性来自以太坊 mainnet。通过离线处理交易，汇总减少了以太坊主网上的计算，从而显著提高了**交易速度和成本**。汇总承诺将可扩展性提高 100 倍。**

**![](img/b29e73f24cb1122cf85a640520712799.png)**

**离线执行事务允许我们执行更多的事务，并将它们存储在第 1 层的一个块中，因为现在不是整个事务数据，而是其中的一小部分必须放入一个块中。为了实现这一点，rollup 事务在一个完全独立的链上执行。遵循以下步骤:**

1.  **执行事务**
2.  **从交易中提取数据**
3.  **压缩数据**
4.  **在一个批处理中将数据向上滚动到主链**

**汇总是至关重要的，因为它们**减少了汽油费**(离线执行的事务和压缩数据存储在块上)**增加了以太坊的 tps** (每秒事务)。但是现在出现了一个重要的问题，因为汇总使得以太坊节点不能处理每一个事务来验证它们的有效性，那么**我们如何知道存储在块上的汇总事务是有效的？****

**这些汇总生成证明，这些证明帮助我们验证交易的有效性。Rollups 在第 1 层部署了一组智能合约，负责处理存款、取款以及验证证据。现在，这些证明的验证依赖于汇总，并区分了汇总:**

1.  ****乐观汇总** —欺诈证据**
2.  ****ZK 汇总** —有效性证明(ZK 证明)**

## **乐观累计**

**乐观向上的总结是基于“无辜直到被证明有罪”的方案。假设数据是正确的，这些将数据发送到第 1 层，因此证明了“乐观”这个名称的正确性。在最好的情况下，当所有交易都有效时，不采取任何行动。这是乐观的情况，然而当有无效交易时，有一个**争议解决机制**。如**乐观，Arbitrum。****

**当有无效交易时，系统能够识别它并恢复到正确的状态，并通过没收他们的保证金来惩罚欺诈者。乐观汇总具有争议解决机制，该机制能够验证欺诈证据，检测不良交易，以及惩罚提交无效交易和虚假欺诈证据的不良行为者。**

**![](img/3fe9801279b2a95a003a70aa34353126.png)**

**向第 1 层提交交易(**甲方**)时，大多数乐观汇总都要求您以以太网形式填写债券/股权费用。如果某个网络参与者(**乙方**)在特定时间段(**挑战期**)内发现了不正确的交易，他们会提交欺诈证明以及一些保证书。系统进入争议解决模式。现在，这次在 mainnet 上再次执行可疑交易。如果执行结果确实是欺诈性的，负有责任的坏演员(**甲方**)将被处以砍掉其债券的惩罚。如果反过来欺诈证明是假的，交易是有效的。坏演员的绑醚被砍(**乙方**)。这防止参与者提交欺诈交易以及虚假证明。**

**由于这种乐观汇总是以这样的方式实现的，即当它进入争议解决模式时，系统能够用事务最初执行时呈现的确切状态来调用事务。某些智能合约负责维护和恢复汇总的状态。这些合同解决了数据可用性问题。即使只有一个好演员提交欺诈证据，该系统也能够检测欺诈。**

**![](img/1abf953dead75daa7d4e3352dcbb382b.png)**

## **ZK 汇总**

**零知识总结与乐观总结不同，没有争议解决机制。感谢使用密码**零知识证明**。除了表示所有交易所需的变更，ZK 汇总还提供 ZK 证明来证明这些变更的正确性。ZK 卷的状态由以太网上部署的智能合同维护。要更新此状态，ZK 汇总节点必须提交有效性证明以供验证。因此，与乐观汇总不同，ZK 汇总只需要提供有效性证明来完成以太坊上的交易，而不是存储链上的所有交易数据。例如 **Starknet** ， **zkSync** 。**

**在 ZK 证明中，双方不需要交换交易约束等核心信息。这就像向某人展示你完成了一个游戏，而没有透露步骤或破坏游戏。因此，与乐观汇总相反，在 ZK 汇总中，验证整个事务不会在 mainnet 上再次执行。**

**ZK-汇总将一组事务批处理成单个事务。然后，它向主链提交一个 SNARK(简洁的非交互式知识论证)作为有效性的证据。SNARK 证明后状态根(表示事务的变化)是执行当前一批事务的正确结果。SNARK 证明这一系列的交易被用户正确地批准和签名，并且帐户余额从先前状态到新状态的更新是正确的。**

**![](img/2410e163ccbb324701be0d9e84604634.png)**

**在接下来的帖子中深入讨论 SNARKS/STARKS🚀**

> **交易新手？尝试[加密交易机器人](/coinmonks/crypto-trading-bot-c2ffce8acb2a)或[复制交易](/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c)**