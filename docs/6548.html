<html>
<head>
<title>Extensions of ERC721</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ERC721的扩展</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/extensions-of-erc721-b6db9ba073d5?source=collection_archive---------13-----------------------#2022-11-20">https://medium.com/coinmonks/extensions-of-erc721-b6db9ba073d5?source=collection_archive---------13-----------------------#2022-11-20</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="7e83" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在我之前的文章<a class="ae jo" rel="noopener" href="/coinmonks/extensions-of-erc20-521b7891e39">中，我描述了最常用的令牌标准——ERC 20的扩展。现在是第二流行的令牌标准——ERC 721的时候了。所有扩展都来自OpenZeppelin库。</a></p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div class="fe ff jp"><img src="../Images/20cc7ff1c4b65fb583744759705f56ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1230/format:webp/1*pP_zBRu7R-M3l9JNAueeOA.png"/></div></figure><h1 id="6c0e" class="jx jy ht bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dt translated">核心接口</h1><p id="ea70" class="pw-post-body-paragraph iq ir ht is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hm dt translated">主要的也是唯一必须的接口是ERC721，它是ERC721标准最简单的实现。除此之外，还有两个核心实现:ERC721Metadata和ERC721Enumerable。对于最重要的接口，我们还可以数IERC721Receiver，这与我提到的其他接口不同。</p><h2 id="d56d" class="la jy ht bd jz lb lc ld kd le lf lg kh jb lh li kl jf lj lk kp jj ll lm kt ln dt translated">ERC 721元数据</h2><p id="a63f" class="pw-post-body-paragraph iq ir ht is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hm dt translated">这个接口允许我们向令牌添加名称和符号。此外，它实现了一个公共函数<code class="eh lo lp lq lr b">tokenURI</code>，该函数连接了基本Uri和<code class="eh lo lp lq lr b">tokenId</code>。所以我们可以附加一些外链信息到我们的NFT。</p><h2 id="ecca" class="la jy ht bd jz lb lc ld kd le lf lg kh jb lh li kl jf lj lk kp jj ll lm kt ln dt translated">ERC 721可数</h2><p id="e072" class="pw-post-body-paragraph iq ir ht is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hm dt translated">每枚铸造的代币都有自己独特的uint256 <code class="eh lo lp lq lr b">tokenId</code>。最频繁的，<code class="eh lo lp lq lr b">tokenId</code>从零开始递增，很容易发现哪个令牌比较老。但这不是规则。<code class="eh lo lp lq lr b">tokenId</code>可以通过完全随机的机制来设置。因此，此接口从所有令牌id列表中创建，这些令牌id只是从零开始增加。此外，除了为所有令牌创建一个列表之外，还为每个令牌所有者创建了一个列表。这个解决方案使用户的生活更容易。</p><h2 id="a1d8" class="la jy ht bd jz lb lc ld kd le lf lg kh jb lh li kl jf lj lk kp jj ll lm kt ln dt translated">ERC721Full</h2><p id="587d" class="pw-post-body-paragraph iq ir ht is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hm dt translated">连接到ERC721、ERC721Metadata和ERC721Enumerable的接口。由该工具创建的令牌是全功能令牌。</p><h2 id="7b11" class="la jy ht bd jz lb lc ld kd le lf lg kh jb lh li kl jf lj lk kp jj ll lm kt ln dt translated">ierc 721接收器</h2><p id="0618" class="pw-post-body-paragraph iq ir ht is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hm dt translated">必须由想要支持ERC721的<code class="eh lo lp lq lr b">safeTransfer</code>功能的契约实现的接口。通过使用<code class="eh lo lp lq lr b">safeTransfer</code>,我们最大限度地降低了令牌在任何智能合约中被永远锁定的风险。它是如何工作的？如果<code class="eh lo lp lq lr b">safeTransfer</code>的目标是契约，函数将调用<code class="eh lo lp lq lr b">IERC721Receiver.onERC721Received</code>，被调用的函数必须返回值等于<code class="eh lo lp lq lr b">bytes4(keccak256(“onERC721Received(address,address,uint256,bytes)”))</code>。否则，交易将被恢复。通过使用此解决方案，我们不会向不是为处理ERC721而创建的契约发送令牌。</p><h1 id="e4e4" class="jx jy ht bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dt translated">扩展ˌ扩张</h1><p id="2120" class="pw-post-body-paragraph iq ir ht is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hm dt translated">除了主接口，OpenZeppelin库还为我们提供了额外的特性契约，扩展了普通的ERC721。</p><h2 id="4e11" class="la jy ht bd jz lb lc ld kd le lf lg kh jb lh li kl jf lj lk kp jj ll lm kt ln dt translated">ERC 721可燃</h2><p id="7a60" class="pw-post-body-paragraph iq ir ht is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hm dt translated">这个扩展的名字就是线索，它做了什么—燃烧令牌。更准确地说，如果我们实现这个扩展，我们将能够不可逆地销毁一个特定的令牌。这个函数是公共的，名为<code class="eh lo lp lq lr b">burn</code>。使用它的唯一要求是<code class="eh lo lp lq lr b">msg.sender</code>必须是他想要刻录的令牌的所有者，或者他必须获得此合同的批准。</p><h2 id="0c83" class="la jy ht bd jz lb lc ld kd le lf lg kh jb lh li kl jf lj lk kp jj ll lm kt ln dt translated">ERC 721连续</h2><p id="1e89" class="pw-post-body-paragraph iq ir ht is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hm dt translated">这种扩展允许铸造大量令牌，但仅在合同构建期间。默认情况下，批量的上限是5000个令牌。当生成批处理时，IERC721Receiver实现的方面不会检查拥有这些令牌的帐户的地址。除此之外，这个扩展还改变了一件事——在构造函数中，我们不能使用传统的函数<code class="eh lo lp lq lr b">mint</code>来创建单个令牌。只有当构造函数被完全执行时，我们才能使用这个函数。</p><h2 id="3dc7" class="la jy ht bd jz lb lc ld kd le lf lg kh jb lh li kl jf lj lk kp jj ll lm kt ln dt translated">ERC 721暂停</h2><p id="413d" class="pw-post-body-paragraph iq ir ht is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hm dt translated">该扩展实现了标准ERC721契约的紧急停止机制，该机制可以由授权地址触发。它是通过增加两个新的修饰符:<code class="eh lo lp lq lr b">whenNotPaused</code>、<code class="eh lo lp lq lr b">whenPaused</code>和修改ERC721的<code class="eh lo lp lq lr b">_beforTokenTransfer</code>函数而制成的。这一修改暂停了<code class="eh lo lp lq lr b">_transfer</code>、<code class="eh lo lp lq lr b">_mint</code>和<code class="eh lo lp lq lr b">_burn</code>的工作。</p><p id="e297" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">当我们希望在评估过程中停止所有令牌传输，或者在代码中发现严重错误时，此扩展非常有用。这只是一个出现的红色大按钮，暂停一切工作。</p><h2 id="b4c7" class="la jy ht bd jz lb lc ld kd le lf lg kh jb lh li kl jf lj lk kp jj ll lm kt ln dt translated">ERC 721可靠性</h2><p id="3fa1" class="pw-post-body-paragraph iq ir ht is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hm dt translated">执行ERC2981 (NFT版税标准)。当NFT被出售时，每卖出一件作品，创作者都会得到售价的一定百分比——这个百分比被称为版税。不幸的是，每个市场都有自己的版税系统，因此，当NFT在不同的市场出售时，创作者收不到钱。为了使NFT的这一方面标准化，创建了ERC2981。这个ERC指定了一种用信号表示版税信息的方式。但它只是如何保存这些信息的标准，所以它不会强制市场支付。因此，市场有望在销售的同时自愿支付版税。目前，这种扩展不是很受欢迎，而且市场经常不想支付版税。</p><h2 id="b5b4" class="la jy ht bd jz lb lc ld kd le lf lg kh jb lh li kl jf lj lk kp jj ll lm kt ln dt translated">ERC 721 uri存储</h2><p id="5529" class="pw-post-body-paragraph iq ir ht is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hm dt translated">正如在ERC721Metadata段落中所说，我们可以将字符串变量添加到特定的令牌中。但是这个字符串总是由基本的URI和<code class="eh lo lp lq lr b">tokenId</code>连接而成。此解决方案非常高效，因为每个令牌的URI不必是链上存储。但问题是，当我们想要添加的URI不与<code class="eh lo lp lq lr b">tokenId</code>连接时，或者当不同的令牌需要不同的基本URI时。为了解决这个问题，我们可以使用这个扩展。它允许我们在链上存储特定的URI。</p><h2 id="9c51" class="la jy ht bd jz lb lc ld kd le lf lg kh jb lh li kl jf lj lk kp jj ll lm kt ln dt translated">ERC 721投票</h2><p id="183d" class="pw-post-body-paragraph iq ir ht is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hm dt translated">该扩展感谢我们可以使用ERC721进行投票，并创建自己的治理系统的元素之一。一个代币等于一个投票单位。这个扩展支持投票和委托某人投票。这一扩展的重要方面是，令牌在被委托之前不能算作投票，因为投票必须被跟踪。这是一个非常流行的限制，我们可以在<a class="ae jo" rel="noopener" href="/coinmonks/extensions-of-erc20-521b7891e39"> ERC20Votes扩展</a>中找到。</p><h1 id="c687" class="jx jy ht bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dt translated">附加常用接口</h1><p id="5793" class="pw-post-body-paragraph iq ir ht is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hm dt translated">我在这篇文章中提到的许多智能合约都使用一个合约— ERC165。因此，我认为我们应该拥有一些关于它的信息，即使它不是ERC721扩展。在我的研究中，我发现了一个关于ERC165的很棒的帖子，我肯定不会更好地解释它，所以<a class="ae jo" rel="noopener" href="/@chiqing/ethereum-standard-erc165-explained-63b54ca0d273">这里是链接</a>。我觉得真的很值得一读。</p></div><div class="ab cl ls lt hb lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="hm hn ho hp hq"><p id="08fc" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我希望这篇文章对你有用。如果你有任何想法，我如何能使我的帖子更好，请告诉我。我随时准备学习。你可以在<a class="ae jo" href="https://pl.linkedin.com/in/szymon-skrzy%C5%84ski-881462214" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>和<a class="ae jo" href="https://t.me/eszymi" rel="noopener ugc nofollow" target="_blank"> Telegram </a>上和我联系。</p><p id="c04b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">如果你想和我谈论这个话题或者我写的其他话题，请随意。我乐于交谈。</p><p id="5e5a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">快乐学习！</p><blockquote class="lz"><p id="bdaa" class="ma mb ht bd mc md me mf mg mh mi jn ek translated">交易新手？尝试<a class="ae jo" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">加密交易机器人</a>或<a class="ae jo" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">复制交易</a></p></blockquote></div></div>    
</body>
</html>