<html>
<head>
<title>How to Create Your Own Crowdsale Cotract on CSC -part1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">å¦‚ä½•åœ¨CSCä¸Šåˆ›å»ºè‡ªå·±çš„ä¼—ç­¹åˆåŒ-ç¬¬1éƒ¨åˆ†</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/coinmonks/how-to-create-your-own-crowdsale-cotract-on-csc-part1-b571420d8f7?source=collection_archive---------6-----------------------#2022-07-30">https://medium.com/coinmonks/how-to-create-your-own-crowdsale-cotract-on-csc-part1-b571420d8f7?source=collection_archive---------6-----------------------#2022-07-30</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="0559" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">è®©æˆ‘ä»¬å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªé¡¹ç›®ï¼Œå¹¶å¸Œæœ›åœ¨åŒºå—é“¾(è€Œä¸æ˜¯é›†ä¸­äº¤æ˜“æ‰€)ç‹¬ç«‹æ¨å‡ºé”€å”®è®¡åˆ’ã€‚ä½ å¦‚ä½•ç»™å¾ˆå¤šäººåˆ†å‘å¾ˆå¤šä»£å¸ï¼Ÿç­”æ¡ˆæ˜¯ä¼—å–åˆçº¦ã€‚åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†åœ¨cscä¸Šåˆ›å»ºä¸€ä¸ªæ‰¹é‡é”€å”®åˆåŒã€‚</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div class="fe ff jo"><img src="../Images/0c758e50bd1cc3d271d82e72287a9306.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*oVKdy1-89pfDf3pa73V-rQ.jpeg"/></div><figcaption class="jw jx fg fe ff jy jz bd b be z ek">photo by bianca fazacas</figcaption></figure><h2 id="1f48" class="ka kb ht bd kc kd ke kf kg kh ki kj kk jb kl km kn jf ko kp kq jj kr ks kt ku dt translated">é¡¹ç›®è®¾ç½®</h2><p id="f03f" class="pw-post-body-paragraph iq ir ht is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hm dt translated">é¦–å…ˆï¼Œæˆ‘ä»¬ä¸ºæˆ‘ä»¬çš„é¡¹ç›®åˆ›å»ºä¸€ä¸ªç›®å½•ã€‚åœ¨ç»ˆç«¯ç±»å‹ä¸­:</p><pre class="jp jq jr js fq la lb lc ld aw le dt"><span id="ad9a" class="ka kb ht lb b fv lf lg l lh li">mkdir crowdsale<br/>cd crowdsale</span></pre><p id="387e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">è¿™é‡Œæˆ‘ä»¬åšäº†ä¸¤ä»¶äº‹:<br/>æˆ‘ä»¬ä¿®æ”¹äº†Open-Zeppelinçš„æ—§ä¼—å–æ™ºèƒ½åˆçº¦ï¼Œä½¿å…¶ç¬¦åˆSolidity 0.6<br/>æˆ‘ä»¬åœ¨å®ƒçš„åŸºç¡€ä¸Šå†™å‡ºäº†è‡ªå·±çš„ä¼—å–<br/> <br/>éšç€OpenZeppelinæ¥è¿‘Solidity 0.6ï¼Œä¼—å–åˆçº¦è¢«åˆ é™¤ã€‚æœ‰äº›äººå€¾å‘äºç»™ä»¤ç‰Œæ™ºèƒ½åˆçº¦æœ¬èº«æ·»åŠ ä¸€ä¸ª<br/>â€œmint Tokenâ€åŠŸèƒ½æˆ–ç±»ä¼¼çš„ä¸œè¥¿ï¼Œä½†è¿™å°†æ˜¯ç³Ÿç³•çš„è®¾è®¡ã€‚æˆ‘ä»¬åº”è¯¥<br/>æ·»åŠ ä¸€ä¸ªå•ç‹¬çš„å¤„ç†ä»¤ç‰Œåˆ†å‘çš„ä¼—ç­¹åˆåŒã€‚</p><p id="83ad" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">è¦å®‰è£…Openzeppelinåº“ï¼Œè¯·åœ¨ç»ˆç«¯ä¸­é”®å…¥:</p><pre class="jp jq jr js fq la lb lc ld aw le dt"><span id="d3ef" class="ka kb ht lb b fv lf lg l lh li">npm install @openzeppelin/contracts</span></pre><h2 id="75e4" class="ka kb ht bd kc kd ke kf kg kh ki kj kk jb kl km kn jf ko kp kq jj kr ks kt ku dt translated">CRC20</h2><p id="97e1" class="pw-post-body-paragraph iq ir ht is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hm dt translated">æˆ‘ä»¬çš„token.solæ˜¯crc-20ã€‚ä»¥å¤ªç½‘ä¸Šçš„crc-20ä¸erc-20ç›¸åŒ</p><p id="834c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">ERC20æ˜¯ä»¥å¤ªåŠåŒºå—é“¾ä¸Šç”¨äºå®ç°ä»¤ç‰Œçš„æ™ºèƒ½åˆçº¦çš„æŠ€æœ¯æ ‡å‡†ã€‚ERCä»£è¡¨ä»¥å¤ªåŠè¯„è®ºè¯·æ±‚ï¼Œ20æ˜¯åˆ†é…ç»™è¯¥è¯·æ±‚çš„å·ç ã€‚</p><pre class="jp jq jr js fq la lb lc ld aw le dt"><span id="9c53" class="ka kb ht lb b fv lf lg l lh li">pragma solidity &gt;=0.8.10;<br/>import â€œ@openzeppelin/contracts/token/ERC20/ERC20.solâ€;<br/>contract MyToken is ERC20 {<br/>constructor(uint256 initialSupply) ERC20(â€œcoinex smart chain tokenâ€, â€œCSTâ€) public {<br/>_mint(msg.sender, initialSupply);<br/>_setupDecimals(0);<br/>}<br/>}</span></pre><p id="5d82" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">è®©æˆ‘ä»¬ä¸ºæˆ‘ä»¬çš„ä»¤ç‰Œåˆ›å»ºä¼—ç­¹åˆåŒ</p><h2 id="a966" class="ka kb ht bd kc kd ke kf kg kh ki kj kk jb kl km kn jf ko kp kq jj kr ks kt ku dt translated">ä¼—ç­¹åˆåŒ</h2><p id="006d" class="pw-post-body-paragraph iq ir ht is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hm dt translated">åˆ›å»ºä¸€ä¸ªåä¸ºâ€œTokenSale.solâ€çš„æ–‡ä»¶ï¼Œå¹¶å°†å®ƒæ”¾å…¥:</p><pre class="jp jq jr js fq la lb lc ld aw le dt"><span id="e1c1" class="ka kb ht lb b fv lf lg l lh li">pragma solidity ^0.8.10;<br/>import â€œ./Crowdsale.solâ€;<br/>contract MyTokenSale is Crowdsale {<br/>KycContract kyc;<br/>constructor(<br/>uint256 rate, // rate in TKNbits<br/>address payable wallet,<br/>IERC20 token<br/>)<br/>Crowdsale(rate, wallet, token)<br/>public<br/>{ }<br/>}</span></pre><p id="6dc3" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">æ‚¨å¯ä»¥ä½¿ç”¨Hardhatã€Tuffleå’Œcscå·¥å…·åŒ…è¿›è¡Œç¼–è¯‘å’Œæµ‹è¯•</p><p id="8f60" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">å¦‚æœä½ å–œæ¬¢å®‰å…¨å¸½ï¼Œä½ å¯ä»¥é˜…è¯»è¿™ç¯‡æ–‡ç« :</p><p id="90bf" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><a class="ae lj" rel="noopener" href="/coinmonks/introduction-to-smart-contract-development-and-dapp-development-on-csc-part3-e5ddbe2c23fa">https://medium . com/coin monks/introduction-to-smart-contract-development-and-dapp-development-on-CSC-part 3-e 5 ddbe 2c 23 fa</a></p><p id="5ed4" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">å¦‚æœä½ æƒ³ç”¨æ¾éœ²ï¼Œä½ å¯ä»¥ç”¨è¿™ç¯‡æ–‡ç« :</p><div class="lk ll fm fo lm ln"><a rel="noopener follow" target="_blank" href="/coinmonks/smart-contract-deployment-on-csc-using-truffle-152d09cd1abb"><div class="lo ab ej"><div class="lp ab lq cl cj lr"><h2 class="bd hu fv z el ls eo ep lt er et hs dt translated">ä½¿ç”¨Truffleåœ¨CSCä¸Šéƒ¨ç½²æ™ºèƒ½åˆåŒ</h2><div class="lu l"><h3 class="bd b fv z el ls eo ep lt er et ek translated">æ‚¨æ˜¯å¦æ›¾ç»å°è¯•è¿‡ä½¿ç”¨truffleåœ¨coinexæ™ºèƒ½é“¾ä¸Šéƒ¨ç½²æ‚¨çš„æ™ºèƒ½åˆçº¦ï¼Ÿåœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¸Œæœ›â€¦</h3></div><div class="lv l"><p class="bd b gc z el ls eo ep lt er et ek translated">medium.com</p></div></div><div class="lw l"><div class="lx l ly lz ma lw mb ju ln"/></div></div></a></div><p id="3b87" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">ä¸ºäº†æµ‹è¯•ä»¤ç‰Œï¼Œæˆ‘ä»¬æƒ³ç¨å¾®æ”¹å˜ä¸€ä¸‹æˆ‘ä»¬é€šå¸¸çš„è®¾ç½®ã€‚è®©æˆ‘ä»¬ä½¿ç”¨chaiçš„expectæ¥æµ‹è¯•ä»¤ç‰Œä»<br/>æ‰€æœ‰è€…åˆ°å¦ä¸€ä¸ªå¸æˆ·çš„è½¬ç§»ã€‚</p><p id="c800" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">ç„¶ååœ¨testsæ–‡ä»¶å¤¹ä¸­åˆ›å»ºæˆ‘ä»¬çš„æµ‹è¯•ã€‚åˆ›å»ºä¸€ä¸ªåä¸º/tests/MyToken.test.jsçš„æ–°æ–‡ä»¶:</p><pre class="jp jq jr js fq la lb lc ld aw le dt"><span id="6996" class="ka kb ht lb b fv lf lg l lh li">const Token = artifacts.require(â€œMyTokenâ€);<br/>var chai = require(â€œchaiâ€);<br/>const BN = web3.utils.BN;<br/>const chaiBN = require(â€˜chai-bnâ€™)(BN);<br/>chai.use(chaiBN);<br/>var chaiAsPromised = require(â€œchai-as-promisedâ€);<br/>chai.use(chaiAsPromised);<br/>const expect = chai.expect;<br/>contract(â€œToken Testâ€, async accounts =&gt; {<br/>const [ initialHolder, recipient, anotherAccount ] = accounts;<br/>it(â€œAll tokens should be in my accountâ€, async () =&gt; {<br/>let instance = await Token.deployed();<br/>let totalSupply = await instance.totalSupply();<br/>//old style:<br/>//let balance = await instance.balanceOf.call(initialHolder);<br/>//assert.equal(balance.valueOf(), 0, â€œAccount 1 has a balanceâ€);<br/>//condensed, easier readable style:<br/>await expect(instance.balanceOf(initialHolder)).to.eventually.be.a.bignumber.equal(totalSupply);<br/>});<br/>});</span></pre><p id="ee09" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨chai jsæ¥æµ‹è¯•æˆ‘ä»¬çš„å¥‘çº¦ã€‚æˆ‘ä»¬å°†åœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­è®¨è®ºæŸ´</p><p id="34aa" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">ä¸ºäº†è®©æˆ‘ä»¬çš„crowdsaleæ™ºèƒ½åˆçº¦å‘æŒ¥ä½œç”¨ï¼Œæˆ‘ä»¬å¿…é¡»å°†æ‰€æœ‰çš„é’±å‘é€åˆ°åˆçº¦ã€‚è¿™æ˜¯åœ¨æˆ‘ä»¬çš„truffleå®‰è£…ä¸­çš„è¿ç§»<br/>é˜¶æ®µå®Œæˆçš„:<br/>é—®é¢˜æ˜¯ç°åœ¨æµ‹è¯•å¤±è´¥äº†ã€‚è®©æˆ‘ä»¬å°†æ ‡å‡†çš„Truffleæµ‹è¯•å¥—ä»¶æ›´æ”¹ä¸ºopenzeppelinæµ‹è¯•å¥—ä»¶:</p><pre class="jp jq jr js fq la lb lc ld aw le dt"><span id="e7b7" class="ka kb ht lb b fv lf lg l lh li"><br/>var MyToken = artifacts.require(â€œ./MyToken.solâ€);<br/>var MyTokenSales = artifacts.require(â€œ./MyTokenSale.solâ€);<br/>module.exports = async function(deployer) {<br/>let addr = await web3.eth.getAccounts();<br/>await deployer.deploy(MyToken, 1000000000);<br/>await deployer.deploy(MyTokenSales, 1, addr[0], MyToken.address);<br/>let tokenInstance = await MyToken.deployed();<br/>await tokenInstance.transfer(MyTokenSales.address, 1000000000);<br/>};</span></pre><h2 id="f02c" class="ka kb ht bd kc kd ke kf kg kh ki kj kk jb kl km kn jf ko kp kq jj kr ks kt ku dt translated">KYCæ™ºèƒ½åˆåŒ</h2><p id="b9dc" class="pw-post-body-paragraph iq ir ht is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hm dt translated">é¦–å…ˆï¼Œæˆ‘ä»¬å°†æ·»åŠ ä¸€ä¸ªå¤„ç†ç™½åå•çš„KYCæ™ºèƒ½åˆçº¦ã€‚åœ¨contracts/KycContract.solä¸­å¢åŠ <br/>ä»¥ä¸‹å†…å®¹ã€‚</p><pre class="jp jq jr js fq la lb lc ld aw le dt"><span id="d30b" class="ka kb ht lb b fv lf lg l lh li">pragma solidity ^0.8.10;<br/>import â€œ@openzeppelin/contracts/access/Ownable.solâ€;<br/>contract KycContract is Ownable {<br/>mapping(address =&gt; bool) allowed;<br/>function setKycCompleted(address _addr) public onlyOwner {<br/>allowed[_addr] = true;<br/>}<br/>function setKycRevoked(address _addr) public onlyOwner {<br/>allowed[_addr] = false;<br/>}<br/>function kycCompleted(address _addr) public view returns(bool) {<br/>return allowed[_addr];<br/>}<br/>}</span></pre><p id="1787" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">å°†Crowdsale.solå’ŒKycContrct.solå¯¼å…¥MyTokenSale.sol:</p><pre class="jp jq jr js fq la lb lc ld aw le dt"><span id="adb2" class="ka kb ht lb b fv lf lg l lh li">pragma solidity ^0.8.10;<br/>import â€œ./Crowdsale.solâ€;<br/>import â€œ./KycContract.solâ€;<br/>contract MyTokenSale is Crowdsale {<br/>KycContract kyc;<br/>constructor(<br/>uint256 rate, // rate in TKNbits<br/>address payable wallet,<br/>IERC20 token,<br/>KycContract _kyc<br/>)<br/>Crowdsale(rate, wallet, token)<br/>public<br/>{<br/>kyc = _kyc;<br/>}<br/>function _preValidatePurchase(address beneficiary, uint256 weiAmount) internal view override {<br/>super._preValidatePurchase(beneficiary, weiAmount);<br/>require(kyc.kycCompleted(beneficiary), â€œKYC not completed yet, abortingâ€);<br/>}<br/></span></pre><h2 id="9385" class="ka kb ht bd kc kd ke kf kg kh ki kj kk jb kl km kn jf ko kp kq jj kr ks kt ku dt translated">éƒ¨ç½²</h2><p id="0283" class="pw-post-body-paragraph iq ir ht is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hm dt translated">è®©æˆ‘ä»¬è‡ªåŠ¨è¿›è¡Œéƒ¨ç½²:</p><pre class="jp jq jr js fq la lb lc ld aw le dt"><span id="7fe0" class="ka kb ht lb b fv lf lg l lh li">var MyToken = artifacts.require(â€œ./MyToken.solâ€);<br/>var MyTokenSales = artifacts.require(â€œ./MyTokenSale.solâ€);<br/>var KycContract = artifacts.require(â€œ./KycContract.solâ€);<br/>require(â€˜dotenvâ€™).config({path: â€˜../.envâ€™});<br/>module.exports = async function(deployer) {<br/>let addr = await web3.eth.getAccounts();<br/>await deployer.deploy(MyToken, process.env.INITIAL_TOKENS);<br/>await deployer.deploy(KycContract);<br/>await deployer.deploy(MyTokenSales, 1, addr[0], MyToken.address, KycContract.address);<br/>let tokenInstance = await MyToken.deployed();<br/>await tokenInstance.transfer(MyTokenSales.address, process.env.INITIAL_TOKENS);<br/>};</span></pre><p id="2476" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">æ‚¨å¯ä»¥åœ¨npmä¸­å®‰è£…dotenv:</p><pre class="jp jq jr js fq la lb lc ld aw le dt"><span id="083e" class="ka kb ht lb b fv lf lg l lh li"># install locally (recommended)<br/>npm install dotenv --save</span></pre><p id="1b90" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">Dotenvæ˜¯ä¸€ä¸ªé›¶ä¾èµ–æ¨¡å—ï¼Œå®ƒå°†ç¯å¢ƒå˜é‡ä»ä¸€ä¸ª<code class="eh mc md me lb b">.env</code>æ–‡ä»¶åŠ è½½åˆ°<code class="eh mc md me lb b"><a class="ae lj" href="https://nodejs.org/docs/latest/api/process.html#process_process_env" rel="noopener ugc nofollow" target="_blank">process.env</a></code>ä¸­ã€‚å°†é…ç½®å­˜å‚¨åœ¨ç‹¬ç«‹äºä»£ç çš„ç¯å¢ƒä¸­æ˜¯åŸºäº<a class="ae lj" href="http://12factor.net/config" rel="noopener ugc nofollow" target="_blank">åäºŒå› ç´ åº”ç”¨</a>æ–¹æ³•çš„ã€‚</p><p id="657f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">ç¥è´ºğŸ¥³</p><p id="0f84" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">æˆ‘ä»¬å·²ç»ç¼–å†™äº†dappçš„åç«¯ä»£ç ï¼Œåœ¨ä¸‹ä¸€éƒ¨åˆ†ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨å‰ç«¯ä»£ç </p><blockquote class="mf"><p id="6f72" class="mg mh ht bd mi mj mk ml mm mn mo jn ek translated">äº¤æ˜“æ–°æ‰‹ï¼Ÿè¯•è¯•<a class="ae lj" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">å¯†ç äº¤æ˜“æœºå™¨äºº</a>æˆ–<a class="ae lj" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">å¤åˆ¶äº¤æ˜“</a></p></blockquote></div></div>    
</body>
</html>