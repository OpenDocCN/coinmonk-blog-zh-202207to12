<html>
<head>
<title>Smart Contract Deployment on CSC Using Truffle</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Truffle在CSC上部署智能合同</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/smart-contract-deployment-on-csc-using-truffle-152d09cd1abb?source=collection_archive---------25-----------------------#2022-07-28">https://medium.com/coinmonks/smart-contract-deployment-on-csc-using-truffle-152d09cd1abb?source=collection_archive---------25-----------------------#2022-07-28</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="47fa" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">您是否曾经尝试过使用truffle在coinex智能链上部署您的智能合约？在本教程中，我们希望安装和配置truffle，并使用<a class="ae jo" href="https://trufflesuite.com" rel="noopener ugc nofollow" target="_blank"> truffle </a>在coinex智能链测试网上部署智能合约。</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff jp"><img src="../Images/c50ec71ae9c025bc8f3952a1bd09bbde.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dzcrTggRpwmiJsfgq-tHJw.jpeg"/></div></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">truffle</figcaption></figure><h2 id="c7e0" class="kf kg ht bd kh ki kj kk kl km kn ko kp jb kq kr ks jf kt ku kv jj kw kx ky kz dt translated">松露</h2><p id="f596" class="pw-post-body-paragraph iq ir ht is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hm dt translated">一个世界级的开发环境，测试框架和资产管道为区块链使用以太坊虚拟机(EVM)，旨在使生活作为一个开发者更容易。有了松露，你会得到:</p><ul class=""><li id="50e1" class="lf lg ht is b it iu ix iy jb lh jf li jj lj jn lk ll lm ln dt translated">内置智能合约编译、链接、部署和二进制管理。</li><li id="aa1a" class="lf lg ht is b it lo ix lp jb lq jf lr jj ls jn lk ll lm ln dt translated">快速开发的自动化合同测试。</li><li id="9e0a" class="lf lg ht is b it lo ix lp jb lq jf lr jj ls jn lk ll lm ln dt translated">可脚本化、可扩展的部署和迁移框架。</li><li id="c2c6" class="lf lg ht is b it lo ix lp jb lq jf lr jj ls jn lk ll lm ln dt translated">部署到任意数量的公共和私有网络的网络管理。</li><li id="1736" class="lf lg ht is b it lo ix lp jb lq jf lr jj ls jn lk ll lm ln dt translated">使用<a class="ae jo" href="https://github.com/ethereum/EIPs/issues/190" rel="noopener ugc nofollow" target="_blank"> ERC190 </a>标准，通过EthPM &amp; NPM进行封装管理。</li><li id="78c5" class="lf lg ht is b it lo ix lp jb lq jf lr jj ls jn lk ll lm ln dt translated">用于直接合同通信的交互式控制台。</li><li id="fc1c" class="lf lg ht is b it lo ix lp jb lq jf lr jj ls jn lk ll lm ln dt translated">支持紧密集成的可配置构建管道。</li><li id="af0b" class="lf lg ht is b it lo ix lp jb lq jf lr jj ls jn lk ll lm ln dt translated">在Truffle环境中执行脚本的外部脚本运行程序。</li></ul><p id="fbe7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><a class="ae jo" href="https://trufflesuite.com" rel="noopener ugc nofollow" target="_blank">https://trufflesuite.com</a></p><h2 id="ea28" class="kf kg ht bd kh ki kj kk kl km kn ko kp jb kq kr ks jf kt ku kv jj kw kx ky kz dt translated">安装Truffle</h2><p id="1af1" class="pw-post-body-paragraph iq ir ht is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hm dt translated">在您可以使用Truffle之前，您必须使用npm安装它。打开一个终端，使用以下命令进行全局安装。</p><pre class="jq jr js jt fq lt lu lv lw aw lx dt"><span id="8035" class="kf kg ht lu b fv ly lz l ma mb">npm install -g truffle</span></pre><h2 id="a5a3" class="kf kg ht bd kh ki kj kk kl km kn ko kp jb kq kr ks jf kt ku kv jj kw kx ky kz dt translated">要求</h2><ul class=""><li id="7634" class="lf lg ht is b it la ix lb jb mc jf md jj me jn lk ll lm ln dt translated">节点<code class="eh mf mg mh lu b">latest</code>版本</li><li id="ce65" class="lf lg ht is b it lo ix lp jb lq jf lr jj ls jn lk ll lm ln dt translated">npm <code class="eh mf mg mh lu b">latest</code>版本</li></ul><h2 id="aa8f" class="kf kg ht bd kh ki kj kk kl km kn ko kp jb kq kr ks jf kt ku kv jj kw kx ky kz dt translated">项目设置</h2><p id="727f" class="pw-post-body-paragraph iq ir ht is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hm dt translated">我们可以创建一个裸项目模板，但是在这个例子中，我们将使用<a class="ae jo" href="https://trufflesuite.com/boxes/metacoin" rel="noopener ugc nofollow" target="_blank">元硬币框</a>。</p><p id="5954" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">首先，我们为我们的项目创建一个目录。在终端类型中:</p><pre class="jq jr js jt fq lt lu lv lw aw lx dt"><span id="39a2" class="kf kg ht lu b fv ly lz l ma mb">mkdir coin<br/>cd coin</span></pre><ol class=""><li id="259e" class="lf lg ht is b it iu ix iy jb lh jf li jj lj jn mi ll lm ln dt translated">下载(“拆箱”)元硬币盒:</li></ol><pre class="jq jr js jt fq lt lu lv lw aw lx dt"><span id="c4e6" class="kf kg ht lu b fv ly lz l ma mb">truffle unbox metacoin</span></pre><p id="a570" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">注意</strong>:你可以使用<code class="eh mf mg mh lu b">truffle unbox &lt;box-name&gt;</code>命令下载任何其他的松露盒子。</p><p id="a422" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我们的松露项目结构是这样的:</p><ul class=""><li id="1eac" class="lf lg ht is b it iu ix iy jb lh jf li jj lj jn lk ll lm ln dt translated"><code class="eh mf mg mh lu b">contracts/</code><a class="ae jo" href="https://trufflesuite.com/docs/truffle/getting-started/interacting-with-your-contracts" rel="noopener ugc nofollow" target="_blank">担保合同目录</a></li><li id="2ca7" class="lf lg ht is b it lo ix lp jb lq jf lr jj ls jn lk ll lm ln dt translated"><code class="eh mf mg mh lu b">migrations/</code>:可脚本化部署文件<a class="ae jo" href="https://trufflesuite.com/docs/truffle/getting-started/running-migrations#migration-files" rel="noopener ugc nofollow" target="_blank">的目录</a></li><li id="3062" class="lf lg ht is b it lo ix lp jb lq jf lr jj ls jn lk ll lm ln dt translated"><code class="eh mf mg mh lu b">test/</code>:测试文件目录，用于<a class="ae jo" href="https://trufflesuite.com/docs/truffle/testing/testing-your-contracts" rel="noopener ugc nofollow" target="_blank">测试您的应用程序和合同</a></li><li id="b5a8" class="lf lg ht is b it lo ix lp jb lq jf lr jj ls jn lk ll lm ln dt translated"><code class="eh mf mg mh lu b">truffle.js</code>:松露<a class="ae jo" href="https://trufflesuite.com/docs/truffle/reference/configuration" rel="noopener ugc nofollow" target="_blank">配置文件</a></li></ul><p id="942e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">注意:你可以查看<a class="ae jo" href="https://trufflesuite.com/docs" rel="noopener ugc nofollow" target="_blank">松露文档</a>了解更多细节。</p><h2 id="7fd5" class="kf kg ht bd kh ki kj kk kl km kn ko kp jb kq kr ks jf kt ku kv jj kw kx ky kz dt translated">测试</h2><p id="622b" class="pw-post-body-paragraph iq ir ht is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hm dt translated">在终端中，运行可靠性测试:</p><pre class="jq jr js jt fq lt lu lv lw aw lx dt"><span id="e4c8" class="kf kg ht lu b fv ly lz l ma mb">truffle test ./test/TestMetaCoin.sol</span></pre><p id="78f9" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">您将看到以下输出:</p><pre class="jq jr js jt fq lt lu lv lw aw lx dt"><span id="20a0" class="kf kg ht lu b fv ly lz l ma mb">TestMetacoin<br/>    √ testInitialBalanceUsingDeployedContract (71ms)<br/>    √ testInitialBalanceWithNewMetaCoin (59ms)</span><span id="5a20" class="kf kg ht lu b fv mj lz l ma mb">  2 passing (794ms)</span></pre><p id="26a3" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">运行JavaScript测试:</p><pre class="jq jr js jt fq lt lu lv lw aw lx dt"><span id="fab3" class="kf kg ht lu b fv ly lz l ma mb">truffle test ./test/metacoin.js</span></pre><p id="5e4b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">您将看到以下输出:</p><pre class="jq jr js jt fq lt lu lv lw aw lx dt"><span id="74a9" class="kf kg ht lu b fv ly lz l ma mb">Contract: MetaCoin<br/>    √ should put 10000 MetaCoin in the first account<br/>    √ should call a function that depends on a linked library (40ms)<br/>    √ should send coin correctly (129ms)</span><span id="1701" class="kf kg ht lu b fv mj lz l ma mb">  3 passing (255ms)</span></pre><h2 id="6860" class="kf kg ht bd kh ki kj kk kl km kn ko kp jb kq kr ks jf kt ku kv jj kw kx ky kz dt translated">收集</h2><p id="4fa7" class="pw-post-body-paragraph iq ir ht is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hm dt translated">编译智能合同:</p><pre class="jq jr js jt fq lt lu lv lw aw lx dt"><span id="7970" class="kf kg ht lu b fv ly lz l ma mb">truffle compile</span></pre><p id="ffee" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">您将看到以下输出:</p><pre class="jq jr js jt fq lt lu lv lw aw lx dt"><span id="93bc" class="kf kg ht lu b fv ly lz l ma mb">Compiling .\contracts\ConvertLib.sol...<br/>Compiling .\contracts\MetaCoin.sol...<br/>Compiling .\contracts\Migrations.sol...</span><span id="d64a" class="kf kg ht lu b fv mj lz l ma mb">Writing artifacts to .\build\contracts</span></pre><h2 id="5cfc" class="kf kg ht bd kh ki kj kk kl km kn ko kp jb kq kr ks jf kt ku kv jj kw kx ky kz dt translated">配置块菌</h2><p id="a05e" class="pw-post-body-paragraph iq ir ht is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hm dt translated">没有任何附加功能的默认Truffle配置如下所示:</p><pre class="jq jr js jt fq lt lu lv lw aw lx dt"><span id="3bf4" class="kf kg ht lu b fv ly lz l ma mb">module.exports = {<br/>  rpc: {<br/>    host: "127.0.0.1",<br/>    port: 8545<br/>  }<br/>};</span></pre><p id="460d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这告诉Truffle，默认情况下，它应该在主机<code class="eh mf mg mh lu b">127.0.0.1</code>和端口<code class="eh mf mg mh lu b">8545</code>连接到网络客户端</p><p id="1a48" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">为了确保Truffle知道您想要部署到的网络，我们可以为实时网络添加一个特定的配置:</p><pre class="jq jr js jt fq lt lu lv lw aw lx dt"><span id="7063" class="kf kg ht lu b fv ly lz l ma mb">module.exports = {<br/>  networks: {<br/>    "csc": {<br/>      network_id: 53,<br/>      host: "https://testnet-rpc.coinex.net",<br/>      port: 8546<br/>    }<br/>  },<br/>  rpc: {<br/>    host: "127.0.0.1",<br/>    port: 8545<br/>  }<br/>};</span></pre><h2 id="b800" class="kf kg ht bd kh ki kj kk kl km kn ko kp jb kq kr ks jf kt ku kv jj kw kx ky kz dt translated">部署到CSC</h2><p id="71c6" class="pw-post-body-paragraph iq ir ht is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hm dt translated">现在还不是在csc网络上部署的时候。为此，我们可以使用以下命令进行部署:</p><pre class="jq jr js jt fq lt lu lv lw aw lx dt"><span id="6eab" class="kf kg ht lu b fv ly lz l ma mb">$ truffle migrate --network csc</span></pre><p id="f4e8" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">注意，我们要求使用<code class="eh mf mg mh lu b">"csc"</code>网络，这是我们在配置中定义的名称</p><p id="015d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">祝贺🥳</p><p id="66d6" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在，我们可以在csc上轻松部署我们的智能合同！</p><blockquote class="mk"><p id="c7c6" class="ml mm ht bd mn mo mp mq mr ms mt jn ek translated">交易新手？尝试<a class="ae jo" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">加密交易机器人</a>或<a class="ae jo" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">复制交易</a></p></blockquote></div></div>    
</body>
</html>