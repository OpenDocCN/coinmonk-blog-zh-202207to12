<html>
<head>
<title>How to determine contract address in solidity</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何确定合同地址</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/how-to-determine-contract-address-in-solidity-fe43f5c7388d?source=collection_archive---------2-----------------------#2022-07-22">https://medium.com/coinmonks/how-to-determine-contract-address-in-solidity-fe43f5c7388d?source=collection_archive---------2-----------------------#2022-07-22</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><figure class="fi fk ir is it iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff iq"><img src="../Images/a6665eaf00c6a3ead2bfa9ebf701aaef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Fm9Z114BOnmhIhKslwDfaA.jpeg"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">Image credit: dashnews.org</figcaption></figure><p id="a3ec" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">大家好。</p><p id="eed4" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">欢迎阅读这篇关于用solidity语言编程的文章(如果你不知道solidity编程语言，可以在区块链以太坊上开发智能合约)</p><p id="6dcc" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">首先，让我告诉你一点以太坊的地址:</p><p id="9995" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">以太坊地址分为两种不同(但完全相似)的类型:</p><p id="1b58" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">1- EOA(外部拥有的账户)</p><p id="c7d5" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">2-智能合同账户</p><p id="849e" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">一方面，eoa是背后有个人的账户，并且有私钥来签署要发送到区块链的交易。</p><p id="7a81" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">另一方面，智能合约账户是指背后没有任何真实的人，也没有私钥的账户。</p><p id="91fe" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">现在看看这两个地址:</p><blockquote class="kd ke kf"><p id="cab3" class="jf jg kg jh b ji jj jk jl jm jn jo jp kh jr js jt ki jv jw jx kj jz ka kb kc hm dt translated">0x5b 38 da 6a 701 c 568545 DCF CB 03 fcb 875 f 56 bed DC 4</p><p id="79bd" class="jf jg kg jh b ji jj jk jl jm jn jo jp kh jr js jt ki jv jw jx kj jz ka kb kc hm dt translated">0xd 9145 CCE 52d 386 f 254917 e 481 EB 44 e 9943 f 39138</p></blockquote><p id="8007" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">你能猜出(仅仅通过观察它们)，</p><p id="b5f4" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated"><strong class="jh hu">哪个是EOA，哪个是智能合同地址</strong>？</p><p id="86f3" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">肯定不是！</p><blockquote class="kd ke kf"><p id="714d" class="jf jg kg jh b ji jj jk jl jm jn jo jp kh jr js jt ki jv jw jx kj jz ka kb kc hm dt translated">虽然它们都是20字节长(如你所知，我们忽略0x，因为这只是为了清楚这个值是十六进制的)</p></blockquote><p id="7b0e" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">那么，我们如何确定一个地址是EOA还是智能合约地址呢？？</p><p id="c946" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">有没有什么特殊的变量/选项/函数/等等。对于这种东西的坚固性？</p><p id="789b" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">恐怕不是。这个没有这样的功能。</p><p id="4d84" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt kk translated">在这种情况下，我们可以使用汇编编程。</p><p id="7172" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">所以让我们完成它，并编写一个函数来检查地址:</p></div><div class="ab cl kt ku hb kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="hm hn ho hp hq"><p id="253a" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">为了简单起见，我们通过<a class="ae la" href="http://remix.ethereum.org/" rel="noopener ugc nofollow" target="_blank">混音IDE </a>:</p><p id="5772" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">1-在合同文件夹中创建一个新文件，并随意命名。</p><p id="80c6" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">2-然后按如下方式填写您的合同代码:</p><figure class="lc ld le lf fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff lb"><img src="../Images/e30d928c2d4945db67ff881cd0d36fa4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hQo5T6YF0RlRzvkWcMODJw.png"/></div></div></figure><pre class="lc ld le lf fq lg lh li lj aw lk dt"><span id="4979" class="ll lm ht lh b fv ln lo l lp lq">// SPDX-License-Identifier: MIT</span><span id="5616" class="ll lm ht lh b fv lr lo l lp lq">pragma solidity ^0.8.0;</span><span id="cb6c" class="ll lm ht lh b fv lr lo l lp lq">contract AccountCheck {</span><span id="3628" class="ll lm ht lh b fv lr lo l lp lq">function checkAddress(address _addr) public view returns (string memory) {</span><span id="6fa4" class="ll lm ht lh b fv lr lo l lp lq">uint length;</span><span id="b64f" class="ll lm ht lh b fv lr lo l lp lq">assembly {</span><span id="6d73" class="ll lm ht lh b fv lr lo l lp lq">length:= extcodesize(_addr)</span><span id="fb20" class="ll lm ht lh b fv lr lo l lp lq">}</span><span id="9af8" class="ll lm ht lh b fv lr lo l lp lq">if (length &gt; 0 ) {</span><span id="23d8" class="ll lm ht lh b fv lr lo l lp lq">return "Contract Account";</span><span id="8c19" class="ll lm ht lh b fv lr lo l lp lq">}</span><span id="8401" class="ll lm ht lh b fv lr lo l lp lq">return "User Account";</span><span id="f854" class="ll lm ht lh b fv lr lo l lp lq">}</span><span id="8d84" class="ll lm ht lh b fv lr lo l lp lq">}</span></pre><p id="07ef" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">现在，在remix上编译和部署了这个契约之后，我们检查前面提到的那些地址。</p><p id="0f72" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">结果如下所示:</p><p id="b315" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">第一个地址:0x 5b 38 da 6a 701 c 568545 DCF CB 03 fcb 875 f 56 bed DC 4</p><figure class="lc ld le lf fq iu fe ff paragraph-image"><div class="fe ff ls"><img src="../Images/5e393b1fea5de014a62561d4491185f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:824/format:webp/1*Q-7QE5bCdTH1Io39RmQnSQ.png"/></div></figure><p id="c7bf" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">第二个地址:0xd 9145 CCE 52d 386 f 254917 e 481 EB 44 e 9943 f 39138</p><figure class="lc ld le lf fq iu fe ff paragraph-image"><div class="fe ff lt"><img src="../Images/6a722fcb4b8c2209d84b01c8263e80aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:830/format:webp/1*fHHOAfUDLeINeufrZqAnsQ.png"/></div></figure><p id="2567" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">因此，通过在solidity中使用汇编，我们能够区分EOA地址和智能合同地址。</p><p id="a159" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">此外，例如，我们可以检查msg.sender是真实的人还是智能契约(只是让人类访问特定的功能)</p><p id="b59e" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">希望你喜欢这篇文章，如果你喜欢就鼓掌。</p><p id="7c03" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">任何问题或你以前的经验都欢迎在评论中提出:-)</p><blockquote class="lu"><p id="46a5" class="lv lw ht bd lx ly lz ma mb mc md kc ek translated">交易新手？尝试<a class="ae la" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">加密交易机器人</a>或<a class="ae la" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">复制交易</a></p></blockquote></div></div>    
</body>
</html>