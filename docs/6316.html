<html>
<head>
<title>Extensions of ERC20</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ERC20的扩展</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/extensions-of-erc20-521b7891e39?source=collection_archive---------14-----------------------#2022-11-14">https://medium.com/coinmonks/extensions-of-erc20-521b7891e39?source=collection_archive---------14-----------------------#2022-11-14</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="fa6f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">ERC20标准是以太坊生态系统中最著名的标准之一。它提供了创建和转移可替换令牌的基本功能。但是在这里我不想把重点放在ERC20标准的细节和如何实现它的方法上，因为在互联网上有大量的这类信息。我想把重点放在我们可以添加到普通ERC20标准的扩展上，使它更适合各种不同的用例。</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div class="fe ff jo"><img src="../Images/e95b6b72c835eed11c604984960ca1e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1062/format:webp/1*5Vmlaitw95bB7goc6_pHpA.png"/></div></figure><h1 id="bb64" class="jw jx ht bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt dt translated">扩展ˌ扩张</h1><p id="9a83" class="pw-post-body-paragraph iq ir ht is b it ku iv iw ix kv iz ja jb kw jd je jf kx jh ji jj ky jl jm jn hm dt translated">我将在这里描述的所有扩展都来自OpenZeppelin的github。</p><h2 id="4324" class="la jx ht bd jy lb lc ld kc le lf lg kg jb lh li kk jf lj lk ko jj ll lm ks ln dt translated">ERC 20可燃</h2><p id="5c4f" class="pw-post-body-paragraph iq ir ht is b it ku iv iw ix kv iz ja jb kw jd je jf kx jh ji jj ky jl jm jn hm dt translated">标准的ERC20实现只有内部函数<code class="eh lo lp lq lr b">_burn</code>，在任何实现的函数中都没有使用。这个扩展给了我们两个新公共函数:<code class="eh lo lp lq lr b">burn</code>和<code class="eh lo lp lq lr b">burnFrom</code>。它们都允许代币持有者拥有自己的代币和他们有津贴的代币。如果令牌持有者将通过这些功能中的一个来燃烧令牌，将发出事件<code class="eh lo lp lq lr b">Transfer</code>，这将被离线识别。</p><h2 id="afd1" class="la jx ht bd jy lb lc ld kc le lf lg kg jb lh li kk jf lj lk ko jj ll lm ks ln dt translated">ERC 20加盖</h2><p id="c7cb" class="pw-post-body-paragraph iq ir ht is b it ku iv iw ix kv iz ja jb kw jd je jf kx jh ji jj ky jl jm jn hm dt translated">这个扩展给了我们一个额外的小功能——它设置了铸造代币数量的上限。很简单，不是吗？Aaa，我有没有说过这个极限是不可改变的？所以，一旦设置了值，就没有机会更改了。</p><h2 id="5b59" class="la jx ht bd jy lb lc ld kc le lf lg kg jb lh li kk jf lj lk ko jj ll lm ks ln dt translated">ERC20FlashMint</h2><p id="3a10" class="pw-post-body-paragraph iq ir ht is b it ku iv iw ix kv iz ja jb kw jd je jf kx jh ji jj ky jl jm jn hm dt translated">这个很有意思。这是对<a class="ae kz" href="https://eips.ethereum.org/EIPS/eip-3156" rel="noopener ugc nofollow" target="_blank"> ERC3156 </a> FlashLoan扩展的实现。感谢我们创造代币的合同还能给予flashLoan，加上贷款的非零费用使我们的代币紧缩。但是默认情况下，费用设置为零。</p><p id="4cc1" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">让我们一步一步地检查它是如何工作的。当有人想从我们的合同中借用令牌时，需要使用一个<code class="eh lo lp lq lr b">flashLoan</code>函数。该函数的参数是:</p><ul class=""><li id="7625" class="ls lt ht is b it iu ix iy jb lu jf lv jj lw jn lx ly lz ma dt translated">令牌应转移到的合同地址</li><li id="d513" class="ls lt ht is b it mb ix mc jb md jf me jj mf jn lx ly lz ma dt translated">他想借的令牌的地址</li><li id="37e8" class="ls lt ht is b it mb ix mc jb md jf me jj mf jn lx ly lz ma dt translated">数量，他想要多少</li><li id="b76c" class="ls lt ht is b it mb ix mc jb md jf me jj mf jn lx ly lz ma dt translated">将发送到接收方合同的附加数据</li></ul><p id="23c8" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">当数量不大于可用于贷款的代币的最大数量时，该合同将铸造任何人想要借的代币。然后契约从接收者的契约中调用函数<code class="eh lo lp lq lr b">onFlashLoan</code>。是借款人使用借来的钱的空间。最后，<code class="eh lo lp lq lr b">onFlashLoan</code>函数必须返回等于<code class="eh lo lp lq lr b">keccak256(“ERC3156FlashBorrower.onFlashLoan”)</code>的bytes32值。当一切顺利时，契约最后会烧掉所有先前铸造的代币。</p><h2 id="1961" class="la jx ht bd jy lb lc ld kc le lf lg kg jb lh li kk jf lj lk ko jj ll lm ks ln dt translated">ERC 20暂停</h2><p id="7af5" class="pw-post-body-paragraph iq ir ht is b it ku iv iw ix kv iz ja jb kw jd je jf kx jh ji jj ky jl jm jn hm dt translated">该扩展实现了标准ERC20契约的紧急停止机制，该机制可以由授权地址触发。它是通过添加两个新的修饰符:<code class="eh lo lp lq lr b">whenNotPaused</code>、<code class="eh lo lp lq lr b">whenPaused</code>和修改ERC20的<code class="eh lo lp lq lr b">_beforTokenTransfer</code>函数而制成的。这一修改暂停了<code class="eh lo lp lq lr b">_transfer</code>、<code class="eh lo lp lq lr b">_mint</code>和<code class="eh lo lp lq lr b">_burn</code>的工作。</p><p id="f573" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">当我们希望在评估过程中停止所有令牌传输，或者在代码中发现严重错误时，此扩展非常有用。这只是一个出现的红色大按钮，暂停一切工作。</p><h2 id="db42" class="la jx ht bd jy lb lc ld kc le lf lg kg jb lh li kk jf lj lk ko jj ll lm ks ln dt translated">ERC 20快照</h2><p id="9184" class="pw-post-body-paragraph iq ir ht is b it ku iv iw ix kv iz ja jb kw jd je jf kx jh ji jj ky jl jm jn hm dt translated">提供对过去代币余额和总供应量的有效存储。通过使用这个扩展，我们能够创建基于令牌数量的安全机制或创建高效的ERC20分叉系统。</p><p id="823d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">它是如何工作的？与ERC20Pausable类似，<code class="eh lo lp lq lr b">_beforTokenTransfer</code>功能被更改。这里总是在交易之前，契约调用函数<code class="eh lo lp lq lr b">_updateAccountSnapshot</code>来保存我们当前的代币数量，并且这个函数被改变来保存我们发送代币的地址的当前余额。如果我们铸造或焚烧代币，更新总供应量的函数将被触发。所有快照都有自己的id号，我们可以用它来找到我们要找的东西。</p><h2 id="e04f" class="la jx ht bd jy lb lc ld kc le lf lg kg jb lh li kk jf lj lk ko jj ll lm ks ln dt translated">ERC 20许可证</h2><p id="6cfc" class="pw-post-body-paragraph iq ir ht is b it ku iv iw ix kv iz ja jb kw jd je jf kx jh ji jj ky jl jm jn hm dt translated">标准ERC20的下一个非常有趣的扩展。其存在的主要原因是允许令牌持有者在没有以太网的情况下转让他们自己的ERC20令牌。这一改进可以显著改善用户使用令牌的体验。</p><p id="582f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我们如何避免支付以太网的必要性？答案是外链签名批准交易。我这么说是什么意思？该扩展增加了新功能<code class="eh lo lp lq lr b">permit</code>。该功能允许用户使用由他们签名的消息来修改津贴映射，而不是像往常一样使用<code class="eh lo lp lq lr b">msg.sender</code>。因此，我们能够使其链外，并避免强制性支付以太网。听起来很棒，不是吗？</p><h2 id="31a4" class="la jx ht bd jy lb lc ld kc le lf lg kg jb lh li kk jf lj lk ko jj ll lm ks ln dt translated">ERC20Votes和ERC20VotesComp</h2><p id="73b2" class="pw-post-body-paragraph iq ir ht is b it ku iv iw ix kv iz ja jb kw jd je jf kx jh ji jj ky jl jm jn hm dt translated">这里我们有两个相似的扩展。他们都允许使用ERC20作为投票的令牌。他们跟踪投票并允许投票委托。这些扩展提出的投票机制很简单，每个帐户的投票权与拥有这个令牌有关。此外，为了防止双重投票，它们都使用了与前面描述的快照扩展类似的东西。扩展跟踪每个帐户的历史余额，所以有可能从过去检索投票权。这些扩展的小缺点是需要进行最少一次转账来记录快照中的帐户余额并获得投票权。</p><p id="3ad3" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">那么这些扩展的区别在哪里呢？区别在于令牌供应的限制。ERC20Votes支持比2⁹⁶更大的供应量，这是ERC20VotesComp的上限，并且感谢它更灵活。ERC20VotesComp为什么有这么高的上限？这个扩展适合于由GovernorAlpha和GovernorBravo使用的COMP令牌的接口。</p><h2 id="58b3" class="la jx ht bd jy lb lc ld kc le lf lg kg jb lh li kk jf lj lk ko jj ll lm ks ln dt translated">ERC 20包装器</h2><p id="dbe1" class="pw-post-body-paragraph iq ir ht is b it ku iv iw ix kv iz ja jb kw jd je jf kx jh ji jj ky jl jm jn hm dt translated">这是一个简单扩展，允许将一个ERC20令牌更改为另一个(包装令牌)。我们可以定义多少第一种类型的记号等于一个第二种类型的记号。通常，这个数字等于1。在这个扩展中，发送方发送一定数量的令牌，这些令牌存放在智能合约中，并且匹配数量的包装令牌被发送给发送方。当他想要取回他的代币时，他只需将包装好的代币放入该合同中。这在与投票等其他模块结合使用时非常有用。</p><h2 id="7765" class="la jx ht bd jy lb lc ld kc le lf lg kg jb lh li kk jf lj lk ko jj ll lm ks ln dt translated">ERC4626</h2><p id="17c6" class="pw-post-body-paragraph iq ir ht is b it ku iv iw ix kv iz ja jb kw jd je jf kx jh ji jj ky jl jm jn hm dt translated">这是跳马的符号化标准，但什么是跳马呢？Vault是智能合约，您可以在其中存放代币，然后vault使用此代币做一些事情来提供代币奖励。这是一个可以管理和存储密码的多签署合同。每个保管库总是具有作为返回生成的令牌。这些生成的代币可以与存放的代币交换，也可以与锁在金库中的代币交换。金库比钱包更安全，因此许多DeFi项目用它来存放资金。这些标准与ERC20兼容，因此我把它写成一个扩展。</p><p id="45db" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">ERC4626非常重要，尤其是对DeFi而言，因为在此标准之前，有许多不同的方法用于存储和管理资产。由于这些原因，将不同项目相互连接起来是很成问题的。这非常耗时，而且存在很大的安全漏洞风险。此外，适合一对DeFi项目的解决方案不一定适合另一对。感谢ERC4626，工作更快、更安全。</p><h1 id="6564" class="jw jx ht bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt dt translated">ERC20实用工具</h1><p id="93e9" class="pw-post-body-paragraph iq ir ht is b it ku iv iw ix kv iz ja jb kw jd je jf kx jh ji jj ky jl jm jn hm dt translated">在OpenZeppelin的图书馆中，在致力于ERC20的目录中还有一个名为ER20 utils的目录。当我们打开它时，我们会发现两个合同不是ERC20的扩展，但它们提供了一个额外的功能。</p><h2 id="2481" class="la jx ht bd jy lb lc ld kc le lf lg kg jb lh li kk jf lj lk ko jj ll lm ks ln dt translated">安全20</h2><p id="338a" class="pw-post-body-paragraph iq ir ht is b it ku iv iw ix kv iz ja jb kw jd je jf kx jh ji jj ky jl jm jn hm dt translated">并非所有开发人员都使用标准的ERC20令牌，但他们使用定制版本的ERC20接口实现，该实现有时不返回布尔返回值。当我们想创建智能合同，将与这种令牌工作，可能会有一些问题，错误等。为了防止它，我们可以使用SafeERC20(它是一个库)函数来管理所有令牌。此外，SafeERC20提供助手来增加和减少津贴，以减轻普通<code class="eh lo lp lq lr b">approve</code>可能的攻击。</p><h2 id="a442" class="la jx ht bd jy lb lc ld kc le lf lg kg jb lh li kk jf lj lk ko jj ll lm ks ln dt translated">令牌时间锁</h2><p id="3711" class="pw-post-body-paragraph iq ir ht is b it ku iv iw ix kv iz ja jb kw jd je jf kx jh ji jj ky jl jm jn hm dt translated">我认为这是这里描述的最简单的契约之一。这是一份代币持有人合同，不允许受益人在设定的发行时间之前从合同中取钱。当设定的时间过去，受益人将能够使用该功能发送给他所有的令牌。这就是全部，这份合同不再有效。</p><h1 id="ba6b" class="jw jx ht bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt dt translated">总结</h1><p id="e99f" class="pw-post-body-paragraph iq ir ht is b it ku iv iw ix kv iz ja jb kw jd je jf kx jh ji jj ky jl jm jn hm dt translated">正如我们所见，ERC20有许多不同的扩展，这使得这种令牌标准能够满足我们的需求。投票，闪贷，金库等。</p></div><div class="ab cl mg mh hb mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="hm hn ho hp hq"><p id="59c7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我希望这篇文章对你有用。如果你有任何想法，我如何能使我的帖子更好，请告诉我。我随时准备学习。你可以通过<a class="ae kz" href="https://pl.linkedin.com/in/szymon-skrzy%C5%84ski-881462214" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>和<a class="ae kz" href="https://t.me/eszymi" rel="noopener ugc nofollow" target="_blank"> Telegram </a>与我联系。</p><p id="2ef5" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">如果你想和我谈论这个话题或者我写的其他话题，请随意。我乐于交谈。</p><p id="7a61" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">快乐学习！</p><blockquote class="mn"><p id="8727" class="mo mp ht bd mq mr ms mt mu mv mw jn ek translated">交易新手？尝试<a class="ae kz" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">加密交易机器人</a>或<a class="ae kz" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">复制交易</a></p></blockquote></div></div>    
</body>
</html>