<html>
<head>
<title>Pine Script: The Basics</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">松树脚本:基础</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/pine-script-the-basics-6ec4eca1da61?source=collection_archive---------5-----------------------#2022-08-09">https://medium.com/coinmonks/pine-script-the-basics-6ec4eca1da61?source=collection_archive---------5-----------------------#2022-08-09</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="2717" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">本文将向您介绍用于TradingView平台的Pine脚本编程语言的基础知识。如果你喜欢这篇文章，请在未来关注我更多的松树脚本文章。</p><p id="60a0" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">让我们开始吧。</p><p id="6eea" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我们将关注Pine Script v5，因为它是该语言的最新版本。</p><p id="ece4" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这里有几个链接可以帮助你:</p><p id="cee2" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu"> Pine Script用户手册</strong></p><div class="jo jp fm fo jq jr"><a href="https://www.tradingview.com/pine-script-docs/en/v5/Introduction.html" rel="noopener  ugc nofollow" target="_blank"><div class="js ab ej"><div class="jt ab ju cl cj jv"><h2 class="bd hu fv z el jw eo ep jx er et hs dt translated">欢迎使用Pine Script v5-Pine Script V5用户手册V5文档</h2><div class="jy l"><h3 class="bd b fv z el jw eo ep jx er et ek translated">Pine Script是TradingView的编程语言。它允许交易者创建自己的交易工具，并在…</h3></div><div class="jz l"><p class="bd b gc z el jw eo ep jx er et ek translated">www.tradingview.com</p></div></div><div class="ka l"><div class="kb l kc kd ke ka kf kg jr"/></div></div></a></div><p id="e90b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这是一本作为技术手册的手册，讲述了这种语言是如何工作的，以及这种语言包含了哪些特性。它将帮助你理解语言是如何工作的，这将帮助你在编写代码时理解你所写的内容。</p><p id="6632" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu"> PineScript参考手册(文档)</strong></p><div class="jo jp fm fo jq jr"><a href="https://www.tradingview.com/pine-script-reference/v5/" rel="noopener  ugc nofollow" target="_blank"><div class="js ab ej"><div class="jt ab ju cl cj jv"><h2 class="bd hu fv z el jw eo ep jx er et hs dt translated">Pine Script语言参考手册</h2><div class="jy l"><h3 class="bd b fv z el jw eo ep jx er et ek translated">编辑描述</h3></div><div class="jz l"><p class="bd b gc z el jw eo ep jx er et ek translated">www.tradingview.com</p></div></div><div class="ka l"><div class="kh l kc kd ke ka kf kg jr"/></div></div></a></div><p id="4b1e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">Pine Script Language Reference Manual提供了Pine Script Language所有可能组件的字典，以及每个组件是如何具体实现的。它列出了每一个内置函数、变量、操作符，以及编写代码时可以使用的任何东西。</p><p id="1935" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">简单来说:</p><blockquote class="ki"><p id="e66d" class="kj kk ht bd kl km kn ko kp kq kr jn ek translated">用户手册就像一本关于语言的教科书</p><p id="6067" class="kj kk ht bd kl km kn ko kp kq kr jn ek translated">参考手册就像一本字典</p></blockquote><p id="f4d4" class="pw-post-body-paragraph iq ir ht is b it ks iv iw ix kt iz ja jb ku jd je jf kv jh ji jj kw jl jm jn hm dt translated">我将向您提供的大部分信息(如果不是全部的话)可以在Pine Script用户手册和语言参考手册中找到，而且格式可能更好。然而，我理解想要向一个人学习而不是阅读手册，所以让我们继续。</p></div><div class="ab cl kx ky hb kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="hm hn ho hp hq"><p id="d5e7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">松木编辑</strong></p><p id="1eb4" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">您可以将代码直接写入或复制到TradingView平台上的代码编辑器(称为Pine编辑器)或您喜欢的任何文本编辑器中。最终你的代码将不得不直接在平台上使用。</p><p id="8e57" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">要使用Pine编辑器，从任何TradingView图表中点击位于窗口底部的“Pine编辑器”选项卡，如下图所示。我用红色突出了它。</p><p id="cd37" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">如果您选择使用另一个文本编辑器，您仍然需要最终将您的代码输入到Pine编辑器中，以便将其保存到TradingView平台。</p><figure class="lf lg lh li fq lj fe ff paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="fe ff le"><img src="../Images/fcb1c75de28efe8868feb531d742b125.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1WLNRurAfymD4B6VbMxb9w.png"/></div></div><figcaption class="lp lq fg fe ff lr ls bd b be z ek">The Pine Editor Tab is located Here</figcaption></figure><p id="8f5c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">单击该选项卡后，您应该会看到类似这样的内容:</p><figure class="lf lg lh li fq lj fe ff paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="fe ff lt"><img src="../Images/58adccdcaa663240f0c664b4b23840bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ULIgGmUvW6yockLw-zcWuA.png"/></div></div><figcaption class="lp lq fg fe ff lr ls bd b be z ek">Important areas of the Pine Editor are highlighted</figcaption></figure><p id="baf4" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">绿色圆圈区域是您输入代码的地方。如您所见，打开编辑器时会自动提供一个默认模板。</p><p id="7fe4" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">黄色区域是一些有用功能的菜单，您可以在其中保存您的工作，打开您最近处理的指标等…</p></div><div class="ab cl kx ky hb kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="hm hn ho hp hq"><p id="bfed" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">第一个指示灯:逐行显示</strong></p><figure class="lf lg lh li fq lj"><div class="bz el l di"><div class="lu lv l"/></div><figcaption class="lp lq fg fe ff lr ls bd b be z ek">Ignore the .py file extension shown in the footer. That is only to show some syntax highlighting (colored text) on Medium and you will not use any .py files with Pine Script in your coding.</figcaption></figure><p id="0c98" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这是上面链接的用户手册中给出的示例指示器。让我们看看它是如何工作的。</p><p id="669a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">第1行</strong>:</p><blockquote class="lw lx ly"><p id="bdc3" class="iq ir lz is b it iu iv iw ix iy iz ja ma jc jd je mb jg jh ji mc jk jl jm jn hm dt translated">//@版本=5</p></blockquote><p id="dd5e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这一行只是告诉Pine编辑器您将使用Pine Script v5。这很重要，因为Pine脚本会随着每个新版本而变化，TradingView需要知道您使用的是哪个版本，以便知道您是否正确地编写了代码。如果你愿意的话，你<strong class="is hu"> <em class="lz">可以</em> </strong>使用以前版本的Pine脚本，但是如果你这样做的话，我们今天在这里使用的代码将不会运行。</p><p id="cd2e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">第二行:</strong></p><blockquote class="lw lx ly"><p id="c285" class="iq ir lz is b it iu iv iw ix iy iz ja ma jc jd je mb jg jh ji mc jk jl jm jn hm dt translated">指标(“MACD 1号”)</p></blockquote><p id="5eb7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这条线的<code class="eh md me mf mg b">indicator()</code>部分就是所谓的<strong class="is hu">功能</strong>。你可以看出这是一个函数，因为末尾有一个<code class="eh md me mf mg b">()</code>。</p><p id="abdf" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">函数是做特定事情的代码块。它执行一个<em class="lz">功能</em>。通常这是你想要不止一次做的事情，通过定义一个函数来执行任务，你可以通过<em class="lz">一次又一次地调用</em>这个函数来节省时间。<code class="eh md me mf mg b">indicator()</code>是Pine脚本语言中的一个内置函数，所以我们看不到它在幕后使用的确切代码，但我们可以阅读文档来了解它是如何工作的。我们可以在以后的课程中编写自己的函数。</p><p id="1c5c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在这种情况下，<code class="eh md me mf mg b">indicator()</code>函数被传递了一个<code class="eh md me mf mg b">"MACD #1"</code>的<strong class="is hu"> <em class="lz">参数</em> </strong>。如果你在参考手册中查找<code class="eh md me mf mg b">indicator()</code>函数，你会发现，当它被开发者包含在Pine脚本语言中时，它被设计成可以接受各种不同的<strong class="is hu"> <em class="lz">参数</em> </strong>。大多数参数都是可选的，但是有一个参数是必需的:title。</p><p id="c74e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">当我们输入<code class="eh md me mf mg b">“MACD #1”</code>作为函数的参数时，我们在说，“我希望这个指示器的标题是“MACD #1”。</p><p id="a5df" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">简而言之，这一行告诉TradingView我们正在创建一个新的指标，它将被称为“MACD #1”。</p><p id="bff0" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">额外提示(针对高级学习者):</strong></p><p id="cb35" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><code class="eh md me mf mg b">overlay</code>是<code class="eh md me mf mg b">indicator()</code>功能中的可选参数。如果你将<code class="eh md me mf mg b">overlay = true</code>作为一个像<code class="eh md me mf mg b">indicator("MACD #1", overlay = true)</code>一样的参数传递，那么你的指标将会出现在和你的图表相同的窗口中。否则，默认情况下<code class="eh md me mf mg b">overlay</code>设置为<code class="eh md me mf mg b">false</code>，您的指示器将出现在图表上它自己的部分。</p><p id="d260" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这对于像MACD这样的地方不是很有用，但是如果你只想显示当前价格的移动平均线，这就很有用了。</p><p id="75a4" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">第3行&amp;第4行:</strong></p><blockquote class="lw lx ly"><p id="9ba8" class="iq ir lz is b it iu iv iw ix iy iz ja ma jc jd je mb jg jh ji mc jk jl jm jn hm dt translated">快速= 12</p><p id="18b9" class="iq ir lz is b it iu iv iw ix iy iz ja ma jc jd je mb jg jh ji mc jk jl jm jn hm dt translated">慢= 26</p></blockquote><p id="4537" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这些行每个<strong class="is hu"> <em class="lz">初始化</em> </strong>一个新的<strong class="is hu"> <em class="lz">变量</em> </strong>。</p><p id="c8bd" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在我们的代码知道我们有两个新东西，每个都存储一个值。其中一个叫<code class="eh md me mf mg b">fast</code>，另一个叫<code class="eh md me mf mg b">slow</code>。</p><p id="acad" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><code class="eh md me mf mg b">fast</code>现在正在存储值12。<code class="eh md me mf mg b">slow</code>现在正在存储值26。</p><p id="41bd" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这意味着如果我们将来在代码中使用<code class="eh md me mf mg b">fast</code>和<code class="eh md me mf mg b">slow</code>，TradingView将知道我们实际上是想使用这些变量所代表的值。当您不得不多次使用同一个值时，当您希望代码可读性更好时，以及在保存在变量中的值不容易定义的更复杂的情况下，这就很方便了。</p><p id="ca87" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">第5行&amp;第6行:</strong></p><blockquote class="lw lx ly"><p id="4d92" class="iq ir lz is b it iu iv iw ix iy iz ja ma jc jd je mb jg jh ji mc jk jl jm jn hm dt translated">fastMA = ta.ema(close，fast)</p><p id="ca53" class="iq ir lz is b it iu iv iw ix iy iz ja ma jc jd je mb jg jh ji mc jk jl jm jn hm dt translated">slowMA = ta.ema(接近，缓慢)</p></blockquote><p id="4741" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在这里，我们看到了我们刚刚讨论过的所有概念的很好的例子。</p><p id="e37f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><code class="eh md me mf mg b">fastMA</code>和<code class="eh md me mf mg b">slowMA</code>都是新的<strong class="is hu">变量</strong>。在这两种情况下，“MA”代表<em class="lz">移动平均线</em>。这些变量包含什么值？</p><p id="0d32" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">如果我们看等号的右边，我们会看到一个<strong class="is hu">函数</strong>被调用。<code class="eh md me mf mg b">ta.ema()</code>。这种格式对我们来说有点新，但这是开发人员将功能内置到Pine脚本语言中的另一个例子。</p><p id="253c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在这种情况下，我们有函数调用的<code class="eh md me mf mg b">ta</code>部分和<code class="eh md me mf mg b">ema()</code>，它们分别代表<em class="lz">技术分析</em>和<em class="lz">指数移动平均线</em>。原因是，在Pine Script中，存在一种编程语言的“子部分”，它被称为<code class="eh md me mf mg b">ta</code>。那个“子部分”(不是一个技术术语)有属于它自己的函数，当我们想要使用它们时，我们必须让TradingView知道我们正在使用语言的那个部分的函数。</p><p id="92d5" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">所以在这种情况下，我们想使用<code class="eh md me mf mg b">ema()</code>函数。该函数属于Pine脚本的<code class="eh md me mf mg b">ta</code>部分，所以当我们想要调用它时，我们必须指定<code class="eh md me mf mg b">ta.ema()</code>。</p><p id="f331" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">对于变量<code class="eh md me mf mg b">fastMA</code>，我们给它赋值<code class="eh md me mf mg b">ta.ema(close, fast)</code>。</p><p id="80ea" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">对于变量<code class="eh md me mf mg b">slowMA</code>，我们给它赋值<code class="eh md me mf mg b">ta.ema(close, slow)</code>。</p><p id="ada0" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我们可以看到，<code class="eh md me mf mg b">ema()</code>函数需要两个<strong class="is hu">参数</strong>。在参考手册中我们可以看到它需要一个<em class="lz">源</em>和一个<em class="lz">长度</em>。当我们向函数传递值时，我们说我们传递的是参数。我们传入<code class="eh md me mf mg b">close</code>作为源(数据源)，传入<code class="eh md me mf mg b">fast</code>或<code class="eh md me mf mg b">slow</code>作为长度。</p><p id="9c57" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在这两种情况下，<code class="eh md me mf mg b">close</code>都是Pine脚本中的内置变量，它等于最后一个完整棒线的收盘价，或者如果你正在处理一个尚未收盘的棒线，则等于最后一个交易价格。</p><p id="39c3" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">记住，<code class="eh md me mf mg b">fast</code>和<code class="eh md me mf mg b">slow</code>存储的是我们在指示器的第3 &amp; 4行中定义的值<code class="eh md me mf mg b">12</code>和<code class="eh md me mf mg b">26</code>。所以当我们传入<code class="eh md me mf mg b">fast</code>和<code class="eh md me mf mg b">slow</code>时，我们实际上是在传入值<code class="eh md me mf mg b">12</code>和<code class="eh md me mf mg b">26</code>。</p><p id="e6fb" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">那么这一切意味着什么呢？</p><p id="71b4" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><code class="eh md me mf mg b">fastMA</code>现在存储<code class="eh md me mf mg b">ta.ema(close, fast)</code>函数调用的<strong class="is hu"> <em class="lz">返回值</em> </strong>。也就是说，它存储了函数在用我们作为参数<em class="lz">传入的<em class="lz">参数</em>处理数据后返回给我们的值。</em></p><p id="d0d7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">同样，<code class="eh md me mf mg b">slowMA</code>正在存储<code class="eh md me mf mg b">ta.ema(close, slow)</code>函数调用的<strong class="is hu"> <em class="lz">返回值</em> </strong>。</p></div><div class="ab cl kx ky hb kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="hm hn ho hp hq"><p id="19b0" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">到目前为止已经很多了，所以现在是休息一下，喝点饮料和/或吃点小吃，或者站起来四处走走，让头脑清醒一下的好时机。</p><p id="0566" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这里是我们到目前为止已经讨论过的概念列表。</p><ul class=""><li id="7a23" class="mh mi ht is b it iu ix iy jb mj jf mk jj ml jn mm mn mo mp dt translated"><strong class="is hu">初始化</strong>——当你创建一个变量时的术语。</li><li id="d3ed" class="mh mi ht is b it mq ix mr jb ms jf mt jj mu jn mm mn mo mp dt translated"><strong class="is hu">变量</strong> —您分配的保存值的名称。</li><li id="85f6" class="mh mi ht is b it mq ix mr jb ms jf mt jj mu jn mm mn mo mp dt translated"><strong class="is hu">功能</strong>——执行一项任务的一段代码。</li><li id="4144" class="mh mi ht is b it mq ix mr jb ms jf mt jj mu jn mm mn mo mp dt translated"><strong class="is hu">参数</strong> —您的函数执行任务(通常)需要的变量。一些参数可以是可选的。</li><li id="a574" class="mh mi ht is b it mq ix mr jb ms jf mt jj mu jn mm mn mo mp dt translated"><strong class="is hu">参数</strong> —您输入到函数中的数据，以便它可以执行其任务。</li></ul><p id="956e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">一切都好吗？很好。</p></div><div class="ab cl kx ky hb kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="hm hn ho hp hq"><p id="1447" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">第7行:</strong></p><blockquote class="lw lx ly"><p id="8915" class="iq ir lz is b it iu iv iw ix iy iz ja ma jc jd je mb jg jh ji mc jk jl jm jn hm dt translated">MACD = fastMA–slow ma</p></blockquote><p id="276d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在我们看到了变量的值。</p><p id="93a7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我们正在用存储在<code class="eh md me mf mg b">fastMA</code>和<code class="eh md me mf mg b">slowMA</code>中的值做一些数学运算，并将结果赋给变量<code class="eh md me mf mg b">macd</code>。在这种情况下，这就是<code class="eh md me mf mg b">fastMA</code>和<code class="eh md me mf mg b">slowMA</code>的区别。</p><p id="8f37" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这很有趣，因为第5 &amp; 6行中的函数不断更新这些值，然后我们使用不断变化的值来计算一个新值，我们称之为<code class="eh md me mf mg b">macd</code>。现在很容易看出编程是多么有用和强大。即使是这种简单的计算对一个速度如此之快的普通人来说也是不可能的。</p><p id="6bb8" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">第8行:</strong></p><blockquote class="lw lx ly"><p id="50cc" class="iq ir lz is b it iu iv iw ix iy iz ja ma jc jd je mb jg jh ji mc jk jl jm jn hm dt translated">信号= ta.ema(macd，9)</p></blockquote><p id="db7e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这到底是怎么回事？</p><p id="4f6f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我们现在正在计算一个新值，我们称之为<code class="eh md me mf mg b">signal</code>。</p><p id="dcdb" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">为了得到这个值，我们再次<em class="lz">调用<code class="eh md me mf mg b">ta.ema()</code>函数</em>，只是这一次我们传入我们刚刚在第7行计算的<code class="eh md me mf mg b">macd</code>值作为数据<em class="lz">源，</em>，我们给它一个9个周期(9个小节)的<em class="lz">长度</em>。</p><p id="146c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">所以本质上我们是在计算MACD在过去9根棒线上的指数移动平均线。</p><p id="8a4a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">第9行&amp;第10行:</strong></p><blockquote class="lw lx ly"><p id="44c9" class="iq ir lz is b it iu iv iw ix iy iz ja ma jc jd je mb jg jh ji mc jk jl jm jn hm dt translated">绘图(macd，color = color.blue)</p><p id="1cf4" class="iq ir lz is b it iu iv iw ix iy iz ja ma jc jd je mb jg jh ji mc jk jl jm jn hm dt translated">绘图(信号，颜色=颜色.橙色)</p></blockquote><p id="8116" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在奇迹发生了。</p><p id="7277" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这些行调用内置的<code class="eh md me mf mg b">plot()</code>函数，该函数告诉TradingView在我们的图表上显示什么。</p><p id="ec62" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这里我们可以看到，我们在<code class="eh md me mf mg b">blue</code>中显示<code class="eh md me mf mg b">macd</code>的值，在<code class="eh md me mf mg b">orange</code>中显示<code class="eh md me mf mg b">signal</code>的值。</p><p id="1a1b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><code class="eh md me mf mg b">color</code>是一个可选参数，而<code class="eh md me mf mg b">plot()</code>可以带很多其他可选参数，所以当我们想要使用一个特定的可选参数时，我们可以通过像<code class="eh md me mf mg b">color = color.blue</code>这样的语法显式地定义它。</p></div><div class="ab cl kx ky hb kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="hm hn ho hp hq"><p id="e6b6" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">恭喜你！您刚刚完成了Pine脚本中的第一个指标。</p><p id="3528" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">剩下的就是点击黄色圆圈区域中的“添加到图表”按钮，如顶部截图所示。您还需要保存您的指标，以便将来再次使用。实际上，MACD是TradingView中的一个内置指标，所以你刚才做的一切都是徒劳的，但至少现在你知道它是如何工作的了！:)</p><p id="f64e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">关注我或订阅我或其他媒体称之为Pine Script的更多指导帖子，在那里我们可以更深入地讨论一些有趣的主题。</p><p id="9968" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">请随时告诉我，如果你觉得这有用或没用，如果有任何事情你想在未来听到。</p><p id="5364" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">查看本系列的下一篇文章:</p><p id="c960" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><a class="ae mv" rel="noopener" href="/@tony.j.miri/functions-in-pine-script-ac2b3cfbabed">Pine脚本中的函数</a></p><blockquote class="ki"><p id="3bd6" class="kj kk ht bd kl km kn ko kp kq kr jn ek translated">交易新手？试试<a class="ae mv" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">密码交易机器人</a>或者<a class="ae mv" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">复制交易</a></p></blockquote></div></div>    
</body>
</html>