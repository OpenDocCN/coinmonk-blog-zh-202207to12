<html>
<head>
<title>CSC101 -Events</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">CSC 101-事件</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/csc101-events-18d790c717c2?source=collection_archive---------59-----------------------#2022-08-30">https://medium.com/coinmonks/csc101-events-18d790c717c2?source=collection_archive---------59-----------------------#2022-08-30</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="926b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">solidity中的事件与其他编程语言中的事件相同。事件是协定的可继承成员，它存储发出时在事务日志中传递的参数。</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="fe ff jo"><img src="../Images/78db353f85d00a7149d8bc2b6bc3c9de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nYib8N6wIy-Papn96wyEKg.png"/></div></div></figure><h2 id="03e1" class="ka kb ht bd kc kd ke kf kg kh ki kj kk jb kl km kn jf ko kp kq jj kr ks kt ku dt translated">事件</h2><p id="4744" class="pw-post-body-paragraph iq ir ht is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hm dt translated">Solidity中的事件类似于您在其他语言中使用的日志记录功能，只是日志不是记录到控制台或文件中，而是保存在区块链中，并且可以使用合同的地址进行访问，直到合同出现在区块链上</p><p id="a3d7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">事件用于将事件信息记录到EVM日志中。就气体消耗而言，事件比存储数据便宜。区块链以区块为单位存储交易。每个交易都有日志，它维护区块链中交易的每次更改的交易日志的历史。存款和转账操作在区块链中被写成事件。</p><p id="674a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">定义事件可以按如下方式进行:</p><pre class="jp jq jr js fq la lb lc ld aw le dt"><span id="a49c" class="ka kb ht lb b fv lf lg l lh li">event event_name([data to record: var_type var_name])</span></pre><p id="3c9b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">举例</strong>:</p><pre class="jp jq jr js fq la lb lc ld aw le dt"><span id="1799" class="ka kb ht lb b fv lf lg l lh li">event MyEvent (                                   <br/>    uint256 date,                                  <br/>    string value                <br/>             );</span></pre><p id="452d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">事件包含具有以下属性的特性。</p><ul class=""><li id="0464" class="lj lk ht is b it iu ix iy jb ll jf lm jj ln jn lo lp lq lr dt translated">数据的一种类型</li><li id="f879" class="lj lk ht is b it ls ix lt jb lu jf lv jj lw jn lo lp lq lr dt translated">可变的</li><li id="80cb" class="lj lk ht is b it ls ix lt jb lu jf lv jj lw jn lo lp lq lr dt translated">索引关键词</li></ul><p id="7ef7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">indexed添加到事件属性中，最多有3个参数。这意味着，主题是数据结构化的，而不是数据，并为值类型存储单个32字节的字符串，值的Keccak-256哈希用于引用类型。</p><p id="de4b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">一旦声明了事件，就可以从函数中发出事件，如下所示:</p><pre class="jp jq jr js fq la lb lc ld aw le dt"><span id="4b8c" class="ka kb ht lb b fv lf lg l lh li">emit MyEvent(block.timestamp, 'Hello World!');</span></pre><p id="2552" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">请注意下面的例子来理解事件在solidity中是如何工作的:</p><pre class="jp jq jr js fq la lb lc ld aw le dt"><span id="b04b" class="ka kb ht lb b fv lf lg l lh li">pragma solidity ^0.8.10;<br/><br/>contract Wallet {<br/>   event Deposit(address indexed _from, bytes32 indexed _id, uint _value);<br/>   function deposit(bytes32 _id) public payable {      <br/>      emit Deposit(msg.sender, _id, msg.value);<br/>   }<br/>}</span></pre><p id="77e2" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我们在dapp前端使用javascript与智能合约进行交互:</p><pre class="jp jq jr js fq la lb lc ld aw le dt"><span id="eca0" class="ka kb ht lb b fv lf lg l lh li">var abi = /* put Contract ABI here */;<br/>var ClientReceipt = web3.eth.contract(abi);<br/>var clientReceiptContract = ClientReceipt.at(" /* address */");<br/><br/>var event = clientReceiptContract.Deposit(function(error, result) {<br/>   if (!error)console.log(result);<br/>});</span></pre><p id="5dd2" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在上面的例子中，我们使用javascript从区块链的智能合约中读取数据。</p><p id="be09" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">您可以按姓名过滤事件<strong class="is hu">，按合同地址</strong>过滤事件<strong class="is hu">。</strong></p><blockquote class="lx"><p id="9258" class="ly lz ht bd ma mb mc md me mf mg jn ek translated">交易新手？尝试<a class="ae mh" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">加密交易机器人</a>或<a class="ae mh" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">复制交易</a></p><p id="debb" class="ly lz ht bd ma mb mc md me mf mg jn ek translated">加入Coinmonks <a class="ae mh" href="https://t.me/coincodecap" rel="noopener ugc nofollow" target="_blank">电报频道</a>和<a class="ae mh" href="https://www.youtube.com/c/coinmonks/videos" rel="noopener ugc nofollow" target="_blank"> Youtube频道</a>获取每日<a class="ae mh" href="http://coincodecap.com/" rel="noopener ugc nofollow" target="_blank">加密新闻</a></p></blockquote><h2 id="15d6" class="ka kb ht bd kc kd mi kf kg kh mj kj kk jb mk km kn jf ml kp kq jj mm ks kt ku dt translated">另外，阅读</h2><ul class=""><li id="20fb" class="lj lk ht is b it kv ix kw jb mn jf mo jj mp jn lo lp lq lr dt translated"><a class="ae mh" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">复制交易</a> | <a class="ae mh" rel="noopener" href="/coinmonks/crypto-tax-software-ed4b4810e338">加密税务软件</a></li><li id="723e" class="lj lk ht is b it ls ix lt jb lu jf lv jj lw jn lo lp lq lr dt translated"><a class="ae mh" href="https://coincodecap.com/grid-trading" rel="noopener ugc nofollow" target="_blank">电网交易</a> | <a class="ae mh" rel="noopener" href="/coinmonks/the-best-cryptocurrency-hardware-wallets-of-2020-e28b1c124069">加密硬件钱包</a></li><li id="874f" class="lj lk ht is b it ls ix lt jb lu jf lv jj lw jn lo lp lq lr dt translated"><a class="ae mh" rel="noopener" href="/coinmonks/top-3-telegram-channels-for-crypto-traders-in-2021-8385f4411ff4">密码电报信号</a> | <a class="ae mh" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">密码交易机器人</a></li><li id="f33b" class="lj lk ht is b it ls ix lt jb lu jf lv jj lw jn lo lp lq lr dt translated"><a class="ae mh" rel="noopener" href="/coinmonks/crypto-exchange-dd2f9d6f3769">最佳加密交易所</a> | <a class="ae mh" rel="noopener" href="/coinmonks/bitcoin-exchange-in-india-7f1fe79715c9">印度最佳加密交易所</a></li><li id="47a8" class="lj lk ht is b it ls ix lt jb lu jf lv jj lw jn lo lp lq lr dt translated"><a class="ae mh" rel="noopener" href="/coinmonks/best-crypto-apis-for-developers-5efe3a597a9f">面向开发人员的最佳加密API</a></li><li id="b359" class="lj lk ht is b it ls ix lt jb lu jf lv jj lw jn lo lp lq lr dt translated">最佳<a class="ae mh" rel="noopener" href="/coinmonks/top-5-crypto-lending-platforms-in-2020-that-you-need-to-know-a1b675cec3fa">密码借贷平台</a></li><li id="3c98" class="lj lk ht is b it ls ix lt jb lu jf lv jj lw jn lo lp lq lr dt translated"><a class="ae mh" rel="noopener" href="/coinmonks/free-crypto-signals-48b25e61a8da">免费加密信号</a> | <a class="ae mh" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">加密交易机器人</a></li><li id="9487" class="lj lk ht is b it ls ix lt jb lu jf lv jj lw jn lo lp lq lr dt translated">杠杆代币的终极指南</li></ul></div></div>    
</body>
</html>