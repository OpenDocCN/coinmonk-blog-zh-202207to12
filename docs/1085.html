<html>
<head>
<title>Learn Solidity lesson 7. Deploying smart contracts using Remix.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">学习第7课“坚实”。使用Remix部署智能合约。</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/solidity-lesson-7-deploying-smart-contracts-using-remix-8396ead642a6?source=collection_archive---------4-----------------------#2022-07-22">https://medium.com/coinmonks/solidity-lesson-7-deploying-smart-contracts-using-remix-8396ead642a6?source=collection_archive---------4-----------------------#2022-07-22</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><figure class="fi fk ir is it iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff iq"><img src="../Images/236fcc7c00e87a21b3611f75f9b08c6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wKUgdW7xe7A7vJtfiUamWA.jpeg"/></div></div></figure><p id="7c44" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">在本节中，我们将进一步解释智能合约的路径，从其创建到在区块链上的部署。</p><p id="43c2" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">要在Solidity中编写合同，只需要一个纯文本编辑器。我们使用了Remix，但是也可以使用像记事本一样简单的编辑器。然而，通常使用具有更多资源的IDE，例如Visual Studio代码。</p><p id="4af9" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">Remix编译合同，生成字节码，即需要发送到区块链的合同的二进制表示。Remix用的编译器是<em class="jz"> Solc </em>。其他广泛用于智能合约开发的框架有<strong class="jd hu">松露</strong>和<strong class="jd hu">安全帽</strong>。</p><p id="c47a" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">字节码通过事务发送到区块链。部署时，创建一个新的契约帐户，保存契约代码，并初始化契约中定义的所有状态变量(为它们分配一个专用空间)。</p><p id="dd3e" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">到目前为止，我们只部署到由Remix本身管理的虚拟机上。因为Remix也管理这个模拟区块链的账户，我们不需要担心这些。我们只需单击“部署和运行事务”选项卡上的“部署”按钮。</p><p id="6228" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">在真实的区块链中，我们需要将事务发送到一个节点。让我们记住，节点是计算机组成的<em class="jz"> p2p </em>网络中的一台计算机，它保存着账本的一个完全相同的副本，即区块链。</p><p id="1213" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">任何节点都可以接收事务。它将验证该事务，验证其格式是否正确，然后将该事务转发到其他节点，直到它到达网络上的所有计算机。</p><figure class="kb kc kd ke fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff ka"><img src="../Images/61f96ba1384acf31749f4bf0cf29426a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fuBRhp9V7goBImtwMSJmjQ.jpeg"/></div></div><figcaption class="kf kg fg fe ff kh ki bd b be z ek">The blockchain structure is made up of several nodes, which can run clients with different implementations.</figcaption></figure><p id="d2a3" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">每个节点都必须运行以太坊客户端实现。以太坊有几个客户端实现，用几种编程语言编写。用的最多的客户端是<strong class="jd hu"> Get </strong> (Go以太坊)，用Go写的。节点无非就是一台运行Geth之类软件的电脑。任何人都可以下载其中的一个实现，成为网络上的一个节点。</p><p id="5462" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">然而要做一个以太坊节点，需要下载差不多1 TB的数据，这让大部分开发者都没有运行自己的节点。</p><p id="8594" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">如果智能合同程序员也是网络的一个节点，他/她可以将事务发送到他/她自己的节点，并且它将被传播到所有其他节点。否则，事务必须发送到一个节点。节点有两种选择:公共节点和付费节点。</p><h1 id="78a0" class="kj kk ht bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg dt translated">公共节点和付费节点</h1><p id="e307" class="pw-post-body-paragraph jb jc ht jd b je lh jg jh ji li jk jl jm lj jo jp jq lk js jt ju ll jw jx jy hm dt translated">以太坊网络是公共的，是去中心化的，但不是那么去中心化。每个区块链都有一个负责维护和改进的基金会，该基金会通常提供允许连接到区块链的公共节点。</p><p id="eee0" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">这样的公共节点通过<strong class="jd hu"> JSON-RPC </strong>协议接收请求，这是以太坊和兼容区块链接收调用和事务的标准协议。对于那些在传统网络上编程的人来说，它相当于一个提供公共API的服务器。</p><p id="0bed" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">在下图中，我们可以看到一个多边形主网络的公共节点的例子。您可以通过http(s)或webSocket连接。每个区块链通常都有自己的公共节点地址。</p><figure class="kb kc kd ke fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff lm"><img src="../Images/050dc7c731a818c144893effef932aeb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pZcIfo-8w2PvBt2eZRFpbA.png"/></div></div><figcaption class="kf kg fg fe ff kh ki bd b be z ek">Polygon mainnet public node. You can connect via http or webSocket.</figcaption></figure><p id="e564" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">因为它们是公共的，所以不能保证这些节点是稳定的。另一种可能性是使用付费节点的服务，这是一些运行完整节点并提供端点服务的公司，因此用户可以通过它们发送呼叫和交易。</p><p id="de11" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">为此，您需要注册并使用访问密钥。一些提供这种服务的公司有<strong class="jd hu">因富拉</strong>、<strong class="jd hu">炼金术</strong>、<strong class="jd hu">快速节点</strong>和<strong class="jd hu">道德家</strong>等等。这些公司中的大多数都有免费计划，最多可以有一定数量的互动。</p><p id="cc39" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">要将一个契约部署到一个真实的区块链，需要向其中一个节点发送一个事务。但这笔交易需要签字，这就是我们现在要看到的。</p><h1 id="a97c" class="kj kk ht bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg dt translated">签名交易和钱包</h1><p id="c3cd" class="pw-post-body-paragraph jb jc ht jd b je lh jg jh ji li jk jl jm lj jo jp jq lk js jt ju ll jw jx jy hm dt translated">交易不能匿名，必须指定发送者。帐户必须在交易上签名，以证明汇款人对帐户拥有控制权。要签署交易，必须拥有账户的<strong class="jd hu">私钥</strong>。</p><p id="82fa" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">以太坊上的外部账户由一对公钥/私钥组成。公钥生成帐户地址，而私钥用于签署交易。只有拥有私钥的人才能使用这样的帐户，因此私钥必须保存在安全的地方。</p><p id="e359" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">管理账户的软件叫做<strong class="jd hu">钱包</strong>。基本上，它们是创建/管理密钥对并能够签署交易的软件。浏览器最著名的钱包之一是<strong class="jd hu"> MetaMask </strong>。它是Chrome和Firefox等浏览器的插件。</p><p id="383c" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">要安装MetaMask，请访问<a class="ae ln" href="http://metamask.io" rel="noopener ugc nofollow" target="_blank"> metamask.io </a>并下载。我们将很快谈论更多关于元蒙版和钱包的内容，现在我们将向你展示如何在Remix中使用元蒙版。</p><p id="9ce9" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">要连接Remix到MetaMask，在'<em class="jz">Deploy&amp;Run Transactions</em>选项卡中，不要在环境选项中选择Remix VM(以前的JavaScript VM)，而是选择'<em class="jz">Injected Provider—meta mask '</em>(以前的'<em class="jz"> Injected Web3' </em>)，如下图所示。</p><figure class="kb kc kd ke fq iu fe ff paragraph-image"><div class="fe ff lo"><img src="../Images/76a807ac689b4643b2c857270f8ec43f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1016/format:webp/1*vNgKxWZ8tuzEWRD8KLVQJg.png"/></div><figcaption class="kf kg fg fe ff kh ki bd b be z ek">Conecting Remix to MetaMask.</figcaption></figure><p id="6c95" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">这样，选择账户输入框将显示当前连接到Remix的MetaMask管理的账户，如下图所示。</p><figure class="kb kc kd ke fq iu fe ff paragraph-image"><div class="fe ff lp"><img src="../Images/89c597fb19bd8b1eb6d0d0eed628ddb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:922/format:webp/1*T9oXbzSxmMB9FzXpEHJy3Q.png"/></div><figcaption class="kf kg fg fe ff kh ki bd b be z ek">Remix will show the account managed by MetaMask.</figcaption></figure><p id="22e0" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">现在，当您单击Deploy按钮时，Remix将编写事务并将其发送到MetaMask，进行签名并转发到一个节点。</p><h1 id="7551" class="kj kk ht bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg dt translated">元掩码是节点吗？</h1><p id="349c" class="pw-post-body-paragraph jb jc ht jd b je lh jg jh ji li jk jl jm lj jo jp jq lk js jt ju ll jw jx jy hm dt translated">它不是。MetaMask只是一个钱包，也就是说，它是管理账户和签署交易的软件。当连接到Remix时，它从Remix接收未签名的事务，对其进行签名，然后将其转发到一个节点。这意味着我们需要在元掩码中配置事务应该发送到哪个节点。</p><p id="dc7e" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">MetaMask预配置了一些以太坊网络的端点，由Infura提供，包括主网络和一些测试网络。要在其他区块链上部署协定，您需要手动配置端点。</p><p id="37bb" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">在接下来的课程中，我们将开始在以太坊测试网络上部署合同，为此我们将使用MetaMask。</p><p id="5f5b" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated"><strong class="jd hu">感谢阅读</strong></p><p id="6be8" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">欢迎任何投稿。www.buymeacoffee.com/jpmorais<a class="ae ln" href="http://www.buymeacoffee.com/jpmorais" rel="noopener ugc nofollow" target="_blank"/></p><blockquote class="lq"><p id="ba67" class="lr ls ht bd lt lu lv lw lx ly lz jy ek translated">交易新手？试试<a class="ae ln" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">密码交易机器人</a>或<a class="ae ln" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">复制交易</a></p></blockquote></div></div>    
</body>
</html>