<html>
<head>
<title>CSC101 -Pure,View and fall back</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">CSC 101-纯，查看并后退</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/csc101-pure-view-and-fall-back-5d90b6a55e26?source=collection_archive---------49-----------------------#2022-08-30">https://medium.com/coinmonks/csc101-pure-view-and-fall-back-5d90b6a55e26?source=collection_archive---------49-----------------------#2022-08-30</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="a74f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">过去我们谈论函数。在本教程中，我们想谈谈实性特殊函数。留在我身边；)</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="fe ff jo"><img src="../Images/78db353f85d00a7149d8bc2b6bc3c9de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nYib8N6wIy-Papn96wyEKg.png"/></div></div></figure><h2 id="db11" class="ka kb ht bd kc kd ke kf kg kh ki kj kk jb kl km kn jf ko kp kq jj kr ks kt ku dt translated">纯函数</h2><p id="1f79" class="pw-post-body-paragraph iq ir ht is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hm dt translated">不读取或修改状态变量的函数称为纯函数。它只能使用在函数中声明的局部变量和传递给函数的参数来计算或返回值。</p><p id="0492" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">例子</strong>:</p><pre class="jp jq jr js fq la lb lc ld aw le dt"><span id="d162" class="ka kb ht lb b fv lf lg l lh li">pragma solidity ^0.8.10;<br/><br/>contract MyContract{<br/>   function getResult() public <strong class="lb hu">pure </strong>returns(uint product, uint sum){<br/>      uint X = 2; <br/>      uint Y = 4;<br/>      product = X * Y;<br/>      sum = X + Y; <br/>   }<br/>}</span></pre><p id="1af7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">如果pure函数正在执行以下任一操作，编译器会将它们视为读取状态变量，并抛出警告:</p><ol class=""><li id="fb31" class="lj lk ht is b it iu ix iy jb ll jf lm jj ln jn lo lp lq lr dt translated">读取状态变量</li><li id="775f" class="lj lk ht is b it ls ix lt jb lu jf lv jj lw jn lo lp lq lr dt translated">访问余额或地址</li><li id="5c92" class="lj lk ht is b it ls ix lt jb lu jf lv jj lw jn lo lp lq lr dt translated">调用非纯函数</li><li id="5686" class="lj lk ht is b it ls ix lt jb lu jf lv jj lw jn lo lp lq lr dt translated">访问全局变量、消息或块</li><li id="da90" class="lj lk ht is b it ls ix lt jb lu jf lv jj lw jn lo lp lq lr dt translated">在内联程序集中使用某些操作码</li></ol><p id="8602" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">如果pure函数正在执行以下任何操作，编译器会将它们视为修改状态变量，并抛出警告。</p><ol class=""><li id="6722" class="lj lk ht is b it iu ix iy jb ll jf lm jj ln jn lo lp lq lr dt translated">修改或重写状态变量</li><li id="8732" class="lj lk ht is b it ls ix lt jb lu jf lv jj lw jn lo lp lq lr dt translated">创建新合同</li><li id="3254" class="lj lk ht is b it ls ix lt jb lu jf lv jj lw jn lo lp lq lr dt translated">调用非纯函数或视图函数</li><li id="dc40" class="lj lk ht is b it ls ix lt jb lu jf lv jj lw jn lo lp lq lr dt translated">发射事件</li><li id="f11b" class="lj lk ht is b it ls ix lt jb lu jf lv jj lw jn lo lp lq lr dt translated">在内联程序集中使用某些操作码</li><li id="ea27" class="lj lk ht is b it ls ix lt jb lu jf lv jj lw jn lo lp lq lr dt translated">使用<code class="eh lx ly lz lb b">selfdestruct</code></li><li id="662b" class="lj lk ht is b it ls ix lt jb lu jf lv jj lw jn lo lp lq lr dt translated">使用低级函数调用</li><li id="2260" class="lj lk ht is b it ls ix lt jb lu jf lv jj lw jn lo lp lq lr dt translated">随函数调用一起发送以太网</li></ol><h2 id="5817" class="ka kb ht bd kc kd ke kf kg kh ki kj kk jb kl km kn jf ko kp kq jj kr ks kt ku dt translated">查看功能</h2><p id="e603" class="pw-post-body-paragraph iq ir ht is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hm dt translated">视图函数确保它们不会修改状态。一个函数可以被声明为<strong class="is hu">视图</strong>。以下语句如果出现在函数中，将被视为修改状态，在这种情况下编译器将抛出警告。视图函数是只读函数，这确保了状态变量在被调用后不能被修改。</p><p id="a20e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">如果修改状态变量、发出事件、创建其他契约、使用自毁方法、通过调用转移硬币、调用非视图或纯函数、使用低级调用等语句出现在视图函数中，则编译器会在这种情况下抛出警告。默认情况下，get方法是view函数。</p><ul class=""><li id="b7f2" class="lj lk ht is b it iu ix iy jb ll jf lm jj ln jn ma lp lq lr dt translated">修改状态变量。</li><li id="3964" class="lj lk ht is b it ls ix lt jb lu jf lv jj lw jn ma lp lq lr dt translated">发射事件。</li><li id="3d83" class="lj lk ht is b it ls ix lt jb lu jf lv jj lw jn ma lp lq lr dt translated">创建其他合同。</li><li id="c7f4" class="lj lk ht is b it ls ix lt jb lu jf lv jj lw jn ma lp lq lr dt translated">使用自毁。</li><li id="bd98" class="lj lk ht is b it ls ix lt jb lu jf lv jj lw jn ma lp lq lr dt translated">通过电话发送以太网。</li><li id="8615" class="lj lk ht is b it ls ix lt jb lu jf lv jj lw jn ma lp lq lr dt translated">调用任何未标记为view或pure的函数。</li><li id="3cdc" class="lj lk ht is b it ls ix lt jb lu jf lv jj lw jn ma lp lq lr dt translated">使用低级调用。</li><li id="c141" class="lj lk ht is b it ls ix lt jb lu jf lv jj lw jn ma lp lq lr dt translated">使用包含某些操作码的内联程序集。</li></ul><p id="597d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">举例:</strong></p><pre class="jp jq jr js fq la lb lc ld aw le dt"><span id="132f" class="ka kb ht lb b fv lf lg l lh li">pragma solidity ^0.8.10;<br/><br/>contract MyContract{<br/>   function getResult() public <strong class="lb hu">view </strong>returns(uint product, uint sum){<br/>      uint X = 1; // local variable<br/>      uint Y = 2;<br/>      product = X * Y;<br/>      sum = X + Y; <br/>   }<br/>}</span></pre><h2 id="8283" class="ka kb ht bd kc kd ke kf kg kh ki kj kk jb kl km kn jf ko kp kq jj kr ks kt ku dt translated">后退功能</h2><p id="44c8" class="pw-post-body-paragraph iq ir ht is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hm dt translated">一个合同最多可以有一个后备功能。它是使用fallback () external [payable]声明的。此函数不能有参数。它可能不返回任何内容，并且必须具有外部可见性。如果没有一个相反的函数与给定的函数签名相匹配，它将在调用契约时执行。</p><p id="7b99" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">后退功能具有以下特点:</p><ul class=""><li id="c843" class="lj lk ht is b it iu ix iy jb ll jf lm jj ln jn ma lp lq lr dt translated">当在协定上调用一个不存在的函数时，就会调用它。</li><li id="3896" class="lj lk ht is b it ls ix lt jb lu jf lv jj lw jn ma lp lq lr dt translated">要求将其标记为外部。</li><li id="0120" class="lj lk ht is b it ls ix lt jb lu jf lv jj lw jn ma lp lq lr dt translated">它没有名字。</li><li id="0686" class="lj lk ht is b it ls ix lt jb lu jf lv jj lw jn ma lp lq lr dt translated">它没有争论</li><li id="4395" class="lj lk ht is b it ls ix lt jb lu jf lv jj lw jn ma lp lq lr dt translated">它不能返回任何东西。</li><li id="3f87" class="lj lk ht is b it ls ix lt jb lu jf lv jj lw jn ma lp lq lr dt translated">可以为每个合同定义一个。</li><li id="4833" class="lj lk ht is b it ls ix lt jb lu jf lv jj lw jn ma lp lq lr dt translated">如果未标记为应付，如果合同收到无数据的纯以太网，将引发异常。</li></ul><blockquote class="mb"><p id="885e" class="mc md ht bd me mf mg mh mi mj mk jn ek translated">交易新手？试试<a class="ae ml" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">加密交易机器人</a>或者<a class="ae ml" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">复制交易</a></p></blockquote></div></div>    
</body>
</html>