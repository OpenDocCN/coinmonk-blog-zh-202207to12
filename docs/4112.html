<html>
<head>
<title>CSC101 -Gas Optimization Part1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">CSC 101-气体优化第1部分</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/csc101-gas-optimization-part1-bd3b635dbcc8?source=collection_archive---------33-----------------------#2022-09-23">https://medium.com/coinmonks/csc101-gas-optimization-part1-bd3b635dbcc8?source=collection_archive---------33-----------------------#2022-09-23</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="c4e0" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">智能合同天然气优化是智能合同开发的最重要部分之一。这对我们减少能源消耗很有帮助。</p><p id="49ab" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">为了成功，我们需要学习稳健如何处理我们的变量和功能。在本教程中，我们想谈谈坚固性优化方法。</p><p id="94ea" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这篇文章将为你提供一些在智能合同中减少汽油消耗的技巧。</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="fe ff jo"><img src="../Images/78db353f85d00a7149d8bc2b6bc3c9de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nYib8N6wIy-Papn96wyEKg.png"/></div></div></figure><h2 id="4d2e" class="ka kb ht bd kc kd ke kf kg kh ki kj kk jb kl km kn jf ko kp kq jj kr ks kt ku dt translated">最佳化</h2><p id="8e35" class="pw-post-body-paragraph iq ir ht is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hm dt translated">在计算机编程中，程序优化、代码优化或软件优化是修改软件系统以使其某方面工作更有效或使用更少资源的过程。</p><p id="8f1a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在本教程中，我们想学习一些技巧和方法来优化我们的solidity智能合同。</p><h2 id="b2d2" class="ka kb ht bd kc kd ke kf kg kh ki kj kk jb kl km kn jf ko kp kq jj kr ks kt ku dt translated">打包您的变量</h2><p id="5d58" class="pw-post-body-paragraph iq ir ht is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hm dt translated">Solidity将数据存储在256位内存插槽中。少于256位的变量将存储在单个槽中，不适合单个槽的数据分布在几个槽中。<br/>每个储气槽都消耗天然气，打包变量有助于通过减少我们合同要求的储气槽数量来优化您的天然气使用。</p><p id="7ac2" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">示例:</strong>Solidity编译器只能将两个<code class="eh la lb lc ld b">uint128</code>放在相同的256位内存槽中，当它们被声明为彼此相邻时。否则，<code class="eh la lb lc ld b">uint128</code>个变量各自只为自己占用一个单独的<code class="eh la lb lc ld b">uint256</code>，每个槽浪费128位</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="fe ff le"><img src="../Images/baaa33160cdf38d48ceee315ef183a01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1376/format:webp/1*VsKgUyVDKCwrn96RuOyP4g.png"/></div></div></figure><h2 id="a344" class="ka kb ht bd kc kd ke kf kg kh ki kj kk jb kl km kn jf ko kp kq jj kr ks kt ku dt translated">坚固性优化器</h2><p id="4106" class="pw-post-body-paragraph iq ir ht is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hm dt translated">当您编译Solidity smart contracts时，您可以指定一个优化标志来告诉Solidity编译器生成高度优化的字节码。与不使用优化标志相比，这个字节码将消耗更少的资源。</p><p id="a178" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">您可以在Remix中启用实度优化器:</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div class="fe ff lf"><img src="../Images/f998fcbc8767b5d0e3aa5785ce4ff206.png" data-original-src="https://miro.medium.com/v2/resize:fit:614/format:webp/1*EphJD_ti1ag-yU9tSP3VWQ.jpeg"/></div></figure><p id="ab63" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">你也可以在hardhat中启用优化器。把这个放进<code class="eh la lb lc ld b">hardhat.config.js</code>:</p><pre class="jp jq jr js fq lg ld lh li aw lj dt"><span id="b647" class="ka kb ht ld b fv lk ll l lm ln">module.exports = {<br/>  solidity: {<br/>    version: "0.8.10",<br/>    settings: {<br/>      optimizer: {<br/>        <strong class="ld hu">enabled: true,</strong><br/>        runs: 1000,<br/>      },<br/>    },<br/>  },<br/>};</span></pre><p id="2a3b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在Truffle中启用优化器可以按如下方式进行:</p><pre class="jp jq jr js fq lg ld lh li aw lj dt"><span id="9e33" class="ka kb ht ld b fv lk ll l lm ln">module.exports = {<br/>  compilers: {<br/>    solc: {<br/>      version: &lt;string&gt;, // A version or constraint - Ex. "^0.5.0"<br/>                         // Can be set to "native" to use a native solc or<br/>                         // "pragma" which attempts to autodetect compiler versions<br/>      docker: &lt;boolean&gt;, // Use a version obtained through docker<br/>      parser: "solcjs",  // Leverages solc-js purely for speedy parsing<br/>      settings: {<br/>       <strong class="ld hu"> optimizer: {<br/>          enabled: &lt;boolean&gt;,</strong><br/>          runs: &lt;number&gt;   // Optimize for how many times you intend to run the code<br/>        }</span></pre><h2 id="c2b2" class="ka kb ht bd kc kd ke kf kg kh ki kj kk jb kl km kn jf ko kp kq jj kr ks kt ku dt translated">删除未使用的变量</h2><p id="4535" class="pw-post-body-paragraph iq ir ht is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hm dt translated">在CSC，你可以获得释放存储空间的气体退款。<br/>删除可变退款15，000燃气，最高可达交易燃气费用的一半。用<code class="eh la lb lc ld b">delete</code>关键字删除相当于给数据类型赋值初始值，比如<code class="eh la lb lc ld b">0</code>给整数。</p><h2 id="2786" class="ka kb ht bd kc kd ke kf kg kh ki kj kk jb kl km kn jf ko kp kq jj kr ks kt ku dt translated">离链计算</h2><p id="f686" class="pw-post-body-paragraph iq ir ht is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hm dt translated">如果你知道要散列什么数据，就没有必要消耗更多的计算能力来使用<code class="eh la lb lc ld b">keccak256.</code>散列它</p><blockquote class="lo"><p id="a770" class="lp lq ht bd lr ls lt lu lv lw lx jn ek translated">加入Coinmonks <a class="ae ly" href="https://t.me/coincodecap" rel="noopener ugc nofollow" target="_blank">电报频道</a>和<a class="ae ly" href="https://www.youtube.com/c/coinmonks/videos" rel="noopener ugc nofollow" target="_blank"> Youtube频道</a>了解加密交易和投资</p></blockquote><h1 id="d02e" class="lz kb ht bd kc ma mb mc kg md me mf kk mg mh mi kn mj mk ml kq mm mn mo kt mp dt translated">另外，阅读</h1><ul class=""><li id="95f0" class="mq mr ht is b it kv ix kw jb ms jf mt jj mu jn mv mw mx my dt translated"><a class="ae ly" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">加密交易机器人</a> | <a class="ae ly" href="https://coincodecap.com/okex-vs-binance" rel="noopener ugc nofollow" target="_blank"> OKEx vs币安</a></li><li id="16c5" class="mq mr ht is b it mz ix na jb nb jf nc jj nd jn mv mw mx my dt translated"><a class="ae ly" href="https://coincodecap.com/binance-vs-ftx" rel="noopener ugc nofollow" target="_blank">币安vs FTX </a> | <a class="ae ly" href="https://coincodecap.com/solana-wallets" rel="noopener ugc nofollow" target="_blank">最佳(SOL)索拉纳钱包</a></li><li id="d842" class="mq mr ht is b it mz ix na jb nb jf nc jj nd jn mv mw mx my dt translated"><a class="ae ly" href="https://coincodecap.com/swap-crypto-on-uniswap" rel="noopener ugc nofollow" target="_blank">如何在Uniswap上交换加密？</a> | <a class="ae ly" href="https://coincodecap.com/a-ads-review" rel="noopener ugc nofollow" target="_blank"> A-Ads评论</a></li><li id="bd20" class="mq mr ht is b it mz ix na jb nb jf nc jj nd jn mv mw mx my dt translated"><a class="ae ly" rel="noopener" href="/coinmonks/cryptocurrency-savings-accounts-be3bc0feffbf">加密货币储蓄账户</a> | <a class="ae ly" rel="noopener" href="/coinmonks/yobit-review-175464162c62"> YoBit审核</a></li><li id="bc2d" class="mq mr ht is b it mz ix na jb nb jf nc jj nd jn mv mw mx my dt translated"><a class="ae ly" rel="noopener" href="/coinmonks/botsfolio-vs-napbots-vs-mudrex-c81344970c02">Botsfolio vs nap bots vs Mudrex</a>|<a class="ae ly" rel="noopener" href="/coinmonks/gate-io-exchange-review-61bf87b7078f">gate . io交流回顾</a></li></ul></div></div>    
</body>
</html>