<html>
<head>
<title>CSC From A to Z — part4</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">CSC从A到Z —第4部分</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/csc-from-a-to-z-part5-59af2838852e?source=collection_archive---------24-----------------------#2022-07-30">https://medium.com/coinmonks/csc-from-a-to-z-part5-59af2838852e?source=collection_archive---------24-----------------------#2022-07-30</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><figure class="fi fk ir is it iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff iq"><img src="../Images/06a116eb42f38379204bbf3b19f6def8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dWeGPvpslL98npgRQjPt8w.png"/></div></div></figure><h2 id="4cb8" class="jb jc ht bd jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy dt translated">征求意见</h2><p id="1d97" class="pw-post-body-paragraph jz ka ht kb b kc kd ke kf kg kh ki kj jm kk kl km jq kn ko kp ju kq kr ks kt hm dt translated">当构建去中心化的系统时，最重要的部分之一是如何与它们交互，你知道一个智能契约有一般的功能，但是你需要一个ABI来调用它们。</p><p id="752a" class="pw-post-body-paragraph jz ka ht kb b kc ku ke kf kg kv ki kj jm kw kl km jq kx ko kp ju ky kr ks kt hm dt translated">也许你可以以某种方式对ABI进行逆向工程，例如，通过阅读源代码，但不幸的是，并不是所有的智能合同都是开源的，这个原因使得这项工作有点困难。</p><h2 id="3b52" class="jb jc ht bd jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy dt translated">CRC-20和CRC-721令牌标准</h2><figure class="la lb lc ld fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff kz"><img src="../Images/3c2fbbfa1250919503b11c325c95de1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O3gkuy59qCAgUz03d2CvSg.jpeg"/></div></div><figcaption class="le lf fg fe ff lg lh bd b be z ek">ERC-721</figcaption></figure><p id="b64c" class="pw-post-body-paragraph jz ka ht kb b kc ku ke kf kg kv ki kj jm kw kl km jq kx ko kp ju ky kr ks kt hm dt translated">最著名的ERCs ERC-20针对可替代代币，通常称为加密货币或简称代币，ERC-721针对不可替代代币，称为NFTs。</p><figure class="la lb lc ld fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff li"><img src="../Images/81dc17566ffc9d4cf5efdb92a412c6e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6hXAW6Ei7ih6YzseoS0h_g.jpeg"/></div></div><figcaption class="le lf fg fe ff lg lh bd b be z ek">NFT</figcaption></figure><p id="db34" class="pw-post-body-paragraph jz ka ht kb b kc ku ke kf kg kv ki kj jm kw kl km jq kx ko kp ju ky kr ks kt hm dt translated">如果智能合约的重要功能通常被限制在特定的地址，那么它们大多数都是外部的，没有任何权限，所以你可以通过Ethers.js调用它们。</p><p id="e64f" class="pw-post-body-paragraph jz ka ht kb b kc ku ke kf kg kv ki kj jm kw kl km jq kx ko kp ju ky kr ks kt hm dt translated">您可以从我以前的文章中了解这个主题:</p><p id="dcc5" class="pw-post-body-paragraph jz ka ht kb b kc ku ke kf kg kv ki kj jm kw kl km jq kx ko kp ju ky kr ks kt hm dt translated"><a class="ae lj" rel="noopener" href="/coinmonks/nft-collection-deployment-on-csc-6d41ce988a40">https://medium . com/coin monks/NFT-collection-deployment-on-CSC-6d 41 ce 988 a 40</a></p><h2 id="8713" class="jb jc ht bd jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy dt translated">创建一个CRC-721只读ABI</h2><p id="b399" class="pw-post-body-paragraph jz ka ht kb b kc kd ke kf kg kh ki kj jm kk kl km jq kn ko kp ju kq kr ks kt hm dt translated">如果你知道NFT制造的智能合约的地址，你可以去搜索一个ERC-721 ABI，用它和地址一起调用它。</p><p id="5eac" class="pw-post-body-paragraph jz ka ht kb b kc ku ke kf kg kv ki kj jm kw kl km jq kx ko kp ju ky kr ks kt hm dt translated">ERC-721合同的可靠性用户界面如下:</p><pre class="la lb lc ld fq lk ll lm ln aw lo dt"><span id="26b5" class="jb jc ht ll b fv lp lq l lr ls">interface ERC721 {<br/>    event Transfer(address indexed _from, address indexed _to, uint256 indexed _tokenId);<br/>    event Approval(address indexed _owner, address indexed _approved, uint256 indexed _ tokenId );<br/>    event ApprovalForAll(address indexed _owner, address indexed _operator, bool _approved);<br/><br/>    function balanceOf(address _owner) external view returns (uint256);<br/>    function ownerOf(uint256 _tokenId) external view returns (address);<br/>    function safeTransferFrom(address _from, address _to, uint256 _tokenId, bytes data) external payable;<br/>    function safeTransferFrom(address _from, address _to, uint256 _tokenId) external payable;<br/>    function transferFrom(address _from, address _to, uint256 _tokenId) external payable;<br/>    function approve(address _approved, uint256 _tokenId) external payable;<br/>    function setApprovalForAll(address _operator, bool _approved) external;<br/>    function getApproved(uint256 _tokenId) external view returns (address);<br/>    function isApprovedForAll(address _owner, address _operator) external view returns (bool);<br/>}</span></pre><p id="9653" class="pw-post-body-paragraph jz ka ht kb b kc ku ke kf kg kv ki kj jm kw kl km jq kx ko kp ju ky kr ks kt hm dt translated">在前面的课程中，我们了解到，通过将字符串形式的函数签名复制到JavaScript表示中，可以将其转换为Ethers.js的ABI。</p><pre class="la lb lc ld fq lk ll lm ln aw lo dt"><span id="c897" class="jb jc ht ll b fv lp lq l lr ls">const crc721Abi = [<br/>  "function balanceOf(address _owner) external view returns (uint256)",<br/>  "function ownerOf(uint256 _tokenId) external view returns (address)",<br/>  "function safeTransferFrom(address _from, address _to, uint256 _tokenId, bytes data) external payable",<br/>  "function safeTransferFrom(address _from, address _to, uint256 _tokenId) external payable",<br/>  "function transferFrom(address _from, address _to, uint256 _tokenId) external payable",<br/>  "function approve(address _approved, uint256 _tokenId) external payable",<br/>  "function setApprovalForAll(address _operator, bool _approved) external",<br/>  "function getApproved(uint256 _tokenId) external view returns (address)",<br/>  "function isApprovedForAll(address _owner, address _operator) external view returns (bool)",<br/>]</span></pre><p id="8d28" class="pw-post-body-paragraph jz ka ht kb b kc ku ke kf kg kv ki kj jm kw kl km jq kx ko kp ju ky kr ks kt hm dt translated">现在由于我们还没有封闭的钱包，我们只能调用视图函数，所以让我们绕过其余的。</p><pre class="la lb lc ld fq lk ll lm ln aw lo dt"><span id="94fb" class="jb jc ht ll b fv lp lq l lr ls">const crc721ReadOnlyAbi = [<br/>  "function balanceOf(address _owner) external view returns (uint256)",<br/>  "function ownerOf(uint256 _tokenId) external view returns (address)",<br/>  "function getApproved(uint256 _tokenId) external view returns (address)",<br/>  "function isApprovedForAll(address _owner, address _operator) external view returns (bool)",<br/>]</span></pre><p id="3f2b" class="pw-post-body-paragraph jz ka ht kb b kc ku ke kf kg kv ki kj jm kw kl km jq kx ko kp ju ky kr ks kt hm dt translated">尝试获取其所在的NFT合同的所有者令牌Id 5666</p><figure class="la lb lc ld fq iu fe ff paragraph-image"><div class="fe ff lt"><img src="../Images/c5d79caf022d262bfdc5441dad3142f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:656/format:webp/1*ruPSVnihVVwjMNUbHih54A.png"/></div></figure><p id="c9a8" class="pw-post-body-paragraph jz ka ht kb b kc ku ke kf kg kv ki kj jm kw kl km jq kx ko kp ju ky kr ks kt hm dt translated">使用我们上面定义的ABI并打印结果。</p><figure class="la lb lc ld fq iu fe ff paragraph-image"><div class="fe ff lu"><img src="../Images/7fead54a1cd8df8189bc165b9e6a60bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1172/format:webp/1*Uqx-zCZLp3I7cEzVu0Ugjw.png"/></div></figure><h2 id="7fa4" class="jb jc ht bd jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy dt translated">结论:</h2><p id="7d86" class="pw-post-body-paragraph jz ka ht kb b kc kd ke kf kg kh ki kj jm kk kl km jq kn ko kp ju kq kr ks kt hm dt translated">在这一课中，我们了解了ERC，他们如何标准化接口和行为，以帮助您使用这些契约，并允许其他契约与之交互。</p><p id="926e" class="pw-post-body-paragraph jz ka ht kb b kc ku ke kf kg kv ki kj jm kw kl km jq kx ko kp ju ky kr ks kt hm dt translated">我们还将CRC-721中定义的一个独立接口转换成了一个ABI，您可以在Ethers.js中使用它</p><blockquote class="lv"><p id="2aa0" class="lw lx ht bd ly lz ma mb mc md me kt ek translated">交易新手？试试<a class="ae lj" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">密码交易机器人</a>或者<a class="ae lj" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">复制交易</a></p></blockquote></div></div>    
</body>
</html>