<html>
<head>
<title>Create your chatbot using Rasa and deploy it on AWS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Rasa创建您的聊天机器人，并将其部署在AWS上</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/create-your-chatbot-using-rasa-and-deploy-it-on-aws-e59b4f296605?source=collection_archive---------0-----------------------#2022-08-08">https://medium.com/coinmonks/create-your-chatbot-using-rasa-and-deploy-it-on-aws-e59b4f296605?source=collection_archive---------0-----------------------#2022-08-08</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><figure class="fi fk ir is it iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff iq"><img src="../Images/d2bc493dd6c6845673107854566acd38.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ztJdM475KnXzTwFrrYEmeQ.png"/></div></div></figure><p id="62c5" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">聊天机器人已经成为客户服务自动化的重要组成部分，因为它可以帮助客户对他们的查询做出快速响应。在covid爆发后，80%的营销人员计划开始使用聊天机器人来改善客户支持。据《福布斯》报道，聊天机器人市场预计到2025年将达到12.5亿美元。</p><p id="c511" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">聊天机器人是一种通过文本或语音交互模拟人类对话的计算机程序。它带来了成本节约并提高了企业的运营效率，因为他们可以通过自动化常见问题解答和快速回复来减少对人工交互的需求。</p><p id="1261" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated"><a class="ae jz" href="https://rasa.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="jd hu"> Rasa </strong> </a>是一个开源框架，使用Python和NLU构建定制的AI聊天机器人。使用Rasa构建的聊天机器人可以部署在多个社交平台上，如Whatsapp、脸书、slack等网站</p><p id="dd16" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">在本节中，我们将学习使用Rasa创建一个自定义聊天机器人，并将其部署在AWS VM上。</p><h1 id="b2d1" class="ka kb ht bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated">入门指南</h1><h2 id="44b6" class="ky kb ht bd kc kz la lb kg lc ld le kk jm lf lg ko jq lh li ks ju lj lk kw ll dt translated">目录</h2><ul class=""><li id="9976" class="lm ln ht jd b je lo ji lp jm lq jq lr ju ls jy lt lu lv lw dt translated"><a class="ae jz" href="#22d9" rel="noopener ugc nofollow"><strong class="jd hu">A部分:Rasa聊天机器人的创建和集成到前端</strong> </a></li><li id="0dc5" class="lm ln ht jd b je lx ji ly jm lz jq ma ju mb jy lt lu lv lw dt translated"><a class="ae jz" href="#b8ec" rel="noopener ugc nofollow">先决条件</a></li><li id="5213" class="lm ln ht jd b je lx ji ly jm lz jq ma ju mb jy lt lu lv lw dt translated"><a class="ae jz" href="#deb7" rel="noopener ugc nofollow"> Rasa安装</a></li><li id="d34c" class="lm ln ht jd b je lx ji ly jm lz jq ma ju mb jy lt lu lv lw dt translated"><a class="ae jz" href="#ce1c" rel="noopener ugc nofollow">创建第一个Rasa项目</a></li><li id="29db" class="lm ln ht jd b je lx ji ly jm lz jq ma ju mb jy lt lu lv lw dt translated"><a class="ae jz" href="#65df" rel="noopener ugc nofollow">了解项目结构</a></li><li id="5016" class="lm ln ht jd b je lx ji ly jm lz jq ma ju mb jy lt lu lv lw dt translated"><a class="ae jz" href="#6e5e" rel="noopener ugc nofollow">定制您的聊天机器人</a></li><li id="5a57" class="lm ln ht jd b je lx ji ly jm lz jq ma ju mb jy lt lu lv lw dt translated"><a class="ae jz" href="#2dcf" rel="noopener ugc nofollow">拉莎形象化</a></li><li id="469b" class="lm ln ht jd b je lx ji ly jm lz jq ma ju mb jy lt lu lv lw dt translated"><a class="ae jz" href="#42a4" rel="noopener ugc nofollow"> Rasa测试</a></li><li id="989c" class="lm ln ht jd b je lx ji ly jm lz jq ma ju mb jy lt lu lv lw dt translated"><a class="ae jz" href="#8519" rel="noopener ugc nofollow">前端集成</a></li><li id="d33f" class="lm ln ht jd b je lx ji ly jm lz jq ma ju mb jy lt lu lv lw dt translated"><a class="ae jz" href="#fa1e" rel="noopener ugc nofollow">版本控制</a></li><li id="ddff" class="lm ln ht jd b je lx ji ly jm lz jq ma ju mb jy lt lu lv lw dt translated"><a class="ae jz" href="#070a" rel="noopener ugc nofollow"><strong class="jd hu">B部分:在AWS EC2上部署聊天机器人</strong> </a></li><li id="6c61" class="lm ln ht jd b je lx ji ly jm lz jq ma ju mb jy lt lu lv lw dt translated"><a class="ae jz" href="#e415" rel="noopener ugc nofollow">虚拟机实例创建</a></li><li id="ded1" class="lm ln ht jd b je lx ji ly jm lz jq ma ju mb jy lt lu lv lw dt translated"><a class="ae jz" href="#ed89" rel="noopener ugc nofollow">通过SHH </a>连接到虚拟机</li><li id="92ca" class="lm ln ht jd b je lx ji ly jm lz jq ma ju mb jy lt lu lv lw dt translated"><a class="ae jz" href="#eed5" rel="noopener ugc nofollow">安装依赖项</a></li><li id="15f2" class="lm ln ht jd b je lx ji ly jm lz jq ma ju mb jy lt lu lv lw dt translated"><a class="ae jz" href="#02fb" rel="noopener ugc nofollow"> Rasa安装</a></li><li id="0b34" class="lm ln ht jd b je lx ji ly jm lz jq ma ju mb jy lt lu lv lw dt translated"><a class="ae jz" href="#f909" rel="noopener ugc nofollow">克隆代码</a></li><li id="8cac" class="lm ln ht jd b je lx ji ly jm lz jq ma ju mb jy lt lu lv lw dt translated"><a class="ae jz" href="#9dfb" rel="noopener ugc nofollow">前端部署</a></li></ul><h1 id="22d9" class="ka kb ht bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated">A部分:Rasa聊天机器人的创建和集成到前端</h1><h2 id="b8ec" class="ky kb ht bd kc kz la lb kg lc ld le kk jm lf lg ko jq lh li ks ju lj lk kw ll dt translated">先决条件</h2><ul class=""><li id="a8dd" class="lm ln ht jd b je lo ji lp jm lq jq lr ju ls jy lt lu lv lw dt translated">Python 3.7或3.8(文章基于<a class="ae jz" href="https://www.python.org/downloads/release/python-384/" rel="noopener ugc nofollow" target="_blank">Python 3 . 8 . 4</a>/Python 3 . 8 . 10)</li><li id="1955" class="lm ln ht jd b je lx ji ly jm lz jq ma ju mb jy lt lu lv lw dt translated">pip的最新版本</li><li id="2ad7" class="lm ln ht jd b je lx ji ly jm lz jq ma ju mb jy lt lu lv lw dt translated"><a class="ae jz" href="https://code.visualstudio.com/download" rel="noopener ugc nofollow" target="_blank"> Visual Studio代码</a></li></ul><p id="cc28" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">从<a class="ae jz" href="https://www.python.org/downloads/release/python-384/" rel="noopener ugc nofollow" target="_blank">官方网站</a>下载Python 3.8.4并安装在你的机器上。请注意，您在安装它时选择了“添加到路径并为所有用户安装”选项。</p><h2 id="deb7" class="ky kb ht bd kc kz la lb kg lc ld le kk jm lf lg ko jq lh li ks ju lj lk kw ll dt translated">Rasa安装</h2><p id="58ee" class="pw-post-body-paragraph jb jc ht jd b je lo jg jh ji lp jk jl jm mc jo jp jq md js jt ju me jw jx jy hm dt translated">本文的重点是在windows操作系统上创建rasa聊天机器人。Rasa有一个定义良好的文档，如果您使用其他操作系统，请参考以下链接。</p><div class="mf mg fm fo mh mi"><a href="https://rasa.com/docs/rasa/installation/" rel="noopener  ugc nofollow" target="_blank"><div class="mj ab ej"><div class="mk ab ml cl cj mm"><h2 class="bd hu fv z el mn eo ep mo er et hs dt translated">装置</h2><div class="mp l"><h3 class="bd b fv z el mn eo ep mo er et ek translated">想先探索一下吗？您甚至可以在安装之前使用Rasa Playground在线探索Rasa开源。在…</h3></div><div class="mq l"><p class="bd b gc z el mn eo ep mo er et ek translated">rasa.com</p></div></div><div class="mr l"><div class="ms l mt mu mv mr mw iz mi"/></div></div></a></div><ul class=""><li id="a6db" class="lm ln ht jd b je jf ji jj jm mx jq my ju mz jy lt lu lv lw dt translated">在首选目录中打开命令提示符，并创建一个虚拟环境来隔离python项目</li></ul><pre class="na nb nc nd fq ne nf ng nh aw ni dt"><span id="a96e" class="ky kb ht nf b fv nj nk l nl nm">python3 -m venv ./venv</span></pre><ul class=""><li id="6db1" class="lm ln ht jd b je jf ji jj jm mx jq my ju mz jy lt lu lv lw dt translated">激活虚拟环境</li></ul><pre class="na nb nc nd fq ne nf ng nh aw ni dt"><span id="de5b" class="ky kb ht nf b fv nj nk l nl nm">venv\Scripts\activate</span></pre><ul class=""><li id="bba6" class="lm ln ht jd b je jf ji jj jm mx jq my ju mz jy lt lu lv lw dt translated">在安装Rasa之前，使用以下命令升级pip软件包</li></ul><pre class="na nb nc nd fq ne nf ng nh aw ni dt"><span id="7767" class="ky kb ht nf b fv nj nk l nl nm">pip install --upgrade pip<br/>or<br/>python -m pip install --upgrade pip</span></pre><ul class=""><li id="2875" class="lm ln ht jd b je jf ji jj jm mx jq my ju mz jy lt lu lv lw dt translated">使用以下命令安装rasa</li></ul><pre class="na nb nc nd fq ne nf ng nh aw ni dt"><span id="745b" class="ky kb ht nf b fv nj nk l nl nm">pip install rasa</span></pre><div class="na nb nc nd fq ab cb"><figure class="nn iu no np nq nr ns paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><img src="../Images/37c555dcf2195cd2f0ab19d6ba6c75da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*ahUJhVDGJFvBHf3SapkDlg.png"/></div></figure><figure class="nn iu nt np nq nr ns paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><img src="../Images/9b30648a82c9fa3f0c95d45d53bdda9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1002/format:webp/1*5c2xFHoxhWH1uaoIAwAJtg.png"/></div></figure></div><h2 id="ce1c" class="ky kb ht bd kc kz la lb kg lc ld le kk jm lf lg ko jq lh li ks ju lj lk kw ll dt translated">创建第一个Rasa项目</h2><p id="5ae2" class="pw-post-body-paragraph jb jc ht jd b je lo jg jh ji lp jk jl jm mc jo jp jq md js jt ju me jw jx jy hm dt translated">通过创建一个rasa项目来创建你的第一个聊天机器人。您可以通过在终端中运行<code class="eh nu nv nw nf b">rasa init</code>命令来实现。选择您对rasa项目创建初始步骤中所提问题的偏好。在模型训练之后，你得到一个问题‘你想在命令行上和助手说话吗’。如果你说是，那么你可以在命令行中与你的第一个聊天机器人互动。</p><pre class="na nb nc nd fq ne nf ng nh aw ni dt"><span id="2a45" class="ky kb ht nf b fv nj nk l nl nm">rasa init</span></pre><div class="na nb nc nd fq ab cb"><figure class="nn iu nx np nq nr ns paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><img src="../Images/99002a767b4a9461173bab953825513e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1022/format:webp/1*iMzgBHEdBCH9FtQzNl5vGA.png"/></div></figure><figure class="nn iu ny np nq nr ns paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><img src="../Images/efb31debe42bdc5849f3383ea364e4cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:980/format:webp/1*qvTKtKTNwDIxDwtalImEPA.png"/></div></figure></div><h2 id="65df" class="ky kb ht bd kc kz la lb kg lc ld le kk jm lf lg ko jq lh li ks ju lj lk kw ll dt translated">了解项目结构</h2><p id="2237" class="pw-post-body-paragraph jb jc ht jd b je lo jg jh ji lp jk jl jm mc jo jp jq md js jt ju me jw jx jy hm dt translated"><code class="eh nu nv nw nf b">rasa init</code>命令创建Rasa需要的必要项目文件，并根据样本数据训练一个简单的机器人。</p><figure class="na nb nc nd fq iu fe ff paragraph-image"><div class="fe ff nz"><img src="../Images/d961d1875ac5cc10a256c55a2a8981ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:664/format:webp/1*itK1TvcWXxwkRB1s0GGN6w.png"/></div></figure><ul class=""><li id="a077" class="lm ln ht jd b je jf ji jj jm mx jq my ju mz jy lt lu lv lw dt translated"><strong class="jd hu"> __init__。py </strong> —帮助查找动作的空文件</li><li id="c104" class="lm ln ht jd b je lx ji ly jm lz jq ma ju mb jy lt lu lv lw dt translated"><strong class="jd hu"> actions.py </strong> —用于编写您的自定义操作。您可以定义自定义动作，通过REST API调用外部服务器。此外，我们可以创建多个脚本来实现自定义操作。</li><li id="1665" class="lm ln ht jd b je lx ji ly jm lz jq ma ju mb jy lt lu lv lw dt translated"><strong class="jd hu"> config.yml </strong> —包含您的NLU和核心模型的配置。它主要用于定义聊天机器人的语言、管道和策略。</li><li id="a5af" class="lm ln ht jd b je lx ji ly jm lz jq ma ju mb jy lt lu lv lw dt translated"><strong class="jd hu"> credentials.yml </strong> —包含连接到其他服务的信息。你可以使用这个文件连接各种社交媒体平台，如Whatsapp，Facebook Messenger等，也可以将机器人与网站集成。</li><li id="48ed" class="lm ln ht jd b je lx ji ly jm lz jq ma ju mb jy lt lu lv lw dt translated"><strong class="jd hu"> data/nlu.yml </strong> —包含您的nlu培训数据并定义用户响应。您可以在此定义您的聊天机器人意图。例如:问候、订购物品、显示地图等。为此，你必须在nlu文件上添加相关的句子。</li><li id="8e7b" class="lm ln ht jd b je lx ji ly jm lz jq ma ju mb jy lt lu lv lw dt translated"><strong class="jd hu"> data/stories.md </strong> —包含您的故事，Rasa Core需要这些故事来设置您和聊天机器人之间的对话流程。让你的聊天机器人在各种路径上尽善尽美是必不可少的一部分。</li><li id="5788" class="lm ln ht jd b je lx ji ly jm lz jq ma ju mb jy lt lu lv lw dt translated"><strong class="jd hu"> domain.yml </strong> —包含聊天机器人可以检测到的不同意图以及机器人回复列表。</li><li id="b709" class="lm ln ht jd b je lx ji ly jm lz jq ma ju mb jy lt lu lv lw dt translated"><strong class="jd hu"> endpoints.yml </strong> —包含您的bot可以像FB messenger一样使用的不同端点。这对生产是有用的。</li><li id="bbeb" class="lm ln ht jd b je lx ji ly jm lz jq ma ju mb jy lt lu lv lw dt translated"><strong class="jd hu">models/&lt;timestamp&gt;&lt;random-name&gt;. tar . gz</strong>—你的初始模型</li></ul><h2 id="6e5e" class="ky kb ht bd kc kz la lb kg lc ld le kk jm lf lg ko jq lh li ks ju lj lk kw ll dt translated">自定义您的聊天机器人</h2><p id="46e3" class="pw-post-body-paragraph jb jc ht jd b je lo jg jh ji lp jk jl jm mc jo jp jq md js jt ju me jw jx jy hm dt translated">执行rasa init命令后，您将获得一个完美运行的基本聊天机器人。文件结构和基本意图格式可以从rasa团队提供的文档中找到。因此，通过参考这些文档，您可以轻松定制您的聊天机器人。</p><blockquote class="oa ob oc"><p id="67a4" class="jb jc od jd b je jf jg jh ji jj jk jl oe jn jo jp of jr js jt og jv jw jx jy hm dt translated">将正确版本的Rasa用于机器人的正确操作和定制是非常重要的，没有它机器人就不能被训练。例如，对于rasa版本2.7.1，版本为2.0。同样，对于rasa版本3.2.5，版本是3.1。这个版本应该在nlu.yml，stories.yml，rules.yml和domain.yml中指定。</p></blockquote><ul class=""><li id="b53c" class="lm ln ht jd b je jf ji jj jm mx jq my ju mz jy lt lu lv lw dt translated">让我们从添加一个新的意图到<code class="eh nu nv nw nf b">nlu.yml</code>文件开始。将以下代码添加到文件中，用于查询bot名称。我们使用yml格式。因此，请确保制表符间距是正确的。否则，它会在训练模型时抛出一些错误。</li></ul><pre class="na nb nc nd fq ne nf ng nh aw ni dt"><span id="24f6" class="ky kb ht nf b fv nj nk l nl nm">- intent: bot_name<br/>  examples: |<br/>    - what is your name?<br/>    - what are you called?<br/>    - how can i address you?</span></pre><figure class="na nb nc nd fq iu fe ff paragraph-image"><div class="fe ff oh"><img src="../Images/310095eec16ee844bd6f9a4760ca60a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:654/format:webp/1*RVir6JRd_RlcjMXcSYw_pQ.png"/></div></figure><ul class=""><li id="dfb8" class="lm ln ht jd b je jf ji jj jm mx jq my ju mz jy lt lu lv lw dt translated">在<code class="eh nu nv nw nf b">domain.yml</code>文件中添加bot响应。这里我们将添加一个名为<code class="eh nu nv nw nf b">utter_bot_name</code>的新发音和一个名为<strong class="jd hu"> Enthiran 3.0 </strong>的文本响应。</li></ul><pre class="na nb nc nd fq ne nf ng nh aw ni dt"><span id="4b92" class="ky kb ht nf b fv nj nk l nl nm">utter_bot_name:<br/>  - text: "Enthiran 3.0"</span></pre><figure class="na nb nc nd fq iu fe ff paragraph-image"><div class="fe ff oi"><img src="../Images/bdfb564de3f57f0d4d27f75e4075dc73.png" data-original-src="https://miro.medium.com/v2/resize:fit:856/format:webp/1*tX1DVWTtYb5VOCHuv9W2gw.png"/></div></figure><ul class=""><li id="2908" class="lm ln ht jd b je jf ji jj jm mx jq my ju mz jy lt lu lv lw dt translated">在<code class="eh nu nv nw nf b">rules.yml</code>文件中定义一组新的规则，用于将意图与机器人响应进行映射。这里，我们将把意图<code class="eh nu nv nw nf b">bot_name</code>和机器人动作<code class="eh nu nv nw nf b">utter_bot_name</code>对应起来。为此，将以下代码添加到<code class="eh nu nv nw nf b">rules.yml</code>文件中，</li></ul><pre class="na nb nc nd fq ne nf ng nh aw ni dt"><span id="8d2e" class="ky kb ht nf b fv nj nk l nl nm">- rule: Say 'I am a bot' anytime the user challenges<br/>  steps:<br/>  - intent: bot_name<br/>  - action: utter_bot_name</span></pre><figure class="na nb nc nd fq iu fe ff paragraph-image"><div class="fe ff oj"><img src="../Images/01a788bbad9dfa72f20b1435304b6d26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1042/format:webp/1*B-_S9s_Ekee_L-wqWpoFoQ.png"/></div></figure><ul class=""><li id="bbf2" class="lm ln ht jd b je jf ji jj jm mx jq my ju mz jy lt lu lv lw dt translated">在<code class="eh nu nv nw nf b">stories.yml</code>文件中添加一个新路径，为您的定制聊天机器人查询和机器人响应创建一个流。</li></ul><pre class="na nb nc nd fq ne nf ng nh aw ni dt"><span id="e042" class="ky kb ht nf b fv nj nk l nl nm">- story: path 4<br/>  steps:<br/>  - intent: bot_name<br/>  - action: utter_bot_name</span></pre><figure class="na nb nc nd fq iu fe ff paragraph-image"><div class="fe ff ok"><img src="../Images/b7b3cc3d697f6c2e4e443a7c371a138a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1106/format:webp/1*95rEq72RnrKk2id8AWB7zg.png"/></div></figure><p id="bad4" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">我们已经将所有信息添加到指定的文件中，以创建一个自定义意图来询问机器人名称并获得类似于"<strong class="jd hu"> Enthiran 3.0" </strong>的响应。我们需要再次训练模型，以将新添加的意图映射到模型。执行以下任一命令，再次训练模型。</p><pre class="na nb nc nd fq ne nf ng nh aw ni dt"><span id="2a93" class="ky kb ht nf b fv nj nk l nl nm">rasa train --config config.yml --domain domain.yml --data data/</span></pre><p id="e0db" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">现在，我们可以在终端上试用我们修改过的聊天机器人，通过执行下面的命令来验证更改。</p><pre class="na nb nc nd fq ne nf ng nh aw ni dt"><span id="8192" class="ky kb ht nf b fv nj nk l nl nm">rasa shell</span></pre><figure class="na nb nc nd fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff ol"><img src="../Images/5934c2457ed0f5d42ac6868d0bec97b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OiQgrJkbYincvI_bop_M6A.png"/></div></div></figure><p id="47e5" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">万岁！我们已经创建了第一个定制的聊天机器人。</p><h2 id="2dcf" class="ky kb ht bd kc kz la lb kg lc ld le kk jm lf lg ko jq lh li ks ju lj lk kw ll dt translated">拉沙·天眼</h2><p id="8586" class="pw-post-body-paragraph jb jc ht jd b je lo jg jh ji lp jk jl jm mc jo jp jq md js jt ju me jw jx jy hm dt translated">我们可以使用<code class="eh nu nv nw nf b">rasa visualize</code>命令将故事可视化。为你的故事生成一个可视化的表现是非常有帮助的。执行<code class="eh nu nv nw nf b">rasa visualize</code>命令后，您可以在根文件夹下的<code class="eh nu nv nw nf b">graph.html</code>文件中找到结果。</p><pre class="na nb nc nd fq ne nf ng nh aw ni dt"><span id="727d" class="ky kb ht nf b fv nj nk l nl nm">rasa visualize</span></pre><figure class="na nb nc nd fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff om"><img src="../Images/8686e8c1dc3914c469f250b9d01477fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j499zJ3e5H7idKRbri3hgQ.png"/></div></div></figure><h2 id="42a4" class="ky kb ht bd kc kz la lb kg lc ld le kk jm lf lg ko jq lh li ks ju lj lk kw ll dt translated">Rasa试验</h2><p id="0ea2" class="pw-post-body-paragraph jb jc ht jd b je lo jg jh ji lp jk jl jm mc jo jp jq md js jt ju me jw jx jy hm dt translated">Rasa启用了一个测试选项来测试经过训练的Rasa模型。您可以使用以下命令测试模型，</p><pre class="na nb nc nd fq ne nf ng nh aw ni dt"><span id="5de7" class="ky kb ht nf b fv nj nk l nl nm">rasa test</span></pre><figure class="na nb nc nd fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff on"><img src="../Images/1787a8e9c66bc0c339e6b9aea15a2e68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VV84S-6S9eNtSTh4bjm3VQ.png"/></div></div></figure><p id="5241" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">关于rasa命令的更多信息:<a class="ae jz" href="https://rasa.com/docs/rasa/command-line-interface/" rel="noopener ugc nofollow" target="_blank"> Rasa备忘单</a></p><h2 id="8519" class="ky kb ht bd kc kz la lb kg lc ld le kk jm lf lg ko jq lh li ks ju lj lk kw ll dt translated">前端集成</h2><p id="70eb" class="pw-post-body-paragraph jb jc ht jd b je lo jg jh ji lp jk jl jm mc jo jp jq md js jt ju me jw jx jy hm dt translated">在终端上运行聊天机器人看起来并不吸引人，而且交互性较差。我们可以在一个前端站点上集成我们的聊天机器人，以使交互更好。Rasa团队提供了与网站整合的基本步骤。参考下面的链接，了解更多关于如何在网站上集成聊天机器人。</p><div class="mf mg fm fo mh mi"><a href="https://rasa.com/docs/rasa/connectors/your-own-website/" rel="noopener  ugc nofollow" target="_blank"><div class="mj ab ej"><div class="mk ab ml cl cj mm"><h2 class="bd hu fv z el mn eo ep mo er et hs dt translated">你自己的网站</h2><div class="mp l"><h3 class="bd b fv z el mn eo ep mo er et ek translated">如果您已经有一个现有的网站，并希望添加一个Rasa助理，您可以使用Rasa聊天小工具a…</h3></div><div class="mq l"><p class="bd b gc z el mn eo ep mo er et ek translated">rasa.com</p></div></div><div class="mr l"><div class="oo l mt mu mv mr mw iz mi"/></div></div></a></div><ul class=""><li id="db98" class="lm ln ht jd b je jf ji jj jm mx jq my ju mz jy lt lu lv lw dt translated">您必须启用<code class="eh nu nv nw nf b">credentials.yml</code>文件中的<code class="eh nu nv nw nf b">socket.io</code>凭证来创建rasa后端和前端插件之间的通道。为此，只需取消对<code class="eh nu nv nw nf b">socket.io</code>凭证的注释，并进行如下所述的更改，</li></ul><pre class="na nb nc nd fq ne nf ng nh aw ni dt"><span id="ad07" class="ky kb ht nf b fv nj nk l nl nm">socketio:<br/> user_message_evt: user_uttered<br/> bot_message_evt: bot_uttered<br/> session_persistence: true</span></pre><figure class="na nb nc nd fq iu fe ff paragraph-image"><div class="fe ff op"><img src="../Images/516d814794fb2b46514a8a575ab92603.png" data-original-src="https://miro.medium.com/v2/resize:fit:1098/format:webp/1*xxabNxkmj5K8Ya0KvArc1Q.png"/></div></figure><ul class=""><li id="47a3" class="lm ln ht jd b je jf ji jj jm mx jq my ju mz jy lt lu lv lw dt translated">在根文件夹中创建一个名为<code class="eh nu nv nw nf b">index.html</code>的html文件，并向其中添加以下内容。</li></ul><pre class="na nb nc nd fq ne nf ng nh aw ni dt"><span id="6963" class="ky kb ht nf b fv nj nk l nl nm">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;<br/>    &lt;body&gt;<br/>        &lt;div <br/>            id="rasa-chat-widget" <br/>            data-websocket-url="<a class="ae jz" href="http://localhost:5005/" rel="noopener ugc nofollow" target="_blank">http://localhost:5005/</a>"  <br/>            data-height=475&gt;<br/>        &lt;/div&gt;<br/>        &lt;script src="<a class="ae jz" href="https://unpkg.com/@rasahq/rasa-chat" rel="noopener ugc nofollow" target="_blank">https://unpkg.com/@rasahq/rasa-chat</a>" type="application/javascript"&gt;&lt;/script&gt;<br/>    &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><ul class=""><li id="df3d" class="lm ln ht jd b je jf ji jj jm mx jq my ju mz jy lt lu lv lw dt translated">使用以下命令运行rasa后端</li></ul><pre class="na nb nc nd fq ne nf ng nh aw ni dt"><span id="e818" class="ky kb ht nf b fv nj nk l nl nm">rasa run -m models --enable-api --cors "*"<br/>rasa run -m models --enable-api --cors "*" --debug</span></pre><figure class="na nb nc nd fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff oq"><img src="../Images/7596d4151bd69f73e9f428f92d265b76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Hmt_yELQ-pKYXHP6IUP1NQ.png"/></div></div></figure><ul class=""><li id="a898" class="lm ln ht jd b je jf ji jj jm mx jq my ju mz jy lt lu lv lw dt translated">在终端显示“Rasa服务器启动并运行”消息后，在浏览器上加载<code class="eh nu nv nw nf b">index.html</code>文件。</li></ul><figure class="na nb nc nd fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff om"><img src="../Images/afa12528aa931f4b67e87cfc7a81d491.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*sD3EpwE7Z70c1d05M6iIuw.gif"/></div></div></figure><p id="bf0c" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">我们已经在前端(网站)整合了我们的聊天机器人。</p><h2 id="fa1e" class="ky kb ht bd kc kz la lb kg lc ld le kk jm lf lg ko jq lh li ks ju lj lk kw ll dt translated">版本控制</h2><p id="151e" class="pw-post-body-paragraph jb jc ht jd b je lo jg jh ji lp jk jl jm mc jo jp jq md js jt ju me jw jx jy hm dt translated">建议对您的代码应用任何版本控制来跟踪代码上的更改。它使我们能够回滚我们的代码，跟踪变化，管理版本等等。Github是最好的版本控制工具之一。</p><p id="2ddf" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">在GitHub上创建一个存储库，并按照步骤将代码推送到远程存储库。</p><div class="na nb nc nd fq ab cb"><figure class="nn iu or np nq nr ns paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><img src="../Images/d8dd66f4c1e42a65f41face706c0d137.png" data-original-src="https://miro.medium.com/v2/resize:fit:976/format:webp/1*-NEmGAtleucWhpqeYQdMvA.png"/></div></figure><figure class="nn iu os np nq nr ns paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><img src="../Images/b6631744fb4b31bf826662ea0bba69ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1026/format:webp/1*8T675QhI8RAHATft5isyvA.png"/></div></figure></div><p id="32c2" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">在项目文件夹中打开一个终端，并执行以下命令，将您的代码推送到远程存储库。</p><pre class="na nb nc nd fq ne nf ng nh aw ni dt"><span id="d141" class="ky kb ht nf b fv nj nk l nl nm">git init<br/>git add .<br/>git commit -m "initial commit"<br/>git remote add origin &lt;origin url&gt;<br/>git push origin master</span></pre><p id="5537" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">你可以查看GitHub页面获取原始网址。</p><figure class="na nb nc nd fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff ot"><img src="../Images/bca923a8ef07c6747d425965baf8a29b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I6x_e5zpwp3-Tg3p8vkhkg.png"/></div></div></figure></div><div class="ab cl ou ov hb ow" role="separator"><span class="ox bw bk oy oz pa"/><span class="ox bw bk oy oz pa"/><span class="ox bw bk oy oz"/></div><div class="hm hn ho hp hq"><h1 id="070a" class="ka kb ht bd kc kd pb kf kg kh pc kj kk kl pd kn ko kp pe kr ks kt pf kv kw kx dt translated">第二部分:在AWS EC2上部署聊天机器人</h1><p id="5d7b" class="pw-post-body-paragraph jb jc ht jd b je lo jg jh ji lp jk jl jm mc jo jp jq md js jt ju me jw jx jy hm dt translated">到目前为止，我们已经学会了使用rasa创建自定义聊天机器人。现在，我们可以尝试在AWS EC2实例上部署我们创建的基本聊天机器人。</p><h2 id="e415" class="ky kb ht bd kc kz la lb kg lc ld le kk jm lf lg ko jq lh li ks ju lj lk kw ll dt translated">虚拟机实例创建</h2><p id="4c81" class="pw-post-body-paragraph jb jc ht jd b je lo jg jh ji lp jk jl jm mc jo jp jq md js jt ju me jw jx jy hm dt translated">如果您还没有AWS帐户，请创建一个。</p><ul class=""><li id="c627" class="lm ln ht jd b je jf ji jj jm mx jq my ju mz jy lt lu lv lw dt translated">首先，登录AWS帐户，从搜索窗口中选择EC2实例仪表板。</li></ul><figure class="na nb nc nd fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff om"><img src="../Images/21d75c2387a366418d03c686b5adf41a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*quQ7CPXMXaV9wzQl9gQnQA.png"/></div></div></figure><ul class=""><li id="f8ff" class="lm ln ht jd b je jf ji jj jm mx jq my ju mz jy lt lu lv lw dt translated">点击<strong class="jd hu">启动实例</strong>按钮，进入实例创建窗口。在“名称和标签”字段中提供一个实例名称。</li></ul><figure class="na nb nc nd fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff pg"><img src="../Images/f3e692403618a791c807c66b4eb3622e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iGRbuHXDfhbhRl-0Q_-6ow.png"/></div></div></figure><ul class=""><li id="cba4" class="lm ln ht jd b je jf ji jj jm mx jq my ju mz jy lt lu lv lw dt translated">选择<strong class="jd hu"> Ubuntu Server 20.04 LTS (HVM)，SSD卷类型</strong>为AMI。</li></ul><figure class="na nb nc nd fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff ph"><img src="../Images/adebce8af5853f41e7a0b8e18fb988ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SGIOy8jUxh5DRB6baOQ3Ww.png"/></div></div></figure><ul class=""><li id="fc13" class="lm ln ht jd b je jf ji jj jm mx jq my ju mz jy lt lu lv lw dt translated">选择<strong class="jd hu"> t2.micro </strong>作为实例类型。</li></ul><figure class="na nb nc nd fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff ph"><img src="../Images/2aeef36f37d555efed5bb12ef70189ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xVAjjFMZwWTamSV7A52f-g.png"/></div></div></figure><ul class=""><li id="5f5d" class="lm ln ht jd b je jf ji jj jm mx jq my ju mz jy lt lu lv lw dt translated">创建一个密钥对来通过SSH访问虚拟机。确保将密钥文件保存在安全的文件夹中，不要丢失，因为这是验证虚拟机访问的唯一方法。点击<strong class="jd hu">创建新的密钥对</strong>，在弹出窗口中提供密钥对名称、密钥对类型和密钥文件格式(保存为pem)。</li></ul><figure class="na nb nc nd fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff pi"><img src="../Images/c26e38273e99f25349428ce3247b7e9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HHnLJbvLWPt75K4k7UUZxA.png"/></div></div></figure><figure class="na nb nc nd fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff pj"><img src="../Images/a19c6922d206e62daa929d51c7c5d6f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:956/format:webp/1*pIwRZ3_uXmPeCum7Sz1XGA.png"/></div></div></figure><ul class=""><li id="9abc" class="lm ln ht jd b je jf ji jj jm mx jq my ju mz jy lt lu lv lw dt translated">在网络设置中勾选<strong class="jd hu">允许来自任何地方的SHH流量</strong>和<strong class="jd hu">允许来自互联网的HTTP流量</strong>。选中http流量复选框，否则它将不允许访问您虚拟机上的HTTP端口(80)。</li></ul><figure class="na nb nc nd fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff pi"><img src="../Images/9d3ee8c7ad16b5f3bdcbaa98b818f000.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kKnbyL2SU13u-_F-iRhIug.png"/></div></div></figure><ul class=""><li id="5226" class="lm ln ht jd b je jf ji jj jm mx jq my ju mz jy lt lu lv lw dt translated">将存储大小设置为16(默认值为8)，因为我们需要8 GB以上的空间来安装rasa依赖项。之后，点击<strong class="jd hu">启动实例</strong>按钮启动虚拟机。</li></ul><figure class="na nb nc nd fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff pg"><img src="../Images/76f4d318a43d6298b251136c1d5e0d8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FIzT4bK7UUeTClx6lYNHig.png"/></div></div></figure><ul class=""><li id="d7ef" class="lm ln ht jd b je jf ji jj jm mx jq my ju mz jy lt lu lv lw dt translated">单击实例id以获取有关虚拟机的基本信息。</li></ul><figure class="na nb nc nd fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff pk"><img src="../Images/6cf658946d613215b416ef0a52d91d68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zcZx-ukMhHqcu0XZG0_NdQ.png"/></div></div></figure><h2 id="ed89" class="ky kb ht bd kc kz la lb kg lc ld le kk jm lf lg ko jq lh li ks ju lj lk kw ll dt translated">通过SHH连接到虚拟机</h2><ul class=""><li id="0762" class="lm ln ht jd b je lo ji lp jm lq jq lr ju ls jy lt lu lv lw dt translated">点击<strong class="jd hu">连接</strong>按钮，获取连接相关信息。</li></ul><figure class="na nb nc nd fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff pl"><img src="../Images/9182e2a95090bb84f394c8dce580235d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oHnzKn5GxUmsoZVf5PxJOA.png"/></div></div></figure><ul class=""><li id="a8e4" class="lm ln ht jd b je jf ji jj jm mx jq my ju mz jy lt lu lv lw dt translated">选择SHH选项卡，复制下面提供的命令，通过终端上的SHH连接到虚拟机。</li></ul><figure class="na nb nc nd fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff pm"><img src="../Images/3e9273f0e1cbe0f237754cb98b01d95f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ntObhsHTFOWMMneru144_Q.png"/></div></div></figure><ul class=""><li id="1795" class="lm ln ht jd b je jf ji jj jm mx jq my ju mz jy lt lu lv lw dt translated">在通过SHH连接到虚拟机之前，我们必须限制对关键文件的访问。如果你使用的是ubuntu机器，那么执行<code class="eh nu nv nw nf b">chmod 400 key-file-name.pem</code>。如果您使用的是windows机器，请尝试以下步骤来限制pem文件访问。</li><li id="56fc" class="lm ln ht jd b je lx ji ly jm lz jq ma ju mb jy lt lu lv lw dt translated">选择pem文件并打开属性窗口。选择安全选项卡并点击<strong class="jd hu">高级</strong>按钮。点击<strong class="jd hu">禁用继承</strong>按钮并选择<strong class="jd hu">移除该对象的所有继承权限</strong>选项。</li></ul><figure class="na nb nc nd fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff pn"><img src="../Images/37f99fdac57257ba6690fa05aed31e9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y1Gb5t5eoLt2T_J4yxRUag.png"/></div></div></figure><ul class=""><li id="ebef" class="lm ln ht jd b je jf ji jj jm mx jq my ju mz jy lt lu lv lw dt translated">现在，所有用户都从列表中删除了。点击<strong class="jd hu">添加</strong>按钮，弹出添加用户信息的窗口。点击S <strong class="jd hu">选择负责人</strong>文本，添加当前用户。在给定的输入列表中输入用户名，并按下<strong class="jd hu">检查名称</strong>按钮。</li></ul><figure class="na nb nc nd fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff po"><img src="../Images/d5e333280d38b4dd64289fc8b5fce700.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SND54vSquqdevrr_vRWpyw.png"/></div></div></figure><ul class=""><li id="e73b" class="lm ln ht jd b je jf ji jj jm mx jq my ju mz jy lt lu lv lw dt translated">完成了。我们可以通过SHH使用pem文件连接虚拟机。在pem文件所在的文件夹中打开终端，并执行以下命令(在SSH选项卡中作为示例提供)。</li></ul><pre class="na nb nc nd fq ne nf ng nh aw ni dt"><span id="bb9b" class="ky kb ht nf b fv nj nk l nl nm">ssh -i "vbot.pem" ubuntu@ec2-54-193-138-236.us-west-1.compute.amazonaws.com</span></pre><figure class="na nb nc nd fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff pp"><img src="../Images/3769f1eabfbb91da4cb8ad99eda1b600.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yAN8hboe_AODe9w_Fs580A.png"/></div></div></figure><h2 id="eed5" class="ky kb ht bd kc kz la lb kg lc ld le kk jm lf lg ko jq lh li ks ju lj lk kw ll dt translated">安装依赖项</h2><p id="3ae1" class="pw-post-body-paragraph jb jc ht jd b je lo jg jh ji lp jk jl jm mc jo jp jq md js jt ju me jw jx jy hm dt translated"><strong class="jd hu">先决条件</strong></p><ul class=""><li id="983c" class="lm ln ht jd b je jf ji jj jm mx jq my ju mz jy lt lu lv lw dt translated">Python3.7或3.8(首选python 3.8.10)</li><li id="17a1" class="lm ln ht jd b je lx ji ly jm lz jq ma ju mb jy lt lu lv lw dt translated">pip3 22或更高版本</li><li id="9460" class="lm ln ht jd b je lx ji ly jm lz jq ma ju mb jy lt lu lv lw dt translated">venv</li><li id="7350" class="lm ln ht jd b je lx ji ly jm lz jq ma ju mb jy lt lu lv lw dt translated">张量流2.7.0</li><li id="4061" class="lm ln ht jd b je lx ji ly jm lz jq ma ju mb jy lt lu lv lw dt translated">nginx</li></ul><p id="7dea" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">在安装依赖项之前，使用以下命令更新您的虚拟机，</p><pre class="na nb nc nd fq ne nf ng nh aw ni dt"><span id="f60f" class="ky kb ht nf b fv nj nk l nl nm">sudo apt-get update</span></pre><figure class="na nb nc nd fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff pq"><img src="../Images/b4a6dec7189a1aa42f3e58f7fb0b39ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GpL967w54tNb0Z-Ys1gwEQ.png"/></div></div></figure><p id="c54c" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">将pip3安装到虚拟机</p><pre class="na nb nc nd fq ne nf ng nh aw ni dt"><span id="635f" class="ky kb ht nf b fv nj nk l nl nm">sudo apt-get install python3-pip</span></pre><figure class="na nb nc nd fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff pr"><img src="../Images/faa4b0ffe39887ff32e65894b6c7d955.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gkxeesuiyC7gksYkLzkeow.png"/></div></div></figure><p id="11d3" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">将python虚拟环境安装到虚拟机</p><pre class="na nb nc nd fq ne nf ng nh aw ni dt"><span id="a12c" class="ky kb ht nf b fv nj nk l nl nm">sudo apt-get install python3.8-venv</span></pre><figure class="na nb nc nd fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff ps"><img src="../Images/ea775df99b3697e18a235d4b8e095389.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RRV_ACcu2k46fUkf4ZdFOQ.png"/></div></div></figure><p id="da2d" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">使用以下命令安装nginx来托管您的前端，</p><pre class="na nb nc nd fq ne nf ng nh aw ni dt"><span id="261c" class="ky kb ht nf b fv nj nk l nl nm">sudo apt install nginx</span></pre><figure class="na nb nc nd fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff pt"><img src="../Images/14415125291cfbcbc9972181ea9f6053.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VQP8OqGGVjbQtYvVX6x34w.png"/></div></div></figure><h2 id="02fb" class="ky kb ht bd kc kz la lb kg lc ld le kk jm lf lg ko jq lh li ks ju lj lk kw ll dt translated">Rasa安装</h2><p id="cdb4" class="pw-post-body-paragraph jb jc ht jd b je lo jg jh ji lp jk jl jm mc jo jp jq md js jt ju me jw jx jy hm dt translated">EC2实例中的rasa安装与普通安装略有不同。AWS不允许我们直接在VM中安装tensorflow。因此，我们必须在虚拟机中安装rasa之前单独安装它。</p><ul class=""><li id="0aa2" class="lm ln ht jd b je jf ji jj jm mx jq my ju mz jy lt lu lv lw dt translated">通过在终端上执行以下命令，在所需的文件夹上创建一个虚拟环境。</li></ul><pre class="na nb nc nd fq ne nf ng nh aw ni dt"><span id="296f" class="ky kb ht nf b fv nj nk l nl nm">python3 -m venv ./venv</span></pre><ul class=""><li id="08f2" class="lm ln ht jd b je jf ji jj jm mx jq my ju mz jy lt lu lv lw dt translated">激活虚拟环境</li></ul><pre class="na nb nc nd fq ne nf ng nh aw ni dt"><span id="5b3f" class="ky kb ht nf b fv nj nk l nl nm">source ./venv/bin/activate</span></pre><ul class=""><li id="fe8a" class="lm ln ht jd b je jf ji jj jm mx jq my ju mz jy lt lu lv lw dt translated">升级pip包，因为rasa需要更新的pip</li></ul><pre class="na nb nc nd fq ne nf ng nh aw ni dt"><span id="6e59" class="ky kb ht nf b fv nj nk l nl nm">pip3 install -U pip</span></pre><ul class=""><li id="ecf0" class="lm ln ht jd b je jf ji jj jm mx jq my ju mz jy lt lu lv lw dt translated">在虚拟机中安装tensorflow</li></ul><pre class="na nb nc nd fq ne nf ng nh aw ni dt"><span id="0f5a" class="ky kb ht nf b fv nj nk l nl nm">pip3 install tensorflow==2.7.0 --no-cache-dir</span></pre><figure class="na nb nc nd fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff pu"><img src="../Images/8e66f76be0b98cd5e350b2113bab1cf5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KAez9caD6Y7JrpOizoz33w.png"/></div></div></figure><ul class=""><li id="cb5c" class="lm ln ht jd b je jf ji jj jm mx jq my ju mz jy lt lu lv lw dt translated">使用以下命令安装rasa并验证版本</li></ul><pre class="na nb nc nd fq ne nf ng nh aw ni dt"><span id="e0b4" class="ky kb ht nf b fv nj nk l nl nm">pip3 install rasa<br/>rasa --version</span></pre><figure class="na nb nc nd fq iu fe ff paragraph-image"><div class="fe ff pv"><img src="../Images/71dcc06da19af98aa1c4e2d02326ed27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1396/format:webp/1*iTQ_cVFdkZ-TzzvVw19d8Q.png"/></div></figure><h2 id="f909" class="ky kb ht bd kc kz la lb kg lc ld le kk jm lf lg ko jq lh li ks ju lj lk kw ll dt translated">克隆代码</h2><p id="53b4" class="pw-post-body-paragraph jb jc ht jd b je lo jg jh ji lp jk jl jm mc jo jp jq md js jt ju me jw jx jy hm dt translated">我们已经在虚拟机中安装了所需的依赖项和rasa框架。现在，我们可以克隆您已经推送到git的代码。</p><pre class="na nb nc nd fq ne nf ng nh aw ni dt"><span id="fb2e" class="ky kb ht nf b fv nj nk l nl nm">git clone &lt;repo-url&gt;</span></pre><figure class="na nb nc nd fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff pw"><img src="../Images/8040b02db20ce941ec5cebab11a8996e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IEm_TcTJlkUhLPSRMN35SA.png"/></div></div></figure><ul class=""><li id="a37b" class="lm ln ht jd b je jf ji jj jm mx jq my ju mz jy lt lu lv lw dt translated">导航到克隆的项目文件夹。有时候模型需要重新训练。从模型文件夹中删除以前的模型，然后重新训练最新的模型。</li></ul><figure class="na nb nc nd fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff px"><img src="../Images/e3ed9cd4a1bcc534cf6fef655dbec68a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hrE_5aAGN1lL8DWyMs8bmw.png"/></div></div></figure><ul class=""><li id="b164" class="lm ln ht jd b je jf ji jj jm mx jq my ju mz jy lt lu lv lw dt translated">使用以下命令在终端上测试chatbot</li></ul><pre class="na nb nc nd fq ne nf ng nh aw ni dt"><span id="edb6" class="ky kb ht nf b fv nj nk l nl nm">rasa shell</span></pre><figure class="na nb nc nd fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff py"><img src="../Images/8ecd4f25fdc98b81dd7cfa8530b97726.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T4_u96V6XyF9GH7rPeGJ0A.png"/></div></div></figure><h2 id="9dfb" class="ky kb ht bd kc kz la lb kg lc ld le kk jm lf lg ko jq lh li ks ju lj lk kw ll dt translated">前端部署</h2><p id="3204" class="pw-post-body-paragraph jb jc ht jd b je lo jg jh ji lp jk jl jm mc jo jp jq md js jt ju me jw jx jy hm dt translated">我们必须对防火墙和虚拟机网络入站规则进行一些更改，以便在虚拟机中部署我们的前端站点。</p><ul class=""><li id="33cc" class="lm ln ht jd b je jf ji jj jm mx jq my ju mz jy lt lu lv lw dt translated">单击实例仪表板中“安全”选项卡下列出的安全组id。</li></ul><div class="na nb nc nd fq ab cb"><figure class="nn iu pz np nq nr ns paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><img src="../Images/20e41cf97363c09482c4e74c07f05320.png" data-original-src="https://miro.medium.com/v2/resize:fit:736/format:webp/1*aISiPWSKYvWy_tDUoJg_rw.png"/></div></figure><figure class="nn iu qa np nq nr ns paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><img src="../Images/2e0ab29b23dc5f6bcb5705788639388e.png" data-original-src="https://miro.medium.com/v2/resize:fit:542/format:webp/1*6SQam4jH8FimqnwaQpoNPQ.png"/></div></figure><figure class="nn iu qb np nq nr ns paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><img src="../Images/1d5eb37cc2657b9917c8b54967141be3.png" data-original-src="https://miro.medium.com/v2/resize:fit:726/format:webp/1*TF_ToWX6rlz8fWxsEs5Yzw.png"/></div></figure></div><ul class=""><li id="0ecb" class="lm ln ht jd b je jf ji jj jm mx jq my ju mz jy lt lu lv lw dt translated">添加新的入站规则以允许<code class="eh nu nv nw nf b">socket.io</code>访问。点击<strong class="jd hu">添加规则</strong>按钮。将type设置为Custom HTTP，port设置为5005，source设置为Anywhere。</li></ul><figure class="na nb nc nd fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff pk"><img src="../Images/2d5cc118abf78f60b3a4a6631e078d75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TF_ToWX6rlz8fWxsEs5Yzw.png"/></div></div></figure><ul class=""><li id="efeb" class="lm ln ht jd b je jf ji jj jm mx jq my ju mz jy lt lu lv lw dt translated">启用对ufw防火墙服务的访问。执行以下命令，允许在虚拟机中进行nginx、SHH、tcp访问。</li></ul><pre class="na nb nc nd fq ne nf ng nh aw ni dt"><span id="0182" class="ky kb ht nf b fv nj nk l nl nm">sudo ufw allow ssh<br/>sudo ufw allow 'Nginx Full'<br/>sudo ufw enable<br/>sudo ufw status numbered</span></pre><figure class="na nb nc nd fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff qc"><img src="../Images/df326c46dd4faebd88d362ae06df5fee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gMv8GVliwtHHN5qPUMdctg.png"/></div></div></figure><ul class=""><li id="fe57" class="lm ln ht jd b je jf ji jj jm mx jq my ju mz jy lt lu lv lw dt translated">有必要启用5005端口访问，以便从前端站点通过socket.io与rasa后端进行通信。执行以下代码以允许ufw中的5005端口访问。</li></ul><pre class="na nb nc nd fq ne nf ng nh aw ni dt"><span id="4aed" class="ky kb ht nf b fv nj nk l nl nm">sudo ufw allow 5005/tcp</span></pre><ul class=""><li id="a76f" class="lm ln ht jd b je jf ji jj jm mx jq my ju mz jy lt lu lv lw dt translated">您可以将前端文件移动到默认的nginx文件夹，并备份目录中可用的默认索引文件。为此，请执行以下命令。</li></ul><pre class="na nb nc nd fq ne nf ng nh aw ni dt"><span id="704e" class="ky kb ht nf b fv nj nk l nl nm">cd /var/www/html/<br/>sudo mv index.nginx-debian.html index.html.bckp</span><span id="998d" class="ky kb ht nf b fv qd nk l nl nm">cd ~/vbot-the-rasa-chatbot/<br/>sudo cp index.html /var/www/html/index.html<br/>sudo cp bg.png /var/www/html/bg.png</span></pre><figure class="na nb nc nd fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff qe"><img src="../Images/c584a069f49d8a3c5a9323286e60bc4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oKJFr-2tN1O7ZHrKdSAj3Q.png"/></div></div></figure><ul class=""><li id="b719" class="lm ln ht jd b je jf ji jj jm mx jq my ju mz jy lt lu lv lw dt translated">重启nginx服务器以反映文件的变化</li></ul><pre class="na nb nc nd fq ne nf ng nh aw ni dt"><span id="e949" class="ky kb ht nf b fv nj nk l nl nm">sudo systemctl restart nginx<br/>sudo systemctl status nginx</span></pre><figure class="na nb nc nd fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff qe"><img src="../Images/2a00cfcd6612fd48ae77f38e510d2a06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Uthb2lSFSQQ6cVaqAkIHJA.png"/></div></div></figure><ul class=""><li id="6ae6" class="lm ln ht jd b je jf ji jj jm mx jq my ju mz jy lt lu lv lw dt translated">最后，使用<strong class="jd hu"> nohup </strong>包运行rasa后端。nohup使即使终端关闭也能运行该命令。</li></ul><pre class="na nb nc nd fq ne nf ng nh aw ni dt"><span id="713f" class="ky kb ht nf b fv nj nk l nl nm">nohup rasa run -m models --enable-api --cors "*" &amp;</span></pre><p id="2ce5" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">您可以通过打开公共IPv4地址在浏览器上查看该站点。您可以从仪表板获取公共IPv4地址。注意，如果您没有使用任何SSL证书，那么手动提供<code class="eh nu nv nw nf b">http://</code>作为URL的前缀(<a class="ae jz" href="http://54.183.218.201/" rel="noopener ugc nofollow" target="_blank">http://54.183.218.201/</a>)。</p><figure class="na nb nc nd fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff qf"><img src="../Images/702b3934b249f74b582c8e431531934a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r7v4XuuPwN-u9TOAZ-6B3A.png"/></div></div></figure><h2 id="0a63" class="ky kb ht bd kc kz la lb kg lc ld le kk jm lf lg ko jq lh li ks ju lj lk kw ll dt translated">输出</h2><figure class="na nb nc nd fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff om"><img src="../Images/64a22e6f404d92c11453a635ea01c7a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*_5bqdYQWs9eyYMdlxIM0YA.gif"/></div></div></figure><p id="8830" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">感谢阅读这篇文章。</p><p id="50b7" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">感谢<a class="ae jz" href="https://www.linkedin.com/in/gowri-m-bhatt-85b31814b/" rel="noopener ugc nofollow" target="_blank"> Gowri M Bhatt </a>审阅内容。</p><p id="b110" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">如果你喜欢这篇文章，请点击拍手按钮👏并且分享出来帮别人找！</p><p id="198e" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">这篇文章也可以在Dev上找到。</p><p id="3378" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">本教程的完整源代码可以在这里找到，</p><div class="mf mg fm fo mh mi"><a href="https://github.com/codemaker2015/vbot-the-rasa-chatbot" rel="noopener  ugc nofollow" target="_blank"><div class="mj ab ej"><div class="mk ab ml cl cj mm"><h2 class="bd hu fv z el mn eo ep mo er et hs dt translated">GitHub-codemaker 2015/vbot-the-rasa-chatbot:使用Rasa框架创建的自定义聊天机器人</h2><div class="mp l"><h3 class="bd b fv z el mn eo ep mo er et ek translated">使用Rasa框架创建的自定义聊天机器人。通过创建……为codemaker 2015/vbot-the-rasa-chatbot开发做出贡献</h3></div><div class="mq l"><p class="bd b gc z el mn eo ep mo er et ek translated">github.com</p></div></div><div class="mr l"><div class="qg l mt mu mv mr mw iz mi"/></div></div></a></div><blockquote class="qh"><p id="9537" class="qi qj ht bd qk ql qm qn qo qp qq jy ek translated">加入Coinmonks <a class="ae jz" href="https://t.me/coincodecap" rel="noopener ugc nofollow" target="_blank">电报频道</a>和<a class="ae jz" href="https://www.youtube.com/c/coinmonks/videos" rel="noopener ugc nofollow" target="_blank"> Youtube频道</a>了解加密交易和投资</p></blockquote><h1 id="a8f7" class="ka kb ht bd kc kd ke kf kg kh ki kj kk kl qr kn ko kp qs kr ks kt qt kv kw kx dt translated">另外，阅读</h1><ul class=""><li id="04f2" class="lm ln ht jd b je lo ji lp jm lq jq lr ju ls jy lt lu lv lw dt translated"><a class="ae jz" href="https://coincodecap.com/capital-com-review" rel="noopener ugc nofollow" target="_blank">Capital.com评论</a> | <a class="ae jz" href="https://coincodecap.com/crypto-lending-hong-kong" rel="noopener ugc nofollow" target="_blank">香港的加密借贷平台</a></li><li id="e4d5" class="lm ln ht jd b je lx ji ly jm lz jq ma ju mb jy lt lu lv lw dt translated">如何在Uniswap上交换加密？ | <a class="ae jz" href="https://coincodecap.com/a-ads-review" rel="noopener ugc nofollow" target="_blank"> A-Ads审查</a></li><li id="deab" class="lm ln ht jd b je lx ji ly jm lz jq ma ju mb jy lt lu lv lw dt translated"><a class="ae jz" rel="noopener" href="/coinmonks/wazirx-vs-coindcx-vs-bitbns-149f4f19a2f1">WazirX vs coin dcx vs bit bns</a>|<a class="ae jz" rel="noopener" href="/coinmonks/blockfi-vs-coinloan-vs-nexo-cb624635230d">block fi vs coin loan vs Nexo</a></li><li id="221f" class="lm ln ht jd b je lx ji ly jm lz jq ma ju mb jy lt lu lv lw dt translated"><a class="ae jz" rel="noopener" href="/coinmonks/localbitcoins-review-6cc001c6ed56">本地比特币评论</a> | <a class="ae jz" href="https://coincodecap.com/cryptocurrency-savings-accounts" rel="noopener ugc nofollow" target="_blank">加密货币储蓄账户</a></li><li id="d249" class="lm ln ht jd b je lx ji ly jm lz jq ma ju mb jy lt lu lv lw dt translated"><a class="ae jz" href="https://coincodecap.com/margin-trading" rel="noopener ugc nofollow" target="_blank">什么是融资融券交易</a> | <a class="ae jz" href="https://coincodecap.com/dca" rel="noopener ugc nofollow" target="_blank">成本平均法</a></li></ul></div></div>    
</body>
</html>