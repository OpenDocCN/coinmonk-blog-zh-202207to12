<html>
<head>
<title>Rentable NFTs (ERC-4907) : Part I</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">可出租的非森林公园(ERC-4907):第一部分</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/rentable-nfts-erc-4907-949225d476a9?source=collection_archive---------1-----------------------#2022-07-05">https://medium.com/coinmonks/rentable-nfts-erc-4907-949225d476a9?source=collection_archive---------1-----------------------#2022-07-05</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><blockquote class="iq ir is"><p id="f6aa" class="it iu iv iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hm dt translated">游戏化非功能游戏世界中急需的标准。</p></blockquote><figure class="jt ju jv jw fq jx fe ff paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="fe ff js"><img src="../Images/4135f0d27b97486588321d5fad8eb8ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Z-2WyVuzlyJUi4b0"/></div></div><figcaption class="ke kf fg fe ff kg kh bd b be z ek">Photo by <a class="ae ki" href="https://unsplash.com/@rwlinder?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Robert Linder</a> on <a class="ae ki" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="d282" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je kj jg jh ji kk jk jl jm kl jo jp jq jr hm dt translated">在现有的NFT世界中，我们可以感觉到注入市场的数字资产收藏量突然增加。当然，NFT已经不仅仅是个人资料图片(PFP)了。</p><p id="26a6" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je kj jg jh ji kk jk jl jm kl jo jp jq jr hm dt translated">随着NFT收藏品的供应量增加，用户现在清除了对一些支持资产的公用事业的强烈需求。值得庆幸的是，Play2Earn (P2E)和Gaming元宇宙NFTs的概念已经成为直接而简单的解决方案，以公用事业为这些资产提供支持。</p><p id="34dd" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je kj jg jh ji kk jk jl jm kl jo jp jq jr hm dt translated">随着游戏越来越受欢迎，购买基于游戏的NFT资产，可能真的会更贵，主流用户更难获得。虽然有NFT租赁平台可用，但市场上现有的解决方案在安全性方面仍然缺乏鲁棒性，并且需要高成本的开发和集成。</p><h1 id="e71e" class="km kn ht bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj dt translated">什么是NFT出租</h1><p id="9a03" class="pw-post-body-paragraph it iu ht iw b ix lk iz ja jb ll jd je kj lm jh ji kk ln jl jm kl lo jp jq jr hm dt translated">NFT租赁的工作方式相同，如何在现实世界中的任何其他租赁工作。假设你想拥有一辆豪华车，暂时用几天。最好的节省成本的方法不是买一辆新车，而是在规定的天数内租一辆车，并在你的期限结束后归还给车主。同样，这个想法是暂时租用NFT几天，一旦租期结束，就归还给合法的主人。</p><p id="6d26" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je kj jg jh ji kk jk jl jm kl jo jp jq jr hm dt translated">同样从NFT所有者的角度来看，假设如果我拥有一辆NFT，而不是简单地长期持有，NFT可以被出租，并被用作从NFT赚取被动收入的来源。虚拟土地可以“租”和“用”来构建场景，代表游戏资产的NFT可以“租”来“用”在游戏内。</p><h1 id="9837" class="km kn ht bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj dt translated">传统的NFT租赁系统</h1><p id="c470" class="pw-post-body-paragraph it iu ht iw b ix lk iz ja jb ll jd je kj lm jh ji kk ln jl jm kl lo jp jq jr hm dt translated">由于NFT租赁没有设置标准，NFT租赁的传统设置中最常遵循的方法之一是使用<em class="iv">保证临时所有权变更</em>。所有者将所有权转让给想要租赁NFT的用户，并附带一些担保/保证，即被租赁的用户将在租赁期结束后归还NFT的所有权。这种传统方法最常见的实现之一涉及<em class="iv">托管所有权。</em></p><p id="46bb" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je kj jg jh ji kk jk jl jm kl jo jp jq jr hm dt translated">当您出租NFT时，原所有者对出租的NFT没有控制权，完全基于对出租用户/托管所有者的信任。是的，听起来很冒险。</p><blockquote class="iq ir is"><p id="25d5" class="it iu iv iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hm dt translated">“有没有想过Opensea令牌ID中的巨大数字实际上意味着什么！! "<br/>检出:<a class="ae ki" rel="noopener" href="/coinmonks/opensea-tokenid-explained-f420401f5109"> Opensea TokenId:已解释</a></p></blockquote><h1 id="6387" class="km kn ht bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj dt translated">NFT的角色需求</h1><p id="5ec8" class="pw-post-body-paragraph it iu ht iw b ix lk iz ja jb ll jd je kj lm jh ji kk ln jl jm kl lo jp jq jr hm dt translated">NFT的"<em class="iv">所有者"</em>和使用NFT的"<em class="iv">用户"</em>可能不总是相同的。可能有一个NFT的“<em class="iv">所有者“</em>将它出租给另一个“<em class="iv">用户</em>”，将这些数据存储在链上使得出租更加强大和安全。角色指定了用户和所有者之间的界限，使得管理权限和执行相应的操作变得容易。<br/> <strong class="iw hu">举例</strong>:虽然“<em class="iv">owner”</em>可以自由转让NFTs，但是NFT的“u<em class="iv">ser”</em>不应该被允许转让，限制他只能使用租用的NFT。</p><h1 id="20aa" class="km kn ht bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj dt translated"><strong class="ak">两用NFT租赁标准</strong></h1><blockquote class="iq ir is"><p id="b125" class="it iu iv iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hm dt translated"><em class="ht"> ERC - 4907 </em></p></blockquote><figure class="jt ju jv jw fq jx fe ff paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="fe ff lp"><img src="../Images/b139c3564d269506603a949bf8ca9dc0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*wKM9w1m-chol868B"/></div></div><figcaption class="ke kf fg fe ff kg kh bd b be z ek">Photo by <a class="ae ki" href="https://unsplash.com/@vincentvanzalinge?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Vincent van Zalinge</a> on <a class="ae ki" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="be22" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je kj jg jh ji kk jk jl jm kl jo jp jq jr hm dt translated">对公用事业NFT的持续需求，使得双重角色标准成为实现可出租NFT的最佳模式之一。简单的实现和提供的安全性，就NFT租赁而言，这是一种可行的机制。</p><p id="b817" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je kj jg jh ji kk jk jl jm kl jo jp jq jr hm dt translated"><strong class="iw hu"> ERC-4907 </strong>，在ERC-721的<code class="eh lq lr ls lt b"><em class="iv">owner</em> role</code>之外增加了一个<code class="eh lq lr ls lt b"><em class="iv">user </em>role</code> <strong class="iw hu"> </strong>，并增加了数据<code class="eh lq lr ls lt b"><em class="iv">expires</em></code> <strong class="iw hu"> </strong>，将最终用户权限方便租用。</p><p id="caf4" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je kj jg jh ji kk jk jl jm kl jo jp jq jr hm dt translated">在传统的租赁平台中，一旦租期结束，所有者必须手动收回他们的用户权限。这样做是一个相当繁琐的过程，尤其是如果同时租用多项资产。除了不方便之外，这也被证明是昂贵的天然气。<br/>包含<code class="eh lq lr ls lt b"><em class="iv">expires</em></code>是至关重要的一步，因为它消除了业主不便的这些问题，并证明了gas的有效性。</p><p id="3591" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je kj jg jh ji kk jk jl jm kl jo jp jq jr hm dt translated">与传统的租赁系统不同，虽然NFT已经租出去了，但你仍然是NFT的所有者，并对其拥有完全的控制权。</p><h1 id="41dd" class="km kn ht bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj dt translated">IERC4907</h1><figure class="jt ju jv jw fq jx fe ff paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="fe ff lu"><img src="../Images/d2293043f97b3d7b6f946f53ff124990.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1K_pebSGJPA-CUg3tp3eqw.png"/></div></div><figcaption class="ke kf fg fe ff kg kh bd b be z ek">IERC4907.sol ( <a class="ae ki" href="https://github.com/sidarth16/Rentable-NFTs/blob/main/interfaces/IERC4907.sol" rel="noopener ugc nofollow" target="_blank">source code</a> )</figcaption></figure><ul class=""><li id="47c7" class="lv lw ht iw b ix iy jb jc kj lx kk ly kl lz jr ma mb mc md dt translated"><code class="eh lq lr ls lt b"><strong class="iw hu">UpdateUser(...)</strong></code> <strong class="iw hu"> : </strong> <br/>每当新用户被分配到tokenId(或)时，当tokenId的用户被更新时，发出事件<code class="eh lq lr ls lt b">UpdateUser(...)</code>。</li><li id="a3e4" class="lv lw ht iw b ix me jb mf kj mg kk mh kl mi jr ma mb mc md dt translated"><code class="eh lq lr ls lt b"><strong class="iw hu">setUser( tokenId, user, expires)</strong></code> <strong class="iw hu"> : </strong> <br/>在函数<code class="eh lq lr ls lt b">setUser(...)</code>中，给定的<code class="eh lq lr ls lt b"><em class="iv">user</em></code>地址被设置为传递的<code class="eh lq lr ls lt b"><em class="iv">tokenId</em></code>的用户。<code class="eh lq lr ls lt b"><em class="iv">expires</em></code>是UNIX时间戳，在此之后，此<code class="eh lq lr ls lt b"><em class="iv">tokenId</em></code>的用户权限将被撤销(即，用户只能在<code class="eh lq lr ls lt b"><em class="iv">expires</em></code>之前使用此NFT令牌Id)。</li><li id="b81f" class="lv lw ht iw b ix me jb mf kj mg kk mh kl mi jr ma mb mc md dt translated"><code class="eh lq lr ls lt b"><strong class="iw hu">userOf( tokenId ) -&gt; returns address</strong></code> <strong class="iw hu"> : <br/> </strong>这个<code class="eh lq lr ls lt b">view</code>函数，返回当前用户给定的<code class="eh lq lr ls lt b"><em class="iv">tokenId</em></code>。<br/>如果令牌当前没有用户(或)分配给此<code class="eh lq lr ls lt b">tokenId</code>的用户权限已经过期，则该函数返回零地址。</li><li id="1d74" class="lv lw ht iw b ix me jb mf kj mg kk mh kl mi jr ma mb mc md dt translated"><code class="eh lq lr ls lt b"><strong class="iw hu">userExpires( tokenId ) -&gt; returns uint256</strong></code> <strong class="iw hu"> : <br/> </strong>此<code class="eh lq lr ls lt b">view</code>函数返回UNIX时间戳，在该时间戳处，给定<code class="eh lq lr ls lt b"><em class="iv">tokenId</em></code>的用户权限将被撤销。分配给此<code class="eh lq lr ls lt b">tokenId</code>的用户只能在返回的timestramp之前使用此NFT。如果<code class="eh lq lr ls lt b">tokenId</code>当前没有用户，该函数返回零。</li></ul><h2 id="5790" class="mj kn ht bd ko mk ml mm ks mn mo mp kw kj mq mr la kk ms mt le kl mu mv li mw dt translated">注意:</h2><ul class=""><li id="169f" class="lv lw ht iw b ix lk jb ll kj mx kk my kl mz jr ma mb mc md dt translated"><code class="eh lq lr ls lt b">userOf(uint256 tokenId)</code>功能可以实现为<code class="eh lq lr ls lt b">pure</code>或<code class="eh lq lr ls lt b">view</code>。</li><li id="cad4" class="lv lw ht iw b ix me jb mf kj mg kk mh kl mi jr ma mb mc md dt translated"><code class="eh lq lr ls lt b">userExpires(uint256 tokenId)</code>功能可以实现为<code class="eh lq lr ls lt b">pure</code>或<code class="eh lq lr ls lt b">view</code>。</li><li id="dccb" class="lv lw ht iw b ix me jb mf kj mg kk mh kl mi jr ma mb mc md dt translated"><code class="eh lq lr ls lt b">setUser(uint256 tokenId, address user, uint64 expires)</code>功能可以实现为<code class="eh lq lr ls lt b">public</code>或<code class="eh lq lr ls lt b">external</code>。</li><li id="beb1" class="lv lw ht iw b ix me jb mf kj mg kk mh kl mi jr ma mb mc md dt translated">当用户地址改变或用户过期时间改变时，必须发出<code class="eh lq lr ls lt b">UpdateUser</code>事件。</li><li id="27bc" class="lv lw ht iw b ix me jb mf kj mg kk mh kl mi jr ma mb mc md dt translated">用<code class="eh lq lr ls lt b">0xad092b5c</code>调用时，<code class="eh lq lr ls lt b">supportsInterface</code>方法必须返回<code class="eh lq lr ls lt b">true</code>。</li></ul><blockquote class="iq ir is"><p id="efb9" class="it iu iv iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hm dt translated">“使用荷兰拍卖机制进行IPO / ICO的基本演练，以及为什么它在区块链市场被广泛采用。！! "<br/>查看:<a class="ae ki" rel="noopener" href="/coinmonks/dutch-auction-ipo-ico-e02d4441a286">荷兰拍卖— IPO/ICO </a></p></blockquote><h1 id="6768" class="km kn ht bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj dt translated">结论</h1><p id="3550" class="pw-post-body-paragraph it iu ht iw b ix lk iz ja jb ll jd je kj lm jh ji kk ln jl jm kl lo jp jq jr hm dt translated">租用不可替换的令牌在NFTs范围内提供了一个全新的机会。ERC 4907中的双重角色机制允许协议从所有权中提取用户权限，这对于NFT租赁来说至关重要。</p><p id="1003" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je kj jg jh ji kk jk jl jm kl jo jp jq jr hm dt translated"><strong class="iw hu">协议规定:</strong></p><ul class=""><li id="bd02" class="lv lw ht iw b ix iy jb jc kj lx kk ly kl lz jr ma mb mc md dt translated"><strong class="iw hu">实现简单:<br/> </strong>易于实现并提供<em class="iv">向后兼容性</em></li><li id="3b80" class="lv lw ht iw b ix me jb mf kj mg kk mh kl mi jr ma mb mc md dt translated"><strong class="iw hu">角色到NFT </strong> <strong class="iw hu"> : </strong> <br/>有了双重的“<em class="iv">所有者</em>”和“<em class="iv">用户</em>”角色，管理贷方和借方在NFT上能做什么和不能做什么就变得容易多了。</li><li id="b751" class="lv lw ht iw b ix me jb mf kj mg kk mh kl mi jr ma mb mc md dt translated"><strong class="iw hu">上线时间管理</strong>(<code class="eh lq lr ls lt b">expires</code>)<strong class="iw hu">:</strong><br/>NFT的“<em class="iv">用户</em>”在租期结束后自动撤销。</li><li id="e8db" class="lv lw ht iw b ix me jb mf kj mg kk mh kl mi jr ma mb mc md dt translated"><strong class="iw hu">轻松的第三方集成:<em class="iv"><br/></em></strong>NFT的所有者现在可以将NFT租给一些用户，同时在抵押贷款平台上使用NFT。租赁使用NFT的“<em class="iv">用户</em>角色，抵押使用<em class="iv">所有者</em>角色。</li></ul><h1 id="36be" class="km kn ht bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj dt translated">创作者笔记</h1><p id="41e2" class="pw-post-body-paragraph it iu ht iw b ix lk iz ja jb ll jd je kj lm jh ji kk ln jl jm kl lo jp jq jr hm dt translated">非常感谢您的阅读。如果有任何疑问，请随时联系我们。<br/>帖子已经太长了，<br/>让我们看看<strong class="iw hu">在solidity contract </strong>中实现了同样的功能，以及本系列第二部分<strong class="iw hu"> <em class="iv">中的<strong class="iw hu"> Brownie测试用例</strong>。</em> </strong></p><blockquote class="iq ir is"><p id="0b92" class="it iu iv iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hm dt translated">查看:<a class="ae ki" rel="noopener" href="/@sidarths/rentable-nfts-erc-4907-part-ii-954cc27d22e9"> <strong class="iw hu">第二部分:可出租的NFTs(ERC-4907)</strong></a><strong class="iw hu"><br/>可靠性</strong>智能合同实现和使用<strong class="iw hu"> Brownie </strong>进行测试</p></blockquote><p id="240f" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je kj jg jh ji kk jk jl jm kl jo jp jq jr hm dt translated">关注区块链、NFTs、Defi、智能合约等更多内容<br/> <em class="iv">联系我</em><a class="ae ki" href="https://twitter.com/sidarthx0" rel="noopener ugc nofollow" target="_blank"><strong class="iw hu"><em class="iv">Twitter</em></strong></a><em class="iv"/><a class="ae ki" href="https://www.linkedin.com/in/sidarths/" rel="noopener ugc nofollow" target="_blank"><strong class="iw hu"><em class="iv">LinkedIn</em></strong></a><a class="ae ki" href="http://ssidarth1999@gmail.com/" rel="noopener ugc nofollow" target="_blank"><strong class="iw hu"><em class="iv">邮箱</em> </strong> </a>。</p></div></div>    
</body>
</html>