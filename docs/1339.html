<html>
<head>
<title>Providers and Signers in Hardhat Smart Contract Development</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Hardhat智能合同开发中的提供者和签署者</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/providers-and-signers-in-hardhat-smart-contract-development-15f6f51abd81?source=collection_archive---------3-----------------------#2022-07-27">https://medium.com/coinmonks/providers-and-signers-in-hardhat-smart-contract-development-15f6f51abd81?source=collection_archive---------3-----------------------#2022-07-27</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><blockquote class="iq ir is"><p id="957c" class="it iu iv iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hm dt translated">我为什么写这个博客？当开始智能契约测试时，我发现在编码时理解签名者非常令人困惑。</p></blockquote><p id="cf81" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hm dt translated">在本文中，我将结合Ether.js使用Hardhat来部署区块链并与之交互。</p><h1 id="5d07" class="jv jw ht bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks dt translated">签名者与提供商</h1><blockquote class="iq ir is"><p id="6eb7" class="it iu iv iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hm dt translated">签名者=钱包账户，我们从供应商那里得到一个签名者。</p></blockquote><h1 id="1685" class="jv jw ht bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks dt translated">签名者简介</h1><ul class=""><li id="0130" class="kt ku ht iw b ix kv jb kw js kx jt ky ju kz jr la lb lc ld dt translated">简而言之，签名者=钱包账户。<strong class="iw hu">ethers . js中的Signer是代表以太坊账户的对象。</strong></li><li id="51d0" class="kt ku ht iw b ix le jb lf js lg jt lh ju li jr la lb lc ld dt translated">要理解什么是“钱包账户”或“以太坊账户”，我们可以简单地联系到我们已经知道的东西。</li><li id="1c04" class="kt ku ht iw b ix le jb lf js lg jt lh ju li jr la lb lc ld dt translated">如果你第一次使用元蒙版，你需要创建你的“钱包”。创建钱包后，您将从metamsk获得一个唯一的钱包帐户。</li><li id="5168" class="kt ku ht iw b ix le jb lf js lg jt lh ju li jr la lb lc ld dt translated">如果我们不能将它与“以太坊区块链”联系起来，这个账户就没有意义，因为你总是查询<em class="iv">“我在Goerli Testnet中的账户余额”</em>我们不是简单地查询<em class="iv">“我的账户余额”。</em></li><li id="d572" class="kt ku ht iw b ix le jb lf js lg jt lh ju li jr la lb lc ld dt translated">这里的格利试验网是区块链以太坊。这可以直接联系到“提供商”。</li><li id="1f9b" class="kt ku ht iw b ix le jb lf js lg jt lh ju li jr la lb lc ld dt translated">如果我们知道一个账户的私钥，就意味着我们是这个账户的主人。</li></ul><h2 id="7936" class="lj jw ht bd jx lk ll lm kb ln lo lp kf js lq lr kj jt ls lt kn ju lu lv kr lw dt translated">签名者能做什么？</h2><ul class=""><li id="59fd" class="kt ku ht iw b ix kv jb kw js kx jt ky ju kz jr la lb lc ld dt translated">我们可以使用以太坊钱包/账户做任何事情。</li><li id="079c" class="kt ku ht iw b ix le jb lf js lg jt lh ju li jr la lb lc ld dt translated">使用以太坊账户，我们可以发送“签名”信息。</li></ul><h2 id="dd1b" class="lj jw ht bd jx lk ll lm kb ln lo lp kf js lq lr kj jt ls lt kn ju lu lv kr lw dt translated">你能产生多少签名者？</h2><ul class=""><li id="91a7" class="kt ku ht iw b ix kv jb kw js kx jt ky ju kz jr la lb lc ld dt translated">我们不会“生成”新的签名者。这些只是区块链中的以太坊帐户，类似于我们在第一次安装时需要创建的元掩码帐户。</li><li id="c44d" class="kt ku ht iw b ix le jb lf js lg jt lh ju li jr la lb lc ld dt translated">我们可以生成尽可能多的签名者。</li><li id="fc06" class="kt ku ht iw b ix le jb lf js lg jt lh ju li jr la lb lc ld dt translated">在生产中，我们可能会有几个钱包帐户。但是当开发智能合同时，我们需要更多的功能来测试，这样我们就不必经历元掩码的痛苦来按需生成新帐户。</li><li id="a2c1" class="kt ku ht iw b ix le jb lf js lg jt lh ju li jr la lb lc ld dt translated">对于使用Hardhat框架的开发人员，我们可以利用<code class="eh lx ly lz ma b">import {ethers} from “Hardhat”;</code>创建一个Hardhat-Ethers库的实例。然后，我们可以在“测试区块链”上生成大约20个这样的“按需”地址，这些地址是本地的，只是为了测试目的而创建的。我们可以使用<code class="eh lx ly lz ma b">ethers.getAccount()</code>生成</li></ul><h2 id="76f7" class="lj jw ht bd jx lk ll lm kb ln lo lp kf js lq lr kj jt ls lt kn ju lu lv kr lw dt translated">有3种方式生成签名者</h2><ol class=""><li id="8aae" class="kt ku ht iw b ix kv jb kw js kx jt ky ju kz jr mb lb lc ld dt translated">(生产)使用<code class="eh lx ly lz ma b">Wallet</code> -假设你已经有一个以太坊账户/钱包账户。</li><li id="358d" class="kt ku ht iw b ix le jb lf js lg jt lh ju li jr mb lb lc ld dt translated">(开发)使用ethers.js <code class="eh lx ly lz ma b">ethers.getSigners()</code> -正好生成20个帐户。参考</li><li id="4b11" class="kt ku ht iw b ix le jb lf js lg jt lh ju li jr mb lb lc ld dt translated">(开发)使用ethers . js<code class="eh lx ly lz ma b">ethers.Wallet.createRandom()</code>——如果你需要更多，这将不断产生新的帐户一个接一个。<a class="ae mc" href="https://ethereum.stackexchange.com/questions/123519/how-to-get-more-than-20-signers-with-ethers-js-hardhat-waffles" rel="noopener ugc nofollow" target="_blank">参考</a>。</li></ol><h2 id="cae7" class="lj jw ht bd jx lk ll lm kb ln lo lp kf js lq lr kj jt ls lt kn ju lu lv kr lw dt translated"><a class="ae mc" href="https://hardhat.org/plugins/nomiclabs-hardhat-ethers#hardhat-ethers" rel="noopener ugc nofollow" target="_blank"> <strong class="ak">安全帽-乙醚</strong> </a> <strong class="ak"> vs </strong> <a class="ae mc" href="https://github.com/ethers-io/ethers.js/" rel="noopener ugc nofollow" target="_blank"> <strong class="ak">乙醚. js </strong> </a></h2><ul class=""><li id="eba9" class="kt ku ht iw b ix kv jb kw js kx jt ky ju kz jr la lb lc ld dt translated">Hardhat-ethers = ethers.js +其他Hardhat助手</li><li id="43d4" class="kt ku ht iw b ix le jb lf js lg jt lh ju li jr la lb lc ld dt translated">为了便于开发，我们一般在hardhat开发中使用hardhat-ethers，而不是ethers.js。</li><li id="502a" class="kt ku ht iw b ix le jb lf js lg jt lh ju li jr la lb lc ld dt translated">要获得hardhat-ethers中助手的完整列表，请访问<a class="ae mc" href="https://hardhat.org/plugins/nomiclabs-hardhat-ethers#helpers" rel="noopener ugc nofollow" target="_blank">参考文献</a>。</li></ul><h1 id="f574" class="jv jw ht bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks dt translated">提供者</h1><ul class=""><li id="f8fd" class="kt ku ht iw b ix kv jb kw js kx jt ky ju kz jr la lb lc ld dt translated">我们通过区块链的一个节点连接到区块链。提供程序用于连接到这些区块链节点。有两种类型的提供者<code class="eh lx ly lz ma b">JsonRpcProvider()</code>和<code class="eh lx ly lz ma b">Web3Provider()</code></li></ul><h2 id="c1f9" class="lj jw ht bd jx lk ll lm kb ln lo lp kf js lq lr kj jt ls lt kn ju lu lv kr lw dt translated"><code class="eh lx ly lz ma b">JsonRpcProvider()</code> vs <code class="eh lx ly lz ma b">Web3Provider()</code></h2><ul class=""><li id="75fc" class="kt ku ht iw b ix kv jb kw js kx jt ky ju kz jr la lb lc ld dt translated">JsonRpcProvider():当我们使用RPC URL直接连接到区块链时使用它。</li><li id="55b7" class="kt ku ht iw b ix le jb lf js lg jt lh ju li jr la lb lc ld dt translated">Web3Provider():当我们不使用RPC URL连接到区块链时使用它。我们使用第三方工具，如metamask，然后使用RPC连接到区块链。在开发dapp时，我们需要指定我们需要通过metamask或其他钱包连接哪个EVM链。</li><li id="8ef3" class="kt ku ht iw b ix le jb lf js lg jt lh ju li jr la lb lc ld dt translated">在两种JsonRpcProvider()方法中，我们可以有多个签名者，假设我们知道私钥，但是一般来说，对于一个dapp的一个事务，我们只使用一个签名者。</li></ul><ol class=""><li id="092a" class="kt ku ht iw b ix iy jb jc js md jt me ju mf jr mb lb lc ld dt translated">当我们想通过<strong class="iw hu">元掩码</strong>进行交易时，使用<code class="eh lx ly lz ma b">Web3Provider()</code>。</li></ol><figure class="mh mi mj mk fq ml fe ff paragraph-image"><div class="fe ff mg"><img src="../Images/2810b255fd389835a183f13b1b5d1f85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1032/format:webp/1*JjPPTcE-KiKcBj0qDSl2-w.png"/></div><figcaption class="mo mp fg fe ff mq mr bd b be z ek">web3provider</figcaption></figure><p id="e925" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hm dt translated">2.使用<code class="eh lx ly lz ma b">JsonRpcProvider()</code>，当我们想通过编程直接使用账户的私钥访问区块链时，我们使用这个。这不会向用户显示任何窗口/弹出窗口，因为交易不需要连接到用户钱包。当我们不想用metamask钱包付款时，就用这个。</p><figure class="mh mi mj mk fq ml fe ff paragraph-image"><div class="fe ff ms"><img src="../Images/0375b4df59e2dc4c8b15a1058c1c886a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1246/format:webp/1*JdzVl-h9rVvFhB_zE-kBtw.png"/></div><figcaption class="mo mp fg fe ff mq mr bd b be z ek">jsonrpcprovider</figcaption></figure><blockquote class="mt"><p id="7693" class="mu mv ht bd mw mx my mz na nb nc jr ek translated">交易新手？试试<a class="ae mc" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">加密交易机器人</a>或者<a class="ae mc" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">复制交易</a></p></blockquote></div></div>    
</body>
</html>