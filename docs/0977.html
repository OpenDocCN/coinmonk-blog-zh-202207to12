<html>
<head>
<title>How Do I Get All the Tokens?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我如何得到所有的代币？</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/how-do-i-get-all-the-tokens-21ff1607d189?source=collection_archive---------3-----------------------#2022-07-20">https://medium.com/coinmonks/how-do-i-get-all-the-tokens-21ff1607d189?source=collection_archive---------3-----------------------#2022-07-20</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="7cab" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">简单的问题。复杂的解决方案。</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="fe ff jo"><img src="../Images/05e4c098a0302e7576c0e52106941ee4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ShEHuGB9neu65YrZBUGcBQ.png"/></div></div></figure><h1 id="9bb2" class="ka kb ht bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated">TLDR</h1><p id="e54a" class="pw-post-body-paragraph iq ir ht is b it ky iv iw ix kz iz ja jb la jd je jf lb jh ji jj lc jl jm jn hm dt translated">(目前)还没有一个万能的解决方案。</p><h1 id="7ae7" class="ka kb ht bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated">问题</h1><blockquote class="ld"><p id="b4bb" class="le lf ht bd lg lh li lj lk ll lm jn ek translated">我用metamask登录我的网站。但是我想在元掩码中获得所有令牌(如BNB、RARI等)的平衡。我如何获得所有代币的余额？</p></blockquote><div class="ln lo lp lq lr ls"><a href="https://stackoverflow.com/questions/67363924/how-do-i-get-all-the-tokens-inside-my-metamask-wallet-by-web3-or-others" rel="noopener  ugc nofollow" target="_blank"><div class="lt ab ej"><div class="lu ab lv cl cj lw"><h2 class="bd hu fv z el lx eo ep ly er et hs dt translated">我如何通过web3或其他方式获得我的Metamask钱包中的所有令牌？</h2><div class="lz l"><h3 class="bd b fv z el lx eo ep ly er et ek translated">正如你在评论中已经指出的，没有人知道你账户的所有代币余额，甚至元掩码也不知道…</h3></div><div class="ma l"><p class="bd b gc z el lx eo ep ly er et ek translated">stackoverflow.com</p></div></div><div class="mb l"><div class="mc l md me mf mb mg jy ls"/></div></div></a></div><h1 id="f29c" class="ka kb ht bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated">回答</h1><blockquote class="ld"><p id="3f2b" class="le lf ht bd lg lh li lj lk ll lm jn ek translated">正如你在评论中已经指出的，没有人知道你账户的所有代币余额，甚至元掩码也不知道。这是因为令牌不在您的帐户中，而是在跟踪您的令牌余额的令牌智能合约中。</p></blockquote><h1 id="d519" class="ka kb ht bd kc kd ke kf kg kh ki kj kk kl mh kn ko kp mi kr ks kt mj kv kw kx dt translated">解决方案1:知道合同地址</h1><p id="15be" class="pw-post-body-paragraph iq ir ht is b it ky iv iw ix kz iz ja jb la jd je jf lb jh ji jj lc jl jm jn hm dt translated">如果知道合同地址，可以导入到钱包里。</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="fe ff mk"><img src="../Images/f888ed341dc8f96682b398beedc26cff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RksXKwGUAaz5HQQeEK1cow.png"/></div></div></figure><h1 id="dc08" class="ka kb ht bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated">解决方案2:白名单令牌</h1><p id="5079" class="pw-post-body-paragraph iq ir ht is b it ky iv iw ix kz iz ja jb la jd je jf lb jh ji jj lc jl jm jn hm dt translated">诸如令牌列表之类的服务聚集了令牌列表😉。这些都是为ERC 20(可替换的令牌)策划的。</p><div class="ml mm fm fo mn ls"><a href="https://tokenlists.org/" rel="noopener  ugc nofollow" target="_blank"><div class="lt ab ej"><div class="lu ab lv cl cj lw"><h2 class="bd hu fv z el lx eo ep ly er et hs dt translated">以太坊令牌列表</h2><div class="lz l"><h3 class="bd b fv z el lx eo ep ly er et ek translated">帮助以太坊社区以包容的方式创建、发现和维护信誉良好的令牌列表…</h3></div><div class="ma l"><p class="bd b gc z el lx eo ep ly er et ek translated">tokenlists.org</p></div></div><div class="mb l"><div class="mo l md me mf mb mg jy ls"/></div></div></a></div><h1 id="9f0a" class="ka kb ht bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated">解决方案3:图表</h1><p id="a09c" class="pw-post-body-paragraph iq ir ht is b it ky iv iw ix kz iz ja jb la jd je jf lb jh ji jj lc jl jm jn hm dt translated">上述解决方案适用于ERC-20令牌(可替换令牌)。ERC-721(不可替代)和ERC-1155(半可替代)怎么样？</p><p id="9614" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这将需要更多的技术工作，但你可以开始一个图表，将听取合同地址列表。由于该图将于2023年在Q1<a class="ae mp" href="https://thegraph.com/blog/sunsetting-hosted-service" rel="noopener ugc nofollow" target="_blank">关闭托管服务，明智的做法是部署自己的服务。</a></p><div class="ml mm fm fo mn ls"><a rel="noopener follow" target="_blank" href="/coinmonks/deploy-subgraphs-to-any-evm-aaaccc3559f"><div class="lt ab ej"><div class="lu ab lv cl cj lw"><h2 class="bd hu fv z el lx eo ep ly er et hs dt translated">将子图部署到任何EVM</h2><div class="lz l"><h3 class="bd b fv z el lx eo ep ly er et ek translated">使用Docker、图、图节点和OpenZepplin子图</h3></div><div class="ma l"><p class="bd b gc z el lx eo ep ly er et ek translated">medium.com</p></div></div><div class="mb l"><div class="mq l md me mf mb mg jy ls"/></div></div></a></div><h1 id="0847" class="ka kb ht bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated">解决方案4:数据提供者</h1><p id="30a8" class="pw-post-body-paragraph iq ir ht is b it ky iv iw ix kz iz ja jb la jd je jf lb jh ji jj lc jl jm jn hm dt translated">有些服务可以提供一些数据</p><h2 id="bbc8" class="mr kb ht bd kc ms mt mu kg mv mw mx kk jb my mz ko jf na nb ks jj nc nd kw ne dt translated">道德</h2><p id="2c6f" class="pw-post-body-paragraph iq ir ht is b it ky iv iw ix kz iz ja jb la jd je jf lb jh ji jj lc jl jm jn hm dt translated"><a class="ae mp" href="https://docs.moralis.io/moralis-dapp/web3-api/account#gettokenbalances" rel="noopener ugc nofollow" target="_blank">https://docs . moralis . io/moralis-dapp/web 3-API/account # gettoken balances</a></p><h2 id="2066" class="mr kb ht bd kc ms mt mu kg mv mw mx kk jb my mz ko jf na nb ks jj nc nd kw ne dt translated">魔力</h2><p id="e553" class="pw-post-body-paragraph iq ir ht is b it ky iv iw ix kz iz ja jb la jd je jf lb jh ji jj lc jl jm jn hm dt translated">ERC-20:<a class="ae mp" href="https://docs.alchemy.com/docs/how-to-get-all-tokens-owned-by-an-address" rel="noopener ugc nofollow" target="_blank">https://docs . alchemy . com/docs/how-to-get-all-tokens-owned-by-an-address</a></p><p id="5fb9" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">https://docs.alchemy.com/reference/nft-api-endpoints</p><h2 id="6618" class="mr kb ht bd kc ms mt mu kg mv mw mx kk jb my mz ko jf na nb ks jj nc nd kw ne dt translated">图表</h2><p id="2d37" class="pw-post-body-paragraph iq ir ht is b it ky iv iw ix kz iz ja jb la jd je jf lb jh ji jj lc jl jm jn hm dt translated"><a class="ae mp" href="https://thegraph.com/hosted-service/subgraph/leon-do/optimism-erc20-erc721-erc1155" rel="noopener ugc nofollow" target="_blank">https://the graph . com/hosted-service/sub graph/Leon-do/乐观-erc20-erc721-erc1155 </a></p><h2 id="3bce" class="mr kb ht bd kc ms mt mu kg mv mw mx kk jb my mz ko jf na nb ks jj nc nd kw ne dt translated">共价的</h2><p id="c85c" class="pw-post-body-paragraph iq ir ht is b it ky iv iw ix kz iz ja jb la jd je jf lb jh ji jj lc jl jm jn hm dt translated"><a class="ae mp" href="https://www.covalenthq.com/docs/api/#/0/Get%20token%20balances%20for%20address/USD/1" rel="noopener ugc nofollow" target="_blank">https://www . covalenthq . com/docs/API/#/0/Get % 20 token % 20 balances % 20 for % 20 address/USD/1</a></p><h2 id="d298" class="mr kb ht bd kc ms mt mu kg mv mw mx kk jb my mz ko jf na nb ks jj nc nd kw ne dt translated">Ankr</h2><p id="e84b" class="pw-post-body-paragraph iq ir ht is b it ky iv iw ix kz iz ja jb la jd je jf lb jh ji jj lc jl jm jn hm dt translated"><a class="ae mp" href="https://documenter.getpostman.com/view/19024547/UVsEVUGQ#1bd10982-fee7-4c71-9623-c42470b13aa1" rel="noopener ugc nofollow" target="_blank">https://documenter . get postman . com/view/19024547/UVsEVUGQ # 1bd 10982-fee 7-4c 71-9623-c 42470 b13a 1</a></p><p id="787e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">每个服务在这里都有其优缺点:<a class="ae mp" rel="noopener" href="/web3-magazine/comparison-nft-api-providers-5f45368d2c7f">https://medium . com/web 3-magazine/comparison-NFT-API-providers-5f 45368 D2 c7f</a></p><h1 id="273c" class="ka kb ht bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated">解决方案5:创建自定义索引器</h1><p id="ab30" class="pw-post-body-paragraph iq ir ht is b it ky iv iw ix kz iz ja jb la jd je jf lb jh ji jj lc jl jm jn hm dt translated">最耗费资源。</p><ul class=""><li id="6d6a" class="nf ng ht is b it iu ix iy jb nh jf ni jj nj jn nk nl nm nn dt translated">连接到完整节点</li><li id="d113" class="nf ng ht is b it no ix np jb nq jf nr jj ns jn nk nl nm nn dt translated">获取从块0开始的每个事务</li><li id="0279" class="nf ng ht is b it no ix np jb nq jf nr jj ns jn nk nl nm nn dt translated">检查<code class="eh nt nu nv nw b">from</code>和<code class="eh nt nu nv nw b">to</code>地址，看是否是ERC20，721，1155合同。这需要散列(keccak-256)方法在字节码中搜索它。例<code class="eh nt nu nv nw b">transferFrom(address,address,uint256)</code> &gt; <code class="eh nt nu nv nw b">23b872dd</code></li><li id="2231" class="nf ng ht is b it no ix np jb nq jf nr jj ns jn nk nl nm nn dt translated">侦听发出的事件，并将其保存到数据库中。</li><li id="a44b" class="nf ng ht is b it no ix np jb nq jf nr jj ns jn nk nl nm nn dt translated">构建一个API层来查询数据库。</li></ul><blockquote class="nx ny nz"><p id="bcfb" class="iq ir oa is b it iu iv iw ix iy iz ja ob jc jd je oc jg jh ji od jk jl jm jn hm dt translated">交易新手？尝试<a class="ae mp" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">加密交易机器人</a>或<a class="ae mp" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">复制交易</a></p></blockquote><h1 id="2736" class="ka kb ht bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated">我如何获得“所有”链的“所有”令牌？</h1><p id="a395" class="pw-post-body-paragraph iq ir ht is b it ky iv iw ix kz iz ja jb la jd je jf lb jh ji jj lc jl jm jn hm dt translated">一些数据提供者在链中受到限制，或者它们的数据结构不同。一个选项是聚合上述所有服务并规范化数据。这需要一个单独的后端，api键和代码。</p><h1 id="81b9" class="ka kb ht bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated">结论</h1><p id="9476" class="pw-post-body-paragraph iq ir ht is b it ky iv iw ix kz iz ja jb la jd je jf lb jh ji jj lc jl jm jn hm dt translated">没有万能的解决方案，但有多种选择。如果您对多链令牌索引器感兴趣，请随时联系我们。</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="fe ff oe"><img src="../Images/f02700b17f54f1a894b5cc6f0cadd699.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6XekPnLmJPuk5JcK"/></div></div><figcaption class="of og fg fe ff oh oi bd b be z ek">Photo by <a class="ae mp" href="https://unsplash.com/@dawson2406?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Stephen Dawson</a> on <a class="ae mp" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure></div></div>    
</body>
</html>