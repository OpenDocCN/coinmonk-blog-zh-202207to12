<html>
<head>
<title>CSC101 -Assembly</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">CSC 101-装配</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/csc101-assembly-458e7324c021?source=collection_archive---------30-----------------------#2022-09-22">https://medium.com/coinmonks/csc101-assembly-458e7324c021?source=collection_archive---------30-----------------------#2022-09-22</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="319a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">汇编或汇编语言表示一种低级编程语言，可以用汇编程序转换成机器代码。EVM是一个简单的堆叠机。为了使用这台堆栈机，我们提供了<strong class="is hu">操作码</strong>。</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="fe ff jo"><img src="../Images/78db353f85d00a7149d8bc2b6bc3c9de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nYib8N6wIy-Papn96wyEKg.png"/></div></div></figure><h2 id="56f1" class="ka kb ht bd kc kd ke kf kg kh ki kj kk jb kl km kn jf ko kp kq jj kr ks kt ku dt translated">坚固组件</h2><p id="c7a7" class="pw-post-body-paragraph iq ir ht is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hm dt translated">Solidity可以选择在智能合约的源代码中编写汇编语言代码。EVM是一个简单的堆叠机。为了使用这台堆垛机，我们被提供了<strong class="is hu">操作码</strong>。</p><p id="e7c7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在Solidity assembly的帮助下，我们可以使用操作码直接与EVM交互。汇编对一些逻辑提供了更多的控制，而这些逻辑仅仅使用可靠性是不可能的，比如指向特定的内存块。</p><p id="9667" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这些操作码是告诉EVM做什么的指令。例如，push1将1个字节推入堆栈，add弹出堆栈的最后两项，并返回结果，以此类推。</p><p id="87c2" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">其中一个主要优势是，它降低了用于部署合同的天然气成本。</p><p id="d601" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">要在内联汇编中重写契约，我们需要这五个操作码:</p><ol class=""><li id="cf26" class="la lb ht is b it iu ix iy jb lc jf ld jj le jn lf lg lh li dt translated"><strong class="is hu">存储</strong> - &gt;存储数据到存储器</li><li id="3176" class="la lb ht is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li dt translated"><strong class="is hu"> sload </strong> - &gt;从存储器中加载数据</li><li id="e3f9" class="la lb ht is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li dt translated"><strong class="is hu"> log1 </strong> - &gt;发出一个事件</li><li id="6d46" class="la lb ht is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li dt translated"><strong class="is hu"> mstore </strong> - &gt;将数据存储到内存中</li><li id="1a1b" class="la lb ht is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li dt translated"><strong class="is hu">返回</strong> - &gt;从内存返回数据</li></ol><p id="5d74" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">Solidity有两种方法来实现汇编语言:</p><h2 id="4683" class="ka kb ht bd kc kd ke kf kg kh ki kj kk jb kl km kn jf ko kp kq jj kr ks kt ku dt translated"><strong class="ak">内嵌装配</strong></h2><p id="1054" class="pw-post-body-paragraph iq ir ht is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hm dt translated">内联汇编代码可以写在solidity代码中，以便进行更细粒度的控制，特别是用于通过创建新的库来增强语言。内联汇编可以以EVM能够理解的方式插入到可靠性语句之间。当优化器不能产生有效的代码时，也可以使用它。当使用汇编局部变量、函数调用、开关语句、if语句、循环等特性时，可靠性变得更容易。<br/> <strong class="is hu">语法:</strong></p><pre class="jp jq jr js fq lo lp lq lr aw ls dt"><span id="a468" class="ka kb ht lp b fv lt lu l lv lw">assembly{<br/>     // assembly language statements<br/>}</span></pre><p id="1eb2" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">示例:</strong>在下面的示例中，创建了一个带有函数的契约，其中内联汇编代码位于函数内部。</p><h2 id="899f" class="ka kb ht bd kc kd ke kf kg kh ki kj kk jb kl km kn jf ko kp kq jj kr ks kt ku dt translated"><strong class="ak">独立装配</strong></h2><p id="b31d" class="pw-post-body-paragraph iq ir ht is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hm dt translated">独立汇编是为solidity编译器设计的中间语言。它支持最近的兼容性，但在solidity文档中不再有记录。即使代码是由solidity编译器生成的，在独立汇编中编写的程序也是可读的。控制流应该易于优化和正式验证。</p><p id="8203" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">有关更多说明，请访问EVM操作码互动参考:</p><div class="lx ly fm fo lz ma"><a href="https://www.evm.codes/" rel="noopener  ugc nofollow" target="_blank"><div class="mb ab ej"><div class="mc ab md cl cj me"><h2 class="bd hu fv z el mf eo ep mg er et hs dt translated">EVM码-操作码</h2><div class="mh l"><h3 class="bd b fv z el mf eo ep mg er et ek translated">以太坊虚拟机操作码交互参考</h3></div><div class="mi l"><p class="bd b gc z el mf eo ep mg er et ek translated">www.evm.codes</p></div></div><div class="mj l"><div class="mk l ml mm mn mj mo jy ma"/></div></div></a></div><blockquote class="mp"><p id="e635" class="mq mr ht bd ms mt mu mv mw mx my jn ek translated">加入Coinmonks <a class="ae mz" href="https://t.me/coincodecap" rel="noopener ugc nofollow" target="_blank">电报频道</a>和<a class="ae mz" href="https://www.youtube.com/c/coinmonks/videos" rel="noopener ugc nofollow" target="_blank"> Youtube频道</a>了解密码交易和投资</p></blockquote><h1 id="c50f" class="na kb ht bd kc nb nc nd kg ne nf ng kk nh ni nj kn nk nl nm kq nn no np kt nq dt translated">此外，请阅读</h1><ul class=""><li id="2945" class="la lb ht is b it kv ix kw jb nr jf ns jj nt jn nu lg lh li dt translated"><a class="ae mz" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">密码交易机器人</a> | <a class="ae mz" href="https://coincodecap.com/uphold-review" rel="noopener ugc nofollow" target="_blank">坚持审查</a></li><li id="1730" class="la lb ht is b it lj ix lk jb ll jf lm jj ln jn nu lg lh li dt translated"><a class="ae mz" href="https://coincodecap.com/best-cryptocurrency-blogs" rel="noopener ugc nofollow" target="_blank"> 10大最佳隐币博客</a> | <a class="ae mz" href="https://coincodecap.com/youhodler-review" rel="noopener ugc nofollow" target="_blank">有奖点评</a></li><li id="3868" class="la lb ht is b it lj ix lk jb ll jf lm jj ln jn nu lg lh li dt translated"><a class="ae mz" href="https://coincodecap.com/myconstant-review" rel="noopener ugc nofollow" target="_blank">my instance Review</a>|<a class="ae mz" href="https://coincodecap.com/best-swing-trading-bots" rel="noopener ugc nofollow" target="_blank">8款最佳摇摆交易机器人</a></li><li id="a83a" class="la lb ht is b it lj ix lk jb ll jf lm jj ln jn nu lg lh li dt translated"><a class="ae mz" rel="noopener" href="/coinmonks/mxc-exchange-review-3af0ec1cba8c"> MXC交易所评论</a> | <a class="ae mz" href="https://coincodecap.com/pionex-vs-binance" rel="noopener ugc nofollow" target="_blank"> Pionex诉币安</a> | <a class="ae mz" href="https://coincodecap.com/pionex-arbitrage-bot" rel="noopener ugc nofollow" target="_blank"> Pionex套利机器人</a></li><li id="3242" class="la lb ht is b it lj ix lk jb ll jf lm jj ln jn nu lg lh li dt translated"><a class="ae mz" rel="noopener" href="/coinmonks/my-experience-with-crypto-copy-trading-d6feb2ce3ac5">我的加密副本交易经验</a> | <a class="ae mz" rel="noopener" href="/coinmonks/coinbase-review-6ef4e0f56064">比特币基地评论</a></li></ul></div></div>    
</body>
</html>