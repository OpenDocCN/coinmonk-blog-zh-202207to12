<html>
<head>
<title>CSC 101 -Mapping</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">CSC 101-映射</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/csc-101-mapping-9d3c620cca98?source=collection_archive---------37-----------------------#2022-08-26">https://medium.com/coinmonks/csc-101-mapping-9d3c620cca98?source=collection_archive---------37-----------------------#2022-08-26</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="be68" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">嘿嘿嘿！<br/> Zeroxlive来了<strong class="is hu"> Coinex智能链</strong></p><p id="2b2d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">Solidity提供了一种数据结构映射，以哈希表格式存储键和值。映射是作为数组和结构的引用类型。</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="fe ff jo"><img src="../Images/78db353f85d00a7149d8bc2b6bc3c9de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nYib8N6wIy-Papn96wyEKg.png"/></div></div></figure><h2 id="8b2d" class="ka kb ht bd kc kd ke kf kg kh ki kj kk jb kl km kn jf ko kp kq jj kr ks kt ku dt translated">绘图</h2><p id="90b5" class="pw-post-body-paragraph iq ir ht is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hm dt translated">Solidity中的映射就像任何其他语言中的哈希表或字典一样。它们用于以键-值对的形式存储数据，键可以是任何内置数据类型，但不允许引用类型，而值可以是任何类型。映射主要用于将唯一的以太坊地址与相关联的值类型相关联。</p><p id="2aa4" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">映射对于关联很有用，比如将一个唯一的以太坊地址与一个特定的余额相关联。</p><p id="96cf" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">格式</strong>:</p><pre class="jp jq jr js fq la lb lc ld aw le dt"><span id="5647" class="ka kb ht lb b fv lf lg l lh li">mapping(keyType=&gt; valueType) public mappingVariable;</span></pre><ul class=""><li id="be4d" class="lj lk ht is b it iu ix iy jb ll jf lm jj ln jn lo lp lq lr dt translated"><strong class="is hu">_ key type</strong>—可以是任何内置类型加上字节和字符串。不允许引用类型或复杂对象。</li><li id="03ef" class="lj lk ht is b it ls ix lt jb lu jf lv jj lw jn lo lp lq lr dt translated"><strong class="is hu">_ value type</strong>—可以是任何类型。</li></ul><h2 id="260f" class="ka kb ht bd kc kd ke kf kg kh ki kj kk jb kl km kn jf ko kp kq jj kr ks kt ku dt translated">定义映射</h2><p id="7f90" class="pw-post-body-paragraph iq ir ht is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hm dt translated">为了定义一个映射，我们和其他变量类型做同样的事情。</p><p id="ba93" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">示例</strong>:</p><pre class="jp jq jr js fq la lb lc ld aw le dt"><span id="1050" class="ka kb ht lb b fv lf lg l lh li">mapping (address =&gt; Users) result;</span><span id="def6" class="ka kb ht lb b fv lx lg l lh li">address[] public<!-- --> <!-- -->Users_result;</span></pre><h2 id="6920" class="ka kb ht bd kc kd ke kf kg kh ki kj kk jb kl km kn jf ko kp kq jj kr ks kt ku dt translated">向映射添加值</h2><p id="ee7f" class="pw-post-body-paragraph iq ir ht is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hm dt translated">让我们试着给映射添加一些值。要给映射添加值，我们使用<strong class="is hu"> push。</strong>注意以下例子:</p><p id="40ae" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">示例</strong>:</p><pre class="jp jq jr js fq la lb lc ld aw le dt"><span id="7b4c" class="ka kb ht lb b fv lf lg l lh li">struct<!-- --> <!-- -->User {</span><span id="6787" class="ka kb ht lb b fv lx lg l lh li">    string name;</span><span id="482b" class="ka kb ht lb b fv lx lg l lh li">    uint ID;</span><span id="04ae" class="ka kb ht lb b fv lx lg l lh li">    uint Gold;</span><span id="80d5" class="ka kb ht lb b fv lx lg l lh li">}</span><span id="777e" class="ka kb ht lb b fv lx lg l lh li">mapping (</span><span id="1ec0" class="ka kb ht lb b fv lx lg l lh li">address =&gt; users) result;</span><span id="6f31" class="ka kb ht lb b fv lx lg l lh li">address[] public<!-- --> <!-- -->users_result;</span><span id="5254" class="ka kb ht lb b fv lx lg l lh li">function adding_values() public<!-- --> <!-- -->{</span><span id="2b77" class="ka kb ht lb b fv lx lg l lh li">var user</span><span id="75d6" class="ka kb ht lb b fv lx lg l lh li">= result[0x00000000000.....];</span><span id="dec7" class="ka kb ht lb b fv lx lg l lh li">Users.name = "John";</span><span id="33f9" class="ka kb ht lb b fv lx lg l lh li">Users.ID= 2;</span><span id="bf02" class="ka kb ht lb b fv lx lg l lh li">Users.Gold = 1000;</span><span id="be2f" class="ka kb ht lb b fv lx lg l lh li">Users_result.push(</span><span id="8304" class="ka kb ht lb b fv lx lg l lh li">0x0000....) -1;</span><span id="262b" class="ka kb ht lb b fv lx lg l lh li">}</span></pre><p id="02cd" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">注意</strong>:映射只能有<strong class="is hu">存储类型</strong>，一般用于状态变量。</p><p id="3c37" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">映射可以标记为公共的。Solidity自动为它创建getter。</p><h2 id="6e3d" class="ka kb ht bd kc kd ke kf kg kh ki kj kk jb kl km kn jf ko kp kq jj kr ks kt ku dt translated">从映射中获取值</h2><p id="43a2" class="pw-post-body-paragraph iq ir ht is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hm dt translated">为了检索这些值，我们必须创建一个函数来返回添加到映射中的值。</p><pre class="jp jq jr js fq la lb lc ld aw le dt"><span id="9495" class="ka kb ht lb b fv lf lg l lh li">function get_result(</span><span id="297e" class="ka kb ht lb b fv lx lg l lh li">) view public<!-- --> <!-- -->returns (address[]) {</span><span id="63da" class="ka kb ht lb b fv lx lg l lh li">return<!-- --> <!-- -->users_result;</span><span id="dce9" class="ka kb ht lb b fv lx lg l lh li">}</span></pre><h2 id="3c1a" class="ka kb ht bd kc kd ke kf kg kh ki kj kk jb kl km kn jf ko kp kq jj kr ks kt ku dt translated">计数映射</h2><p id="14a5" class="pw-post-body-paragraph iq ir ht is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hm dt translated">为了得到映射的计数，我们需要得到它的长度。在这种情况下，我们使用<strong class="is hu">长度</strong></p><pre class="jp jq jr js fq la lb lc ld aw le dt"><span id="c8f9" class="ka kb ht lb b fv lf lg l lh li">function Count_Users(</span><span id="c8a1" class="ka kb ht lb b fv lx lg l lh li">) view public<!-- --> <!-- -->returns (uint) {</span><span id="12fb" class="ka kb ht lb b fv lx lg l lh li">return<!-- --> <!-- -->users_result.length;</span><span id="74a0" class="ka kb ht lb b fv lx lg l lh li">}</span></pre><h2 id="8a5a" class="ka kb ht bd kc kd ke kf kg kh ki kj kk jb kl km kn jf ko kp kq jj kr ks kt ku dt translated">限制</h2><ul class=""><li id="22ae" class="lj lk ht is b it kv ix kw jb ly jf lz jj ma jn lo lp lq lr dt translated">您不能不将变量定义为映射的_ValueType。</li><li id="32f6" class="lj lk ht is b it ls ix lt jb lu jf lv jj lw jn lo lp lq lr dt translated">您不能直接迭代映射</li><li id="d302" class="lj lk ht is b it ls ix lt jb lu jf lv jj lw jn lo lp lq lr dt translated">不可能像在Java中那样检索值或键的列表。原因仍然是一样的:所有的变量已经默认初始化。所以内部是不可能的。</li><li id="4e51" class="lj lk ht is b it ls ix lt jb lu jf lv jj lw jn lo lp lq lr dt translated">映射不能作为智能协定中公共和外部函数内的参数传递。</li><li id="305c" class="lj lk ht is b it ls ix lt jb lu jf lv jj lw jn lo lp lq lr dt translated">映射不能用作函数的返回值</li></ul><p id="96af" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">特别感谢<strong class="is hu">让·科维尔</strong></p><blockquote class="mb"><p id="42f2" class="mc md ht bd me mf mg mh mi mj mk jn ek translated">交易新手？尝试<a class="ae ml" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">加密交易机器人</a>或<a class="ae ml" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">复制交易</a></p></blockquote></div></div>    
</body>
</html>