<html>
<head>
<title>Lottery Smart Contract on CSC -Part1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">CSC上的彩票智能合同-第1部分</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/lottery-smart-contract-on-csc-part1-138322a5913d?source=collection_archive---------31-----------------------#2022-10-29">https://medium.com/coinmonks/lottery-smart-contract-on-csc-part1-138322a5913d?source=collection_archive---------31-----------------------#2022-10-29</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="3020" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">嘿嘿嘿！</p><p id="e31b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">ZeroXlive是为Coinex智能链学院而来😃</p><p id="9c16" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在本教程中，我们想写彩票智能合同使用Coinex智能链上的可靠性。留在我身边；)</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="fe ff jo"><img src="../Images/ad5f5886c590e06e022a359764163a8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x0L4Tz25CV7a9RDg2bZXIA.png"/></div></div></figure><h2 id="34ea" class="ka kb ht bd kc kd ke kf kg kh ki kj kk jb kl km kn jf ko kp kq jj kr ks kt ku dt translated">智能合同</h2><p id="22aa" class="pw-post-body-paragraph iq ir ht is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hm dt translated"><strong class="is hu">智能合同</strong>是一种计算机程序或交易协议，旨在根据合同或协议的条款自动执行、控制或记录与法律相关的事件和行为。智能合同的目标是减少对可信中间人的需求、仲裁成本和欺诈损失，以及减少恶意和意外例外。智能合约通常与加密货币相关联，以太坊推出的智能合约通常被认为是分散金融(DeFi)和NFT应用程序的基本构建模块。</p><p id="2866" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">自动售货机被认为是最古老的技术，相当于智能合同的实现。Vitalik Buterin在2014年发表的原始以太坊白皮书将比特币协议描述为Nick Szabo最初定义的智能合约概念的弱版本，并基于Solidity语言提出了更强的版本，即图灵完备。自比特币以来，各种加密货币都支持脚本语言，这些语言允许不受信任方之间签订更高级的智能合同。</p><p id="9824" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">本教程的目的是让你熟悉可靠性和智能合同写作的基本概念，并开始你的第一份智能合同。在这篇博客的结尾，你将拥有自己的彩票智能合约。</p><h2 id="b1b4" class="ka kb ht bd kc kd ke kf kg kh ki kj kk jb kl km kn jf ko kp kq jj kr ks kt ku dt translated">彩票智能合约</h2><p id="cf55" class="pw-post-body-paragraph iq ir ht is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hm dt translated">我们正在建立一个彩票智能合同，其中有两个主要实体，创作者和参赛者。参赛者支付将存储在智能合同中的报名费，并参加抽奖。创建者可以设置费用，更改费用，并决定何时宣布抽奖结果。当创建者自动结束抽奖时，存储在智能合同中的全部金额将被转移到抽奖的获胜者，该获胜者将从参赛者列表中随机选择。与传统的彩票系统不同，在传统的彩票系统中，创建者持有参赛者的资金，而在基于区块链的彩票系统中，资金保存在智能合同中，只有在选举结束时才能从智能合同中解除。</p><p id="d631" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">对于本教程，我们将有一个非常简单的环境，因为我们只对智能契约进行编码和手动测试，而不编写自动化测试。我们将使用一个简单的web IDE，名为<a class="ae la" href="https://ide.coinex.net" rel="noopener ugc nofollow" target="_blank"> Remix </a>。它是早期开发人员使用最多的工具之一。这是非常友好和简单的初学者。</p><h2 id="7b29" class="ka kb ht bd kc kd ke kf kg kh ki kj kk jb kl km kn jf ko kp kq jj kr ks kt ku dt translated">发展</h2><p id="1c73" class="pw-post-body-paragraph iq ir ht is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hm dt translated">精彩的部分终于来了。每个solidity smart合同的第一行都有一个注释，提到了所使用的标准和许可。下一行显示了这个合同使用的solidity版本。接下来，我们通过使用关键字<strong class="is hu"> contract </strong>后跟合同名称来定义合同。我们所有与此合同相关的代码都将放在这里。</p><pre class="jp jq jr js fq lb lc ld le aw lf dt"><span id="0a28" class="ka kb ht lc b fv lg lh l li lj">//SPDX-License-Identifier: MIT <br/>pragma solidity ^0.8.10;<br/>contract Lottery{<br/>  <br/>}</span></pre><p id="1b59" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">变量和构造函数</strong></p><p id="d397" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">接下来，我们定义将要使用的变量和构造函数。在我们的范围内，我们必须定义的唯一变量是所有者和竞争者的数组。我们还在这里定义了彩票的默认费用，业主可以随时更改这些费用。现在来看构造函数，这段代码只运行一次，也就是部署契约的时候。当我们部署智能合同时，我们希望部署合同的人是彩票的创建者。术语<em class="lk"> msg.sender </em>表示支付部署合同费用的地址。</p><pre class="jp jq jr js fq lb lc ld le aw lf dt"><span id="b4d7" class="ka kb ht lc b fv lg lh l li lj">address public creator;<br/>address payable[] public contestants;<br/>uint fees= 1 ether;</span><span id="03e6" class="ka kb ht lc b fv ll lh l li lj">constructor(){<br/>    creator = msg.sender;<br/>}</span></pre><p id="8caf" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">参赛者的地址属于payable类型，这意味着智能合约将能够支付这些地址的费用。这是因为任何地址都可以赢得彩票，智能合同应该能够向该地址付款。</p><p id="10ce" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">实度修改器</strong></p><p id="261b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">接下来，我们编写我们将在这个契约中使用的函数。这些函数中的大部分都可以被任何人调用，但是像结束选举或改变费用设置这样的一些函数只能被创建者调用。为了便于编码和不重复要求条件，坚固性有修饰词。它们用于向函数添加先决条件。作为编码实践，我们通常将修饰符放在契约的末尾。</p><pre class="jp jq jr js fq lb lc ld le aw lf dt"><span id="29b6" class="ka kb ht lc b fv lg lh l li lj">modifier onlyOwner() {<br/>      require(msg.sender == creator);<br/>      _;<br/>    }</span></pre><p id="c2ff" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">书写功能</strong></p><p id="b7d2" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">接下来，我们编写基本函数，如获取费用和设置费用函数。其逻辑非常简单，获取费用函数调用费用变量并返回费用值。由于该函数只查看值，不执行任何事务，因此不收取任何费用，并且我们添加了view关键字。对于固定费用，我们改变费用变量的值并更新它。因为只有创造者可以做到这一点，我们在这里添加我们的修改器。</p><pre class="jp jq jr js fq lb lc ld le aw lf dt"><span id="bcb3" class="ka kb ht lc b fv lg lh l li lj">function setFees(uint _fees) public onlyOwner  {         fees=_fees;     } function getFees() public view returns (uint)  {         return fees;     }</span></pre><blockquote class="lm"><p id="31d3" class="ln lo ht bd lp lq lr ls lt lu lv jn ek translated">交易新手？尝试<a class="ae la" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">加密交易机器人</a>或<a class="ae la" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">复制交易</a></p><p id="debb" class="ln lo ht bd lp lq lw lx ly lz ma jn ek translated">加入Coinmonks <a class="ae la" href="https://t.me/coincodecap" rel="noopener ugc nofollow" target="_blank">电报频道</a>和<a class="ae la" href="https://www.youtube.com/c/coinmonks/videos" rel="noopener ugc nofollow" target="_blank"> Youtube频道</a>获取每日<a class="ae la" href="http://coincodecap.com/" rel="noopener ugc nofollow" target="_blank">加密新闻</a></p></blockquote><h2 id="15d6" class="ka kb ht bd kc kd mb kf kg kh mc kj kk jb md km kn jf me kp kq jj mf ks kt ku dt translated">另外，阅读</h2><ul class=""><li id="20fb" class="mg mh ht is b it kv ix kw jb mi jf mj jj mk jn ml mm mn mo dt translated"><a class="ae la" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">复制交易</a> | <a class="ae la" rel="noopener" href="/coinmonks/crypto-tax-software-ed4b4810e338">加密税务软件</a></li><li id="723e" class="mg mh ht is b it mp ix mq jb mr jf ms jj mt jn ml mm mn mo dt translated"><a class="ae la" href="https://coincodecap.com/grid-trading" rel="noopener ugc nofollow" target="_blank">网格交易</a> | <a class="ae la" rel="noopener" href="/coinmonks/the-best-cryptocurrency-hardware-wallets-of-2020-e28b1c124069">加密硬件钱包</a></li><li id="874f" class="mg mh ht is b it mp ix mq jb mr jf ms jj mt jn ml mm mn mo dt translated"><a class="ae la" rel="noopener" href="/coinmonks/top-3-telegram-channels-for-crypto-traders-in-2021-8385f4411ff4">密码电报信号</a> | <a class="ae la" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">密码交易机器人</a></li><li id="f33b" class="mg mh ht is b it mp ix mq jb mr jf ms jj mt jn ml mm mn mo dt translated"><a class="ae la" rel="noopener" href="/coinmonks/crypto-exchange-dd2f9d6f3769">最佳加密交易所</a> | <a class="ae la" rel="noopener" href="/coinmonks/bitcoin-exchange-in-india-7f1fe79715c9">印度最佳加密交易所</a></li><li id="47a8" class="mg mh ht is b it mp ix mq jb mr jf ms jj mt jn ml mm mn mo dt translated"><a class="ae la" rel="noopener" href="/coinmonks/best-crypto-apis-for-developers-5efe3a597a9f">开发人员的最佳加密API</a></li><li id="b359" class="mg mh ht is b it mp ix mq jb mr jf ms jj mt jn ml mm mn mo dt translated">最佳<a class="ae la" rel="noopener" href="/coinmonks/top-5-crypto-lending-platforms-in-2020-that-you-need-to-know-a1b675cec3fa">密码借贷平台</a></li><li id="3c98" class="mg mh ht is b it mp ix mq jb mr jf ms jj mt jn ml mm mn mo dt translated"><a class="ae la" rel="noopener" href="/coinmonks/free-crypto-signals-48b25e61a8da">免费加密信号</a> | <a class="ae la" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">加密交易机器人</a></li><li id="9487" class="mg mh ht is b it mp ix mq jb mr jf ms jj mt jn ml mm mn mo dt translated">杠杆代币的终极指南</li></ul></div></div>    
</body>
</html>