<html>
<head>
<title>How to get Transactions of a wallet using Moralis</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Moralis进行钱包交易</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/how-to-get-transactions-of-a-wallet-using-moralis-8d90952e4a21?source=collection_archive---------12-----------------------#2022-12-08">https://medium.com/coinmonks/how-to-get-transactions-of-a-wallet-using-moralis-8d90952e4a21?source=collection_archive---------12-----------------------#2022-12-08</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><figure class="fi fk ir is it iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff iq"><img src="../Images/8286575a6c1a38173da841d66dd4456a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3cvImsmBvQMgLxb2khT64g.png"/></div></div></figure><p id="b120" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">在本教程中，我们将回顾如何利用Moralis事务API和NodeJS来检索钱包的所有本地事务。</p></div><div class="ab cl jz ka hb kb" role="separator"><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke"/></div><div class="hm hn ho hp hq"><p id="f149" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">要设置该应用程序，请遵循以下说明。</p><ol class=""><li id="6378" class="kg kh ht jd b je jf ji jj jm ki jq kj ju kk jy kl km kn ko dt translated"><strong class="jd hu">创建一个<em class="kp"> package.json </em>文件，如下图</strong></li></ol><pre class="kq kr ks kt fq ku kv kw bn kx ky bi"><span id="0a1e" class="kz la ht kv b be lb lc l ld le">npm init -y</span></pre><p id="bce3" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">2.<strong class="jd hu">安装</strong> <code class="eh lf lg lh kv b"><strong class="jd hu">moralis</strong></code> <strong class="jd hu">和</strong> <code class="eh lf lg lh kv b"><strong class="jd hu">@moralisweb3/evm-utils</strong></code> <strong class="jd hu">依赖关系如下</strong></p><pre class="kq kr ks kt fq ku kv kw bn kx ky bi"><span id="df5d" class="kz la ht kv b be lb lc l ld le">npm i moralis @moralisweb3/evm-utils</span></pre><p id="6c60" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">3.<strong class="jd hu">您的<em class="kp"> package.json </em>应该包含以下内容</strong></p><pre class="kq kr ks kt fq ku kv kw bn kx ky bi"><span id="07dc" class="kz la ht kv b be lb lc l li le">{<br/>  "name": "moralis-transactions",<br/>  "version": "1.0.0",<br/>  "description": "",<br/>  "main": "server.js",<br/>  "scripts": {<br/>    "start": "node server.js",<br/>    "test": "echo \"Error: no test specified\" &amp;&amp; exit 1"<br/>  },<br/>  "keywords": [],<br/>  "author": "",<br/>  "license": "ISC",<br/>  "dependencies": {<br/>    "@moralisweb3/evm-utils": "^2.7.4",<br/>    "dotenv": "^16.0.3",<br/>    "express": "^4.18.2",<br/>    "moralis": "^2.7.4"<br/>  }<br/>}</span></pre><p id="b791" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">4.<strong class="jd hu">创建一个<em class="kp">。包含道德规范<em class="kp">API _ KEY</em>T22】的env </em>文件</strong></p><pre class="kq kr ks kt fq ku kv kw bn kx ky bi"><span id="4793" class="kz la ht kv b be lb lc l ld le">API_KEY = “Your Moralis API Key”</span></pre><p id="3087" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">5.<strong class="jd hu">启动<em class="kp">server . js</em>T26】中的服务器</strong></p><pre class="kq kr ks kt fq ku kv kw bn kx ky bi"><span id="c505" class="kz la ht kv b be lb lc l li le">require('dotenv').config();<br/>const express = require('express');<br/><br/>const app = express();<br/><br/>app.use(express.json());<br/><br/>app.listen(8080, async () =&gt; {<br/>    console.log('server started');<br/>});</span></pre><p id="06de" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">6.<strong class="jd hu">启动<em class="kp">server . js</em>T30】中的Moralis</strong></p><pre class="kq kr ks kt fq ku kv kw bn kx ky bi"><span id="361b" class="kz la ht kv b be lb lc l li le">require('dotenv').config();<br/>const express = require('express');<br/>const Moralis = require('moralis').default;<br/><br/>const app = express();<br/>const { API_KEY } = process.env;<br/><br/>app.use(express.json())<br/><br/>async function startMoralis() {<br/>    try{<br/>        await Moralis.start({<br/>            apiKey: API_KEY,<br/>        });<br/>    }catch(err) {<br/>        console.log(err);<br/>    }<br/>}<br/><br/>app.listen(8080, async () =&gt; {<br/>    startMoralis();<br/>    console.log('server started');<br/>})</span></pre><p id="68aa" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">7.<strong class="jd hu">添加一个GET端点<em class="kp"> /transactions </em>来获取一个钱包的所有交易</strong></p><pre class="kq kr ks kt fq ku kv kw bn kx ky bi"><span id="a43b" class="kz la ht kv b be lb lc l li le">require('dotenv').config();<br/>const express = require('express');<br/>const Moralis = require('moralis').default;<br/>const { EvmChain } = require('@moralisweb3/evm-utils');<br/><br/>const app = express();<br/>const { API_KEY } = process.env;<br/><br/>app.use(express.json())<br/><br/>async function startMoralis() {<br/>    try{<br/>        await Moralis.start({<br/>            apiKey: API_KEY,<br/>        });<br/>    }catch(err) {<br/>        console.log(err);<br/>    }<br/>}<br/><br/>app.get('/transactions', async (req, res) =&gt; {<br/>    const chain = EvmChain.ETHEREUM;<br/>    const { address } = req.body;<br/>    try{<br/>     const response = await Moralis.EvmApi.transaction.getWalletTransactions({<br/>        address,<br/>        chain,<br/>     });<br/>     res.status(200).send(response.toJSON());<br/>    }catch(err) {<br/>        console.log(err);<br/>    }<br/>})<br/><br/>app.listen(8080, async () =&gt; {<br/>    startMoralis();<br/>    console.log('server started');<br/>})</span></pre><p id="ae44" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated"><strong class="jd hu"> 8。使用Postman </strong>测试端点</p><p id="0ae8" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">测试结果如下所示。在<code class="eh lf lg lh kv b">req.body.</code>给出钱包地址，交易按块号降序排列。在响应中，将首先显示最近的交易。</p><figure class="kq kr ks kt fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff lj"><img src="../Images/316bb75734612f8411a150aa86852eb6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c03-96JlNEk4ZhvUg-8OVQ.png"/></div></div></figure></div><div class="ab cl jz ka hb kb" role="separator"><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke"/></div><div class="hm hn ho hp hq"><h1 id="2669" class="lk la ht bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg dt translated">摘要</h1><p id="48b2" class="pw-post-body-paragraph jb jc ht jd b je mh jg jh ji mi jk jl jm mj jo jp jq mk js jt ju ml jw jx jy hm dt translated">至此，我们已经讨论了如何利用Moralis事务API和NodeJs来获取所有的钱包事务。开一个Moralis账户，玩玩他们的API。</p><blockquote class="mm"><p id="7957" class="mn mo ht bd mp mq mr ms mt mu mv jy ek translated">交易新手？尝试<a class="ae mw" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">加密交易机器人</a>或<a class="ae mw" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">复制交易</a></p></blockquote></div></div>    
</body>
</html>