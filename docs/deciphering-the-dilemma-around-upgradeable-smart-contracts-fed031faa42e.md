# 解读可升级智能合约的困境

> 原文：<https://medium.com/coinmonks/deciphering-the-dilemma-around-upgradeable-smart-contracts-fed031faa42e?source=collection_archive---------26----------------------->

![](img/61114aea4fab1f5a15e9cb08ab1e4db6.png)

Simon Cowell in a deep dilemma about Upgradeable Smart Contracts

嘿，范姆👋🏻

欢迎阅读另一篇关于可升级智能合约这一经典难题的快速帖子:

🔴我们甚至应该考虑可升级的智能合同吗？

🔴让智能合约尽可能简单不是更安全吗？额外的复杂性意味着更多的错误，对吗？

🔴但是，我们如何安全地开发可升级的智能合约呢？如果我们遇到存储冲突或升级不充分等问题，该怎么办？

🔴即使我们开发了，我们应该如何安全地升级它们？

…..

这类问题或困惑是我们无法为智能合约选择可升级功能的原因。

几天前我也参与了类似的讨论，因此我写了这篇短文来消除围绕可升级智能合约的一些困境。

**🤔想要开始开发他的智能合约的 Dev 1** 对于是否应该让它可升级感到非常困惑。

他认为他的智能合同在未来可能需要额外的功能，这就是为什么可升级合同可能是正确的选择。

然而，考虑到处理可升级合同的复杂性，他不确定是否应该继续进行。

**👨‍💻开发 2:**𝘜𝘱𝘨𝘳𝘢𝘥𝘦𝘢𝘣𝘭𝘦𝘤𝘰𝘯𝘵𝘳𝘢𝘤𝘵𝘴𝘢𝘳𝘦𝘯'𝘵𝘳𝘦𝘢𝘭𝘭𝘺𝘢𝘴𝘢𝘧𝘦𝘪𝘥𝘦𝘢𝘢𝘴𝘵𝘩𝘦𝘺𝘮𝘪𝘨𝘩𝘵𝘪𝘯𝘵𝘳𝘰𝘥𝘶𝘤𝘦𝘢𝘥𝘥𝘪𝘵𝘪𝘰𝘯𝘢𝘭𝘤𝘰𝘮𝘱𝘭𝘦𝘹𝘪𝘵𝘺𝘵𝘰𝘺𝘰𝘶𝘳𝘤𝘰𝘯𝘵𝘳𝘢𝘤𝘵𝘴𝘢𝘯𝘥𝘮𝘪𝘨𝘩𝘵𝘦𝘯𝘥𝘶𝘱𝘪𝘯𝘵𝘳𝘰𝘥𝘶𝘤𝘪𝘯𝘨𝘩𝘪𝘨𝘩-𝘴𝘦𝘷𝘦𝘳𝘪𝘵𝘺𝘣𝘶𝘨𝘴.

𝘩𝘦𝘳𝘦 𝘤𝘰𝘶𝘭𝘥 𝘣𝘦 𝘢 𝘣𝘶𝘨 𝘵𝘩𝘢𝘵 𝘭𝘦𝘢𝘥𝘴 𝘵𝘰 𝘴𝘵𝘰𝘳𝘢𝘨𝘦 𝘤𝘰𝘭𝘭𝘪𝘴𝘪𝘰𝘯𝘴 𝘰𝘳 𝘢𝘯 𝘪𝘯𝘢𝘥𝘦𝘲𝘶𝘢𝘵𝘦 𝘢𝘶𝘵𝘩𝘦𝘯𝘵𝘪𝘤𝘢𝘵𝘪𝘰𝘯 𝘱𝘳𝘰𝘤𝘦𝘥𝘶𝘳𝘦 𝘵𝘩𝘢𝘵 𝘢𝘭𝘭𝘰𝘸𝘴 𝘢𝘯𝘺𝘰𝘯𝘦 𝘵𝘰 𝘶𝘱𝘨𝘳𝘢𝘥𝘦, 𝘸𝘩𝘪𝘤𝘩 𝘱𝘶𝘵𝘴 𝘺𝘰𝘶𝘳 𝘢𝘴𝘴𝘦𝘵𝘴 𝘢𝘵 𝘳𝘪𝘴𝘬.

**👩‍💻𝘜𝘱𝘨𝘳𝘢𝘥𝘦𝘢𝘣𝘭𝘦𝘤𝘰𝘯𝘵𝘳𝘢𝘤𝘵𝘴𝘢𝘳𝘦𝘵𝘩𝘦𝘳𝘪𝘨𝘩𝘵𝘤𝘩𝘰𝘪𝘤𝘦.𝘐𝘧𝘺𝘰𝘶𝘢𝘳𝘦𝘯'𝘵𝘴𝘶𝘳𝘦𝘢𝘣𝘰𝘶𝘵𝘢𝘭𝘭𝘺𝘰𝘶𝘳𝘴𝘮𝘢𝘳𝘵𝘤𝘰𝘯𝘵𝘳𝘢𝘤𝘵𝘧𝘶𝘯𝘤𝘵𝘪𝘰𝘯𝘴𝘢𝘯𝘥𝘵𝘩𝘦𝘳𝘦𝘢𝘳𝘦𝘤𝘩𝘢𝘯𝘤𝘦𝘴𝘵𝘩𝘢𝘵𝘯𝘦𝘸𝘧𝘶𝘯𝘤𝘵𝘪𝘰𝘯𝘢𝘭𝘪𝘵𝘪𝘦𝘴𝘮𝘪𝘨𝘩𝘵𝘤𝘰𝘮𝘦𝘪𝘯**

𝘜𝘱𝘨𝘳𝘢𝘥𝘦𝘢𝘣𝘭𝘦 𝘤𝘰𝘯𝘵𝘳𝘢𝘤𝘵𝘴 𝘥𝘰 𝘩𝘦𝘭𝘱 𝘺𝘰𝘶 𝘧𝘪𝘹 𝘢𝘯𝘺 𝘣𝘶𝘨𝘴 𝘪𝘯 𝘴𝘮𝘢𝘳𝘵 𝘤𝘰𝘯𝘵𝘳𝘢𝘤𝘵𝘴 𝘸𝘩𝘪𝘤𝘩 𝘤𝘢𝘯’𝘵 𝘣𝘦 𝘰𝘷𝘦𝘳𝘭𝘰𝘰𝘬𝘦𝘥.

𝘈𝘥𝘥𝘪𝘵𝘪𝘰𝘯𝘢𝘭𝘭𝘺, 𝘪𝘵 𝘪𝘴𝘯’𝘵 𝘳𝘦𝘢𝘭𝘭𝘺 𝘵𝘩𝘢𝘵 𝘩𝘢𝘳𝘥 𝘵𝘰 𝘥𝘦𝘷𝘦𝘭𝘰𝘱 𝘶𝘱𝘨𝘳𝘢𝘥𝘦𝘢𝘣𝘭𝘦 𝘤𝘰𝘯𝘵𝘳𝘢𝘤𝘵𝘴, 𝘯𝘰𝘸 𝘵𝘩𝘢𝘵 𝘸𝘦 𝘩𝘢𝘷𝘦 𝘴𝘰𝘮𝘦 𝘳𝘦𝘢𝘭𝘭𝘺 𝘦𝘧𝘧𝘦𝘤𝘵𝘪𝘷𝘦 𝘭𝘪𝘣𝘳𝘢𝘳𝘪𝘦𝘴 𝘢𝘯𝘥 𝘵𝘰𝘰𝘭𝘴 𝘸𝘩𝘪𝘤𝘩 𝘦𝘯𝘴𝘶𝘳𝘦𝘴 𝘵𝘩𝘢𝘵 𝘪𝘴𝘴𝘶𝘦𝘴 𝘭𝘪𝘬𝘦 𝘴𝘵𝘰𝘳𝘢𝘨𝘦 𝘤𝘰𝘭𝘭𝘪𝘴𝘪𝘰𝘯𝘴, 𝘶𝘯𝘴𝘢𝘧𝘦 𝘶𝘱𝘨𝘳𝘢𝘥𝘦𝘴 𝘦𝘵𝘤 𝘢𝘳𝘦 𝘵𝘢𝘬𝘦𝘯 𝘤𝘢𝘳𝘦 𝘰𝘧.

# 我的 Thoughts🧐

⏩智能合约领域有一个众所周知的理论，即𝙊𝙣𝙚𝙨𝙝𝙤𝙪𝙡𝙙𝙠𝙚𝙚𝙥𝙩𝙝𝙚𝙞𝙧𝙨𝙢𝙖𝙧𝙩𝙘𝙤𝙣𝙩𝙧𝙖𝙘𝙩𝙖𝙨𝙨𝙞𝙢𝙥𝙡𝙚𝙖𝙨𝙥𝙤𝙨𝙨𝙞𝙗𝙡𝙚𝙖𝙨𝙖𝙙𝙙𝙞𝙣𝙜𝙘𝙤𝙢𝙥𝙡𝙚𝙭𝙞𝙩𝙮𝙢𝙞𝙜𝙝𝙩𝙞𝙣𝙩𝙧𝙤𝙙𝙪𝙘𝙚𝙣𝙚𝙬𝙗𝙪𝙜𝙨.

在某种程度上，这是非常正确的，因为我们并不需要每次都重新发明轮子，智能合同的安全性应该始终是重中之重。

⏩然而，尽管智能合约拥有处理资金或不可更改的惊人能力，但它们也是代码片段。代码中出现一些错误是不可避免的。

截至目前，𝗨𝗽𝗴𝗿𝗮𝗱𝗲𝗮𝗯𝗹𝗲𝗰𝗼𝗻𝘁𝗿𝗮𝗰𝘁𝘀𝗮𝗿𝗲𝗼𝗻𝗲𝗼𝗳𝘁𝗵𝗲𝗺𝗼𝘀𝘁𝗲𝗳𝗳𝗲𝗰𝘁𝗶𝘃𝗲𝘁𝗼𝗼𝗹𝘀𝘄𝗲𝗵𝗮𝘃𝗲𝗶𝗻𝗵𝗮𝗻𝗱𝗿𝗶𝗴𝗵𝘁𝗻𝗼𝘄𝘁𝗼𝗿𝗲𝘀𝗼𝗹𝘃𝗲𝘁𝗵𝗲𝘀𝗲𝗯𝘂𝗴𝘀𝗲𝘃𝗲𝗻𝗶𝗳𝗰𝗼𝗻𝘁𝗿𝗮𝗰𝘁𝘀𝗮𝗿𝗲𝗱𝗲𝗽𝗹𝗼𝘆𝗲𝗱，(*多数情况下*)。

⏩仅仅因为可升级契约可能会增加现有智能契约架构的复杂性而避免它们可能是一个坏主意，尤其是当您知道您可能需要一个时。

⏩ 𝙎𝙩𝙧𝙚𝙣𝙜𝙩𝙝𝙚𝙣𝙞𝙣𝙜 𝙤𝙪𝙧 𝙪𝙣𝙙𝙚𝙧𝙨𝙩𝙖𝙣𝙙𝙞𝙣𝙜 𝙤𝙛 𝙪𝙥𝙜𝙧𝙖𝙙𝙚𝙖𝙗𝙡𝙚 𝙨𝙢𝙖𝙧𝙩 𝙘𝙤𝙣𝙩𝙧𝙖𝙘𝙩𝙨 𝙞𝙨 𝙬𝙝𝙖𝙩 𝙬𝙚 𝙣𝙚𝙚𝙙 𝙖𝙣𝙙 𝙨𝙝𝙤𝙪𝙡𝙙 𝙥𝙧𝙚𝙛𝙚𝙧, 𝙞𝙣𝙨𝙩𝙚𝙖𝙙 𝙤𝙛 𝙖𝙫𝙤𝙞𝙙𝙞𝙣𝙜 𝙞𝙩.

⏩此外，我相信智能合约升级模式现在已经经历了一个漫长的旅程，从*永久存储*机制到最近的*透明可升级*代理或 *UUPS* 。

> 观看这段视频，欣赏非常酷的 [Thomas Wiesner](https://www.linkedin.com/in/thomas-wiesner?miniProfileUrn=urn%3Ali%3Afs_miniProfile%3AACoAABOQJNsBW-lrO5aLwFekDJE1QCz48k9r2NE) ，带我们领略可升级智能合约的整个旅程，以及它们如何随着时间的推移而演变。

因此，现在我们有了一个更安全的程序来升级合同和 Openzeppelin 提供的惊人的库和工具，这简化了整个程序。

*查看此宝可升级智能合约* [*此处*](https://docs.openzeppelin.com/upgrades-plugins/1.x/writing-upgradeable)*by*[*open zeppelin*](https://www.linkedin.com/company/openzeppelin/)*。*

⏩虽然不是每个合同都需要升级，但需要升级的合同应该是可升级的。

💡然而，这类合同的正确问题不是它们是否应该升级。

代替👇

## *我们应该如何安全地升级智能合约？*

🔴如果您将智能合约的所有可升级功能都集中到一个简单的地址(EOA)，那么它肯定不是一个安全的合约。

🔴升级这种智能合约的一个安全方法是使用代理合约和 Multisig，从而消除对升级的单一权威控制。

🔴通过链上治理进行升级是另一种安全、有效和分散的方式。

𝗪𝗵𝗮𝘁 𝗱𝗼 𝘆𝗼𝘂 𝘁𝗵𝗶𝗻𝗸? 🤔

请在下面留下您的评论，让我们尝试围绕可升级合同这一经典难题展开有效的讨论。👇

> 交易新手？试试[加密交易机器人](/coinmonks/crypto-trading-bot-c2ffce8acb2a)或者[复制交易](/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c)