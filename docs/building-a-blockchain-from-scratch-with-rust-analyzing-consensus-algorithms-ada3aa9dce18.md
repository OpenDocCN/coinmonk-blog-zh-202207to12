# 从零开始的区块链:分析共识算法

> 原文：<https://medium.com/coinmonks/building-a-blockchain-from-scratch-with-rust-analyzing-consensus-algorithms-ada3aa9dce18?source=collection_archive---------15----------------------->

本系列的[前一篇博文](https://rasha08.medium.com/building-a-blockchain-from-scratch-with-rust-basic-concepts-57fce8111873)介绍了区块链技术的基本概念和机制，包括共识算法、加密哈希和网络通信。在本帖中，我们将深入探讨其中一个关键概念:共识算法。

![](img/569cd6ac596021dc54f8390e842e335d.png)

共识算法是区块链技术的重要组成部分，因为它们允许网络就分类账的状态达成一致，并防止欺诈或篡改。已经开发了几种类型的一致性算法用于区块链网络，每种算法都有自己的优点和缺点。

这篇文章将概述区块链网络中常用的标准共识算法，包括工作证明、利害关系证明和委托利害关系证明。我们将讨论每种算法的优缺点。

总的来说，这篇文章将为对构建基于 Rust 的区块链应用程序感兴趣的读者提供有价值的信息，这些读者希望了解保护网络的不同选择。

> 交易新手？在[最佳加密交易](/coinmonks/crypto-exchange-dd2f9d6f3769)上尝试[加密交易机器人](/coinmonks/crypto-trading-bot-c2ffce8acb2a)或[复制交易](/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c)

# 工作证明

工作证明是一种共识算法，基于矿工竞争解决复杂计算问题的思想。矿工们试图解决的计算问题被设计成具有挑战性，但一旦解决了就容易验证。第一个解决问题的矿工可以将下面的方块添加到链中，并获得一定数量的硬币或代币作为奖励。这个过程消耗了大量的计算能力和能量，使得任何一个矿工或一组矿工都难以控制网络。

优点:

*   PoW 是一种成熟的技术，已经在许多流行的区块链中成功使用，比如比特币。
*   它有效地防止欺诈或篡改，因为在不解决计算问题的情况下创建新块是复杂的。
*   它是分散的，因为矿工可以用任何计算能力加入网络。

缺点:

*   PoW 是能量密集型的，需要大量的计算能力来解决计算问题。
*   这可能会很慢，因为矿工需要时间来解决问题和创造新的区块。
*   如果一小群矿工控制了网络中的大部分计算能力，那么它很容易受到集中化的影响。

# 利害关系证明

“赌注证明”是一种共识算法，其思想是根据节点在网络中投入的赌注(或硬币)数量选择节点来创建新块。在 PoS 系统中，节点被选中创建下一个块的概率与它们拥有的股份数量成正比。这与工作证明形成对比，工作证明的概率是基于矿工能够发挥的计算能力。

优点:

*   PoS 比 power 更节能，因为它不需要矿工解决计算问题。
*   它可能比 PoW 更快，因为节点创建新块需要的时间更少。
*   它更能抵抗集中化，需要更少的计算能力来参与网络。

缺点:

*   PoS 系统容易受到“无利害关系”攻击，在这种攻击中，节点没有诚实行为的动机，因为如果它们的阻塞被拒绝，它们不会有任何损失。
*   如果股权分布在网络中的节点之间不是均匀分布的，则更容易集中。

# 委托利益证明(dpo)

委托利害关系证明是一种共识算法，基于由网络选出的一组“代表”来创建块的思想。这些代表是根据他们在网络中投资的股份数量选择的，通常需要运行称为“验证器”的专门节点。

优点:

*   DPoS 系统比 PoW 或 PoS 系统更快、更有效，因为代表的数量通常小于网络中的节点数量。
*   它更抵制集权，因为代表是由网络选举产生的，如果他们不能很好地履行职责，可以被替换。

缺点:

*   如果代表选择过程不透明或不公平，DPoS 系统更容易受到集权化的影响。
*   它可能比其他共识算法实现起来更复杂。

# 安全问题

没有一致的算法可以完全避免安全风险和漏洞。本节将概述一些与共识算法相关的常见安全风险和漏洞，而不考虑所使用的具体算法。

**PoW 算法的潜在安全漏洞**

*   **51%攻击**:当单个矿工或一群矿工控制了网络中超过 50%的计算能力时，就会发生 51%攻击。这使他们能够比其他矿商更快地创造新的区块，这使他们能够双倍花费硬币，审查交易，甚至可能逆转交易。虽然这种攻击很少发生，但它们是可能的，并且已经发生在较小的战俘为主的区块链。
*   双重消费:当一个矿工创建了两个花费相同硬币的冲突交易时，就会发生双重消费。这可以通过创建一个新块来实现，该新块包括一个冲突的事务，同时阻止另一个事务进入网络。这使得矿工可以花同样的硬币两次，这破坏了区块链的完整性。
*   **自私采矿**:自私采矿发生在矿工从网络中扣留新的区块，以增加他们赢得下一个区块奖励的机会。这可能会让矿工获得不公平的优势，降低网络的整体安全性。
*   **集中化**:如果一小群矿工控制了网络中的大部分计算能力，PoW 算法就容易受到集中化的攻击。这可能导致权力和影响力的集中，从而破坏网络的分散性和安全性。

**PoS 算法的潜在安全漏洞**

*   **无利害关系**:当一个节点没有诚实行为的动机时，就会发生“无利害关系”攻击，因为如果它的阻塞被拒绝，它们不会有任何损失。这可能导致节点创建多个冲突块来获得不公平的优势，从而破坏区块链的完整性。
*   **利益研磨**:当一个节点创建多个虚假身份以获得对网络不成比例的影响力时，就会发生利益研磨。这可以允许节点控制更大部分的股份，并潜在地破坏网络的运行。
*   **桩子耗尽**:当网络中的桩子总量用尽时，发生桩子耗尽，这会阻止新块的产生。这可能导致网络停滞，降低网络的整体安全性。
*   **集中化**:如果赌注分布在网络中的节点之间不均匀，PoS 算法可能容易被集中化。这可能导致权力和影响力的集中，从而破坏网络的分散性和安全性。

**DPoS 算法的潜在安全漏洞**

*   **代理共谋**:当一组代理一起工作以获得对网络的不成比例的影响时，发生代理共谋。这可以让他们控制更大部分的股份，并有可能破坏网络的运作。
*   **代表冷漠**:代表冷漠发生在代表没有正确履行职责的时候，会降低网络的整体安全性和效率。
*   **集中化**:如果代表选择流程不透明或不公平，DPoS 算法很容易被集中化。这可能导致权力和影响力的集中，从而破坏网络的分散性和安全性。

**常见的潜在安全隐患相关联。**

*   **DoS 攻击**:当一个节点或一组节点故意用大量无效块或事务淹没网络，扰乱网络正常运行时，就会发生 DoS 攻击。这会降低网络速度，使合法交易更难处理。
*   Sybil 攻击:当一个节点或一组节点创建多个虚假身份以获得对网络的不相称影响时，就会发生 Sybil 攻击。这使得攻击者能够控制更大部分的股份，并有可能破坏网络的运行。
*   **区块链膨胀**:随着更多的区块被添加到链中，区块链的大小会随着时间的推移而显著增加。这使得新用户很难下载和验证整个区块链，降低了网络的整体安全性和分散性。

# 最后的话

总之，理解区块链技术的概念和机制对于任何想要构建自己的区块链应用程序的人来说都是至关重要的。共识算法、加密哈希和网络通信都是区块链的关键组件，深入了解这些机制如何构建安全可靠的区块链应用程序非常重要。

在这个博客系列文章中，我们提供了不同类型的共识算法的概述，包括工作证明、利益证明和委托利益证明。我们还讨论了每种算法的优缺点，并提供了使用每种算法的真实世界的区块链示例。

虽然每个共识算法都有其独特的优点和缺点，但为您的特定用例选择正确的算法非常重要。在本系列的下一篇博文中，我们将深入探讨这个主题，并探索如何为基于 Rust 的区块链应用程序选择正确的共识算法。敬请期待！

> *加入 Coinmonks* [*电报频道*](https://t.me/coincodecap) *和* [*Youtube 频道*](https://www.youtube.com/c/coinmonks/videos) *了解加密交易和投资*

# 另外，阅读

*   [Bookmap 点评](https://coincodecap.com/bookmap-review-2021-best-trading-software) | [美国 5 大最佳加密交易所](https://coincodecap.com/crypto-exchange-usa)
*   [密码交易机器人](/coinmonks/crypto-trading-bot-c2ffce8acb2a) | [造币评论](https://coincodecap.com/coingate-review)
*   最佳加密[硬件钱包](/coinmonks/hardware-wallets-dfa1211730c6) | [Bitbns 评论](/coinmonks/bitbns-review-38256a07e161)
*   [新加坡十大最佳加密交易所](https://coincodecap.com/crypto-exchange-in-singapore) | [购买 AXS](https://coincodecap.com/buy-axs-token)
*   [红狗赌场评论](https://coincodecap.com/red-dog-casino-review) | [Swyftx 评论](https://coincodecap.com/swyftx-review)