<html>
<head>
<title>Learn about Ethereum transactions and write your first Web3 SQL to extract data from the blockchain.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">了解以太坊交易并编写您的第一个Web3 SQL从区块链中提取数据。</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/learn-about-ethereum-transactions-and-write-your-first-web3-sql-to-extract-data-from-the-blockchain-8999e82c5467?source=collection_archive---------7-----------------------#2022-09-07">https://medium.com/coinmonks/learn-about-ethereum-transactions-and-write-your-first-web3-sql-to-extract-data-from-the-blockchain-8999e82c5467?source=collection_archive---------7-----------------------#2022-09-07</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><figure class="fi fk ir is it iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff iq"><img src="../Images/42fa107e07c79881e1788b53b3b8b493.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_5fPiHB8FtMa1neexoWxKQ.jpeg"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">Photo by <a class="ae jf" href="https://unsplash.com/@estherrj?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Esther Jiao</a> on <a class="ae jf" href="https://unsplash.com/s/photos/blocks?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h2 id="dd64" class="jg jh ht bd ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd dt translated">什么是交易？</h2><p id="e3b8" class="pw-post-body-paragraph ke kf ht kg b kh ki kj kk kl km kn ko jr kp kq kr jv ks kt ku jz kv kw kx ky hm dt translated">以太坊是一台执行智能契约并存储其数据(一般称为契约状态)的全局计算机。</p><p id="ec2d" class="pw-post-body-paragraph ke kf ht kg b kh kz kj kk kl la kn ko jr lb kq kr jv lc kt ku jz ld kw kx ky hm dt translated">除了智能合同的状态，它还存储帐户余额，即帐户拥有的ETH。</p><figure class="lf lg lh li fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff le"><img src="../Images/91fabbc8888f8035d26aa16cad740c43.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*UAOH_wXpJKrNYRJu.png"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">Ethereum Global State</figcaption></figure><p id="b293" class="pw-post-body-paragraph ke kf ht kg b kh kz kj kk kl la kn ko jr lb kq kr jv lc kt ku jz ld kw kx ky hm dt translated">以太坊的全局状态在以下三种情况下更新。</p><p id="31d3" class="pw-post-body-paragraph ke kf ht kg b kh kz kj kk kl la kn ko jr lb kq kr jv lc kt ku jz ld kw kx ky hm dt translated"><strong class="kg hu">交易类型一:创建智能合约</strong></p><p id="da84" class="pw-post-body-paragraph ke kf ht kg b kh kz kj kk kl la kn ko jr lb kq kr jv lc kt ku jz ld kw kx ky hm dt translated">为了在以太网上创建一个智能合同，用户签署并发送一个交易和代码。一旦交易被处理，以太坊虚拟机(也称为EVM)更新全局状态以存储新合同的代码和数据。</p><figure class="lf lg lh li fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff le"><img src="../Images/9f007620b649790467d0bf8a59f56007.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CcPrxEzbLXo0az_60FrZgg.png"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">Create Smart Contract Workflow</figcaption></figure><p id="02a5" class="pw-post-body-paragraph ke kf ht kg b kh kz kj kk kl la kn ko jr lb kq kr jv lc kt ku jz ld kw kx ky hm dt translated"><strong class="kg hu">交易类型二:调用智能合约</strong></p><p id="53cd" class="pw-post-body-paragraph ke kf ht kg b kh kz kj kk kl la kn ko jr lb kq kr jv lc kt ku jz ld kw kx ky hm dt translated">为了对现有契约执行操作，用户签署并发送一个事务来调用所需的方法和输入数据。处理后，EVM会更新合同数据以反映当前状态。</p><p id="4067" class="pw-post-body-paragraph ke kf ht kg b kh kz kj kk kl la kn ko jr lb kq kr jv lc kt ku jz ld kw kx ky hm dt translated">例如，当用户出售他们在特定合同中注册的NFT时，合同的状态将被更新以反映新的所有者。</p><figure class="lf lg lh li fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff le"><img src="../Images/05f30d4931bb64f24d14850453f2be70.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XMNBsge_NdspJsEt9Zr63g.png"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">Call Existing Contract Workflow</figcaption></figure><p id="1ecc" class="pw-post-body-paragraph ke kf ht kg b kh kz kj kk kl la kn ko jr lb kq kr jv lc kt ku jz ld kw kx ky hm dt translated"><strong class="kg hu">交易类型三:转账ETH </strong></p><p id="43f4" class="pw-post-body-paragraph ke kf ht kg b kh kz kj kk kl la kn ko jr lb kq kr jv lc kt ku jz ld kw kx ky hm dt translated">当一个用户将ETH转移给另一个用户时，帐户状态会更新以反映新的余额。</p><figure class="lf lg lh li fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff le"><img src="../Images/aab2cfcb91e8268a64fc8a6f8dbfbff6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VrUIdMPZrGYdnBsKU3XMBw.png"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">ETH Transfer Workflow</figcaption></figure><p id="2563" class="pw-post-body-paragraph ke kf ht kg b kh kz kj kk kl la kn ko jr lb kq kr jv lc kt ku jz ld kw kx ky hm dt translated">正如我们所见，以太坊网络的任何变化都是通过交易实现的。事务是外部用户与系统交互的手段。因此，通过测量交易量，我们可以观察网络的活跃程度。</p><p id="19fa" class="pw-post-body-paragraph ke kf ht kg b kh kz kj kk kl la kn ko jr lb kq kr jv lc kt ku jz ld kw kx ky hm dt translated">因为我们已经观察到每个事务都记录在块中(称为区块链)，所以我们可以通过查询块来计算出事务的总数。</p><p id="6480" class="pw-post-body-paragraph ke kf ht kg b kh kz kj kk kl la kn ko jr lb kq kr jv lc kt ku jz ld kw kx ky hm dt translated">Dune Analytics从块中提取事务数据，并将它们加载到<code class="eh lj lk ll lm b">ethereum.transactions</code>表中。</p><figure class="lf lg lh li fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff le"><img src="../Images/30d955b0ff66424213bbb6607f2f523e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*-TF4BlDJPLYut5Jc.png"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">Dune Analytics Data Load</figcaption></figure><p id="c58a" class="pw-post-body-paragraph ke kf ht kg b kh kz kj kk kl la kn ko jr lb kq kr jv lc kt ku jz ld kw kx ky hm dt translated">为了确定自开始以来的事务总数，我们可以只计算<code class="eh lj lk ll lm b">ethereum.transactions </code>表中的总行数。</p><pre class="lf lg lh li fq ln lm lo lp aw lq dt"><span id="58aa" class="jg jh ht lm b fv lr ls l lt lu">/* Query to retrieve total number of transactions in Ethereum */</span><span id="200d" class="jg jh ht lm b fv lv ls l lt lu">SELECT<br/>  --Divided by 1e9 to report results in billions<br/>  COUNT(*)/1e9 AS transactions_count<br/>FROM<br/>  ethereum.transactions;</span></pre><figure class="lf lg lh li fq iu fe ff paragraph-image"><div class="fe ff lw"><img src="../Images/58424ca7919b466462b76a54aee62e36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1308/format:webp/1*qazRM3EbR4TbOWj-ko5_5Q.png"/></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">Total Ethereum Transactions (as of sep’2022) Since Inception</figcaption></figure><p id="8e2a" class="pw-post-body-paragraph ke kf ht kg b kh kz kj kk kl la kn ko jr lb kq kr jv lc kt ku jz ld kw kx ky hm dt translated"><a class="ae jf" href="https://dune.com/queries/1028650" rel="noopener ugc nofollow" target="_blank">叉</a>上面的查询并创建你自己的图表。</p><p id="896f" class="pw-post-body-paragraph ke kf ht kg b kh kz kj kk kl la kn ko jr lb kq kr jv lc kt ku jz ld kw kx ky hm dt translated">我们研究了事务，并用三行代码创建了第一个查询，从公共区块链中提取数据。</p><p id="7796" class="pw-post-body-paragraph ke kf ht kg b kh kz kj kk kl la kn ko jr lb kq kr jv lc kt ku jz ld kw kx ky hm dt translated">关注更多关于web3/区块链数据分析的文章。</p></div><div class="ab cl lx ly hb lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="hm hn ho hp hq"><p id="d16d" class="pw-post-body-paragraph ke kf ht kg b kh kz kj kk kl la kn ko jr lb kq kr jv lc kt ku jz ld kw kx ky hm dt translated"><em class="me">原载于</em><a class="ae jf" href="https://www.twigblock.com/articles/eth-dune-transactions" rel="noopener ugc nofollow" target="_blank"><em class="me">https://www.twigblock.com</em></a><em class="me">。</em></p><blockquote class="mf"><p id="85ec" class="mg mh ht bd mi mj mk ml mm mn mo ky ek translated">交易新手？试试<a class="ae jf" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">加密交易机器人</a>或者<a class="ae jf" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">复制交易</a></p></blockquote></div></div>    
</body>
</html>