# åœ¨ Solidity æ™ºèƒ½åˆçº¦ä¸­å®ç°åµŒå¥—æ•°ç»„

> åŸæ–‡ï¼š<https://medium.com/coinmonks/implementing-nested-arrays-in-solidity-smart-contracts-514e05d251b8?source=collection_archive---------3----------------------->

## å……åˆ†å‘æŒ¥ç»“æ„ã€æ•°ç»„å’Œæ˜ å°„çš„æ½œåŠ›

![](img/fbe5265e9641d2a50aceb7bb49730b4c.png)

## ä»‹ç»

æ•°ç»„æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­æœ€æµè¡Œçš„æ•°æ®ç±»å‹ä¹‹ä¸€ã€‚æ ¹æ®å®šä¹‰ï¼Œæ•°ç»„æ˜¯ä¸€ç§åœ¨è‡ªèº«å†…éƒ¨å­˜å‚¨å…¶ä»–æ•°æ®ç±»å‹çš„å¤šä¸ªå˜é‡çš„æ•°æ®ç±»å‹ã€‚åœ¨å…¸å‹çš„é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­ï¼Œæ•°ç»„éå¸¸å¼ºå¤§ï¼Œå› ä¸ºå®ƒä»¬è¿˜å¯ä»¥å°†æ•°ç»„å­˜å‚¨åˆ°å‡ ä¹æ— é™çš„çº§åˆ«ã€‚æ•°ç»„ä¸­çš„æ•°ç»„ç§°ä¸ºåµŒå¥—æ•°ç»„ï¼Œæ˜¯ç°å®ç”Ÿæ´»ä¸­æ•°æ®çš„ç»ä½³è¡¨ç¤ºã€‚

ç„¶è€Œï¼ŒSolidity å¹¶ä¸æ˜¯çœŸæ­£çš„é¢å‘å¯¹è±¡è¯­è¨€(å®ƒæ˜¯ *contract* é¢å‘çš„),å®ƒçš„æ•°ç»„å®šä¹‰ä¸åŒã€‚é¦–å…ˆï¼Œsolidity ä¸­çš„æ•°ç»„åªèƒ½æ¥å—å•ä¸€çš„é¢„å®šä¹‰æ•°æ®ç±»å‹çš„å˜é‡ã€‚å› æ­¤ï¼Œuint æ•°ç»„åªèƒ½æ¥å— uint å€¼ï¼Œstring æ•°ç»„åªèƒ½æ¥å— string å˜é‡ï¼Œç­‰ç­‰ã€‚è€Œå®æ•°ç»„è‚¯å®šä¸èƒ½åœ¨è‡ªèº«å†…éƒ¨å®¹çº³å…¶ä»–æ•°ç»„ã€‚åµŒå¥—æ•°ç»„æ˜¯ä¸å¯èƒ½çš„ã€‚ä½œä¸ºä¸€ä¸ªä» Javaã€Python æˆ– JavaScript è¿‡æ¸¡åˆ° Solidity çš„ç¨‹åºå‘˜ï¼Œä¸€ä¸ªè¿«åœ¨çœ‰ç«çš„é—®é¢˜æ˜¯ï¼Œæˆ‘ä»¬ç©¶ç«Ÿå¦‚ä½•å®ç°åŒ…å«æ•°ç»„çš„æ•°ç»„æ¥æ„å»ºç»“æ„è‰¯å¥½çš„é“¾ä¸Šå…ƒæ•°æ®ï¼Ÿç­”æ¡ˆå¾ˆç®€å•ã€‚æˆ‘ä»¬ç»“åˆäº†ä¸¤ç§ç‹¬ç‰¹çš„æ•°æ®ç±»å‹ï¼Œç§°ä¸ºæ˜ å°„å’Œæ•°ç»„ç»“æ„ã€‚

## ä»€ä¹ˆæ˜¯ç»“æ„ï¼Ÿ

ç»“æ„æ˜¯ç”¨äºå®šä¹‰è®°å½•çš„å®ä½“æ•°æ®ç±»å‹ã€‚æ¢å¥è¯è¯´ï¼Œç»“æ„åŒ…å«ç‰¹å®šæ•°é‡çš„å˜é‡ï¼Œæ‰€æœ‰å˜é‡éƒ½æ˜¯é¢„å…ˆå£°æ˜çš„æ•°æ®ç±»å‹ã€‚ç»“æ„çš„å£°æ˜å¦‚ä¸‹æ‰€ç¤º:

```
struct People {
    string name;
    uint height_in_cm;
    bytes gender;
}
People memory yours_truly = People("Peter Ogwara", 155, "m"); 
```

å› æ­¤ï¼Œstruct å£°æ˜ä»…ä»…ç»™å‡ºäº†ä¸€ä¸ªå¯ä»¥åˆ›å»ºå®ƒçš„å®ä¾‹çš„æ¨¡å‹ï¼Œæ¯”å¦‚ä¸Šé¢çš„ yours_tulyã€‚

## ä»€ä¹ˆæ˜¯æ˜ å°„ï¼Ÿ

æ˜ å°„æ˜¯ä¸€ç§æ•°æ®ç±»å‹ï¼Œå®ƒä½¿ä¸€ç§æ•°æ®ç±»å‹çš„å®ä¾‹èƒ½å¤Ÿä¸å¦ä¸€ç§æ•°æ®ç±»å‹ç›¸åŒ¹é…ã€‚ä¾‹å¦‚ï¼Œä»£è¡¨å”¯ä¸€ç”¨æˆ· id çš„ uint å¯ä»¥ä¸ä»£è¡¨å¹´é¾„çš„ uint çš„åœ°å€æˆ–ä»£è¡¨å§“åçš„å­—ç¬¦ä¸²é…å¯¹ã€‚ERC ä»¤ç‰Œä½¿ç”¨è¯¥æ•°æ®ç±»å‹æ¥è®°å½•æ¯ä¸ªåœ°å€çš„ä»¤ç‰Œä½™é¢ã€‚æ˜ å°„çš„å£°æ˜å’Œè®¾ç½®å¦‚ä¸‹:

```
mapping(uint=>string) user_id_to_username;
uint id = 1;
user_id_to_username[id] = "peterogwara";
```

è¦è°ƒç”¨æ˜ å°„ä¸­çš„ä¿¡æ¯ï¼Œåªéœ€è¦ç¬¬ä¸€ä¸ªå˜é‡çš„å€¼ã€‚ä¾‹å¦‚ï¼Œè¦ä½¿ç”¨ä¸Šé¢çš„æ˜ å°„æ¥è·å– id ä¸º 1 çš„ç”¨æˆ·çš„ç”¨æˆ·åï¼Œæˆ‘ä»¬éœ€è¦æ‰§è¡Œä»¥ä¸‹æ“ä½œã€‚

```
uint id = 1;
username = user_id_to_username[id] //This will return "peterogwara"
```

## ç”¨ç»“æ„ç»„åˆæ•°ç»„å’Œæ˜ å°„

æœ‰è¶£çš„éƒ¨åˆ†æ¥äº†ã€‚ç»“æ„å’Œæ˜ å°„å¯ä»¥ç»„åˆï¼è¦åˆ›å»ºä¸€ä¸ªä¸€çº§åµŒå¥—æ•°ç»„ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä»»ä½•åŸå§‹æ•°æ®ç±»å‹åˆ°ç»“æ„çš„æ˜ å°„ã€‚ç»§ç»­ä¸Šé¢å®šä¹‰çš„äººå‘˜ç»“æ„å’ŒæƒŸä¸€ id çš„æ¦‚å¿µï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­:

```
mapping(uint=>People) user_id_to_details;
```

è¿™ä¸ªå”¯ä¸€çš„ id å¯ä»¥ç”¨æ¥è°ƒç”¨æ¯”å•ä¸ªç”¨æˆ·åæ›´å¤šçš„ç»†èŠ‚ã€‚å½“ç„¶ï¼Œä»»ä½•æ•°é‡çš„å˜é‡éƒ½å¯ä»¥æ·»åŠ åˆ°è¿™ä¸ªç»“æ„ä¸­ï¼Œä½¿å®ƒåœ¨å®šä¹‰ä¸€ä¸ªäººæ—¶æ›´åŠ å…¨é¢ã€‚è¯·æ³¨æ„ï¼Œæ˜ å°„åŒ…æ‹¬ç»“æ„çš„ç‰¹å®šåç§°(People)ï¼Œè€Œä¸ä»…ä»…æ˜¯â€œstructâ€ã€‚

## æ·±å…¥åˆ°æ›´å¤šå±‚æ¬¡

ç„¶è€Œï¼Œå‡è®¾æˆ‘ä»¬æƒ³åœ¨ä»–ä»¬çš„è¯¦ç»†ä¿¡æ¯ä¸­åŒ…å«æ¯ä¸ªäººçš„æŠ€æœ¯å †æ ˆåˆ—è¡¨å’Œä»–ä»¬å® ç‰©çŒ«çš„è¯¦ç»†ä¿¡æ¯ã€‚æˆ‘ä»¬å¿…é¡»å†æ·±å…¥ä¸€å±‚ã€‚è¿™å¯ä»¥é€šè¿‡åœ¨ people ç»“æ„ä¸­ä¸º tech å †æ ˆå£°æ˜ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„æ¥å®ç°ã€‚ä¸å¹¸çš„æ˜¯ï¼Œæˆ‘ä»¬ä¸èƒ½åœ¨ç»“æ„ä¸­åŒ…å«ç»“æ„ï¼Œä¹Ÿä¸èƒ½åœ¨ç»“æ„ä¸­åŒ…å«åµŒå¥—æ˜ å°„ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºç›¸åŒçš„ç›®çš„æ„é€ å•ç‹¬çš„ç»“æ„ï¼Œå¹¶åœ¨åŸå§‹ç»“æ„ä¸­ä½¿ç”¨æ•°ç»„æ¥è·Ÿè¸ªå®ƒä»¬ï¼Œä»è€Œåœ¨ People ç»“æ„ä¸­åˆ›å»º CatDetails ç»“æ„å’Œ CatDetails æ•°ç»„ã€‚æˆ‘ä»¬çš„ä»£ç åº”è¯¥æ˜¯è¿™æ ·çš„:

```
uint userCount;
string[] _techstack;
CatDetails[] _cats;struct People {
    string name;
    uint height;
    bytes gender;
    string[] tech_stack;
    CatDetails[] cats;
}
struct CatDetails {
    string name;
    uint age;
    string color;
}
mapping (uint=>People) user_id_to_details;
```

ç„¶åï¼Œé€šè¿‡é¦–å…ˆå£°æ˜æœ€å†…éƒ¨çš„æ•°ç»„å¹¶è®¾ç½®å…¶å€¼ï¼Œç„¶åå¯¹æœ€å¤–å±‚çš„ç»“æ„è¿›è¡ŒåŒæ ·çš„æ“ä½œï¼Œå¯ä»¥è®¾ç½®å˜é‡å€¼ã€‚å¥‘çº¦å¼€å§‹æ—¶å£°æ˜çš„å…¨å±€æ•°ç»„ä¸ºå‡½æ•°å†…å£°æ˜æä¾›äº†ä¸€ä¸ªæŒ‡å‘çš„å­˜å‚¨ä½ç½®ã€‚

```
function setUser() public {
    uint userId = userCount++;
    string[] storage my_techstack = _techstack;
    my_techstack.push("Python");
    my_techstack.push("JavaScript");
    my_techstack.push("Solidity");
    CatDetails[] storage cats = _cats;
    CatDetails memory firstcat = CatDetails("Snuffles", 3, 'white');
    cats.push(firstcat);
        CatDetails memory secondcat = CatDetails("Garfield", 5, 'orange');
    cats.push(secondcat);
People memory yours_truly = People("Peter M. Ogwara", 155, "m", my_techstack, cats);
    user_id_to_details[userId] = yours_truly;
}
```

å°±è¿™æ ·ï¼Œæˆ‘ä»¬æœ‰äº†åµŒå¥—çš„æ•°ç»„/ç»“æ„ï¼è°ƒç”¨æ•°æ®éå¸¸ç®€å•ï¼Œå¹¶ä¸”ä»¥ä¼ ç»Ÿçš„æ˜ å°„/ç»“æ„/æ•°ç»„è°ƒç”¨æ ¼å¼å®Œæˆã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„è¡Œå°†è¿”å›ç”¨æˆ·#1 çš„ç¬¬äºŒåªçŒ«çš„åå­—ã€‚

```
return user_id_to_details[1].my_cats[1].name;
```

æœ€åï¼Œåœ¨è°ƒç”¨å€¼ä¹‹å‰ï¼Œç¡®ä¿åŒ…å«æ£€æŸ¥ä»¥ç¡®ä¿ç´¢å¼•å­˜åœ¨ã€‚

**ğŸŒŸæ¬¢è¿æé—®ï¼ğŸŒŸ**

*å…³æ³¨æˆ‘äº†è§£æ›´å¤šåŒºå—é“¾ã€Javascriptã€PHPã€Python æˆ–çº¯ç¼–ç¨‹æ•…äº‹ã€‚*

[ä¸­](/@peterogwara) | [æ¨ç‰¹](https://twitter.com/petermarie_) | [Github](https://github.com/PeterMarie) | [äºšé©¬é€Š](https://www.amazon.com/author/peterogwara)

> äº¤æ˜“æ–°æ‰‹ï¼Ÿå°è¯•[åŠ å¯†äº¤æ˜“æœºå™¨äºº](/coinmonks/crypto-trading-bot-c2ffce8acb2a)æˆ–[å¤åˆ¶äº¤æ˜“](/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c)