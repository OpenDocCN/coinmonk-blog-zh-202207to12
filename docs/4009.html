<html>
<head>
<title>How are DeFi protocols compromised?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">DeFi协议是如何泄露的？</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/how-are-defi-protocols-compromised-fac9d23497f8?source=collection_archive---------42-----------------------#2022-09-21">https://medium.com/coinmonks/how-are-defi-protocols-compromised-fac9d23497f8?source=collection_archive---------42-----------------------#2022-09-21</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="182c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">根据最近的研究，2022年，DeFi和Web3已经因违规和欺诈损失了20亿美元。自第二季度损失率下降以来，加密货币价值的下降可能已经让用户和黑客都失去了兴趣。</p><p id="fbd1" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">DeFi协议特别容易被黑客攻击，因为它们的开源代码可供网络罪犯研究以寻找漏洞，并且协议进入市场和快速扩张的动机很可能导致它们在宽松的安全最佳实践方面犯错误。</p><p id="ef5d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">直到2021年，密码交换安全系统的入侵是最常见的加密货币盗窃方法；目前，DeFi黑客更加普遍。</p><p id="667f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">最致命的DeFi攻击发生在3月份，当时Ronin网络被攻破，导致超过6.5亿美元的加密货币通过Tornado Cash mixer从广受欢迎的Axie Infinity NFT(不可替换令牌)游戏中被洗钱。根据Crystal的数据，该服务在2022年上半年收到了约350，000个以太网(ETH)，超过了所有通过Tornado Cash进行的ETH的一半。</p><p id="de5b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">就美元而言，以太坊区块链站被盗金额最大，这可能是因为它是使用最广泛的DeFi平台。紧随其后的是索拉纳、币安智能链、Fantom和Polygon。</p><p id="9907" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">【2022年1月开始——Crypto.com黑客</p><p id="1c2b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">Crypto.com的风险监控系统在2022年1月17日星期一发现了少量用户帐户上的未经授权的活动。交易在用户没有进入2FA认证控制的情况下被批准。为了确保只有经过授权的活动才会发生，Crypto.com撤销了所有客户的2FA令牌，并引入了额外的安全强化措施。因此，所有客户都必须重新登录并设置他们的2FA令牌。2FA的实现提高了用户凭证和用户可以访问的资源的安全性。与依赖单因素身份认证(SFA)的身份认证技术相比，双因素身份认证提供了更好的安全性，在单因素身份认证中，用户只需提供一个参数，通常是密码。为了采用双因素身份验证，用户必须提供密码作为第一个因素和另一个不同的因素，通常是安全令牌或生物特征因素，如指纹或面部扫描。黑客把所有的资金都退回来了。</p><p id="4e08" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">量子比特金融黑客</strong></p><p id="7b27" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">黑客获得了建立在币安智能链上的量子金融，并从中窃取了8000多万美元。从量子比特的QBridge协议中，与攻击相关的地址窃取了206，809个币安硬币(BNB)。</p><p id="dbfc" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">Qubit Finance利用区块链的速度、自动化和安全性有效、安全地连接贷款人和借款人，将自己表现为一个分散的货币市场平台。</p><p id="b763" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">Qubit Finance除了提供借贷服务之外，还运行以太坊-BSC桥梁。这个漏洞的目标是这座桥。在量子金融提供的桥的情况下，你将你的ERC-20代币存入桥，作为交换，你可以在币安智能链上使用BEP-20代币。</p><p id="3aa3" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在没有任何ETH链接到该交易的情况下，攻击者使用了QBridge合约的deposit()函数。攻击者在函数调用过程中输入了恶意数据。<strong class="is hu"> </strong>数据参数必须指定在发出具有该值的事件之前已经存放了多少以太币。在BSC上，根据存放在以太坊桥中的ETH数量，生成特定数量的量子位xETH。它根据QBridge契约的存款逻辑调用IQBridgeHandler。原始令牌地址WETH令牌应发送到QBridgeHandler，如果发送tx的用户不持有WETH令牌，则不应进行传输。“总之，存款功能是一个一旦存款被创建就不应该使用的功能，然而它仍然存在于合同中。</p><p id="e6fc" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><em class="jo">黑客利用量子金融代码中的逻辑缺陷，能够在币安智能链上输入欺诈数据并提取代币，而以太坊上没有代币。</em></p><h1 id="7a27" class="jp jq ht bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km dt translated">现金剥削</h1><p id="18a2" class="pw-post-body-paragraph iq ir ht is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hm dt translated">黑客首先使用他的20亿个未识别代币铸造了20亿个现金代币。这个动作之所以可行，是因为Cashio的代码中有一个bug。</p><p id="906a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">请记住，为了兑现现金，客户必须首先存入同等价值的抵押品。简而言之，在整个存款过程中，将执行一轮验证，以确保协议账户和担保账户持有相同的令牌类型。如果不是这样，传输将被停止。可悲的是，Cashio忽视了为其使用的账户建立信任基础。因此，验证程序变得无效，黑客能够创建一个虚构的帐户网络，并铸造惊人的20亿现金代币。</p><p id="b917" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">黑客通过Cashio平台烧毁了Cashio存款中所有基础萨伯·USDT-USDC LP代币的20亿新铸造现金代币中的一部分，基本上耗尽了Cashio的所有stablecoin存款。黑客随后通过Solana的Saber协议将上述所有USDT-USDC LP令牌交换为1640万美元的USDC和1080万美元的USDT。</p><p id="4974" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">然后，黑客使用Saber将所有现金令牌分别兑换成860万美元的UST和1700万美元的USDC。这很快使现金代币的公开市场价格降至零。在USDC、USDT和UST从Cashio和Saber窃取总计5280万美元后，黑客使用Solana上的Jupiter流动性聚合器将USDC和USDT的1530万美元转换为3,773.9737 ETH。然后这个以太网通过虫洞桥在三次交易中被发送到一个以太坊地址。黑客随后使用Jupiter将另外2100万美元的USDC转换为2050万美元的UST，然后使用虫洞桥将2900万美元的UST和最后790万美元的USDC发送到同一个以太坊钱包地址。</p><p id="cf5e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">豆茎攻击</strong></p><p id="d167" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">该协议的多数表决治理方案被攻击者利用，攻击者利用一个漏洞作为整个攻击的基础。简单地说，任何拥有2/3(绝对多数)选票的人都有能力在任何时候通过BIP法案。</p><p id="07e5" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">由于通过套利交易赚钱的有趣可能性，闪贷在DeFi越来越受欢迎。然而，DeFi是许多黑客的家园，他们利用这些贷款窃取大量的加密货币。(快速贷款不需要抵押品，因为初始贷款必须在交易结束时归还。)如果借款人无法保证还款，则交易失败。</p><p id="cd07" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">10亿美元的紧急贷款用于从Aave购买3.5亿台DAI、5亿台和1.5亿台，从Uniswap v2购买3200万台BEAN，从SushiSwap购买1160万台。</p><p id="3988" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">10亿美元的紧急贷款用于从Aave购买3.5亿台DAI、5亿台和1.5亿台，从Uniswap v2购买3200万台BEAN，从SushiSwap购买1160万台。在使用BEAN进行治理投票的曲线池中，这些令牌被用来增加流动性。为了创建BEAN3CRV-f，攻击者首先使用戴、、制造了3CRV。然后，由于将3200万美元的BEAN和2500万美元的LUSD存入另一个合同，创建了一个新的令牌BEAN3LUSD-f。</p><p id="678c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">然后，攻击者将上述资产放入豆茎筒仓中，在那里他们能够收集足够的茎和种子，以控制70%的流通(LP存款人每存一粒豆获得的种子是豆存款的两倍)。有了这个份额，攻击者就能够使用emergencyCommit函数并获得2/3的绝对多数票。</p><p id="6ce4" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">攻击者现在部署并批准了一个伪造的协议改进提案(BIP18 ),耗尽了池资金并将令牌(BEAN/WETH-BEAN LP/BEAN 3 crv-f/BEANLUSD-f)转移给了攻击者。攻击者能够通过使用硬币混合工具TornadoCash来实现这一点，以获得24,830 WETH的利润(约7600万美元；剩余的1.06亿美元用于偿还给AAVE的紧急贷款。</p><p id="20d8" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">通过让人们认为BIP18专门用于为乌克兰捐款地址收集捐款，攻击者成功地误导了社区。emergencyCommit函数帮助攻击者在投票后立即执行计划，就这样，Beanstalk损失了1 . 82亿美元。一旦攻击者通过闪贷获得了多数治理份额。</p><p id="e861" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">幕后</strong></p><p id="f007" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">黑客的标准工具包使他们能够从网络的主版本中获得区块链的完整副本，然后完全微调一个漏洞，就好像它发生在真实的网络中一样。黑客经常利用第三方服务和商业逻辑数学模型中的缺陷。智能合同创建者在交易时经常需要比他们现在可能拥有的更多的相关信息。结果，他们被迫使用外部资源，比如神谕。这些服务在不可靠的环境中无法正常工作，因此使用它们会带来巨大的风险。尽管许多开发人员缺乏必要的技能，但他们仍然试图快速部署项目。由于智能合约的开源性质，黑客可以很容易地复制并对其进行微小的更改。</p><p id="e6f9" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">价格操纵是闪贷攻击的常见组成部分。攻击者可以通过在一次交易中出售大量借来的代币来降低它们的价格，然后在代币的价值非常低时对其进行各种操作，然后再购回它们。</p><blockquote class="ks"><p id="ef8a" class="kt ku ht bd kv kw kx ky kz la lb jn ek translated">加入Coinmonks <a class="ae lc" href="https://t.me/coincodecap" rel="noopener ugc nofollow" target="_blank">电报频道</a>和<a class="ae lc" href="https://www.youtube.com/c/coinmonks/videos" rel="noopener ugc nofollow" target="_blank"> Youtube频道</a>了解加密交易和投资</p></blockquote><h1 id="c50f" class="jp jq ht bd jr js jt ju jv jw jx jy jz ka ld kc kd ke le kg kh ki lf kk kl km dt translated">另外，阅读</h1><ul class=""><li id="be9f" class="lg lh ht is b it kn ix ko jb li jf lj jj lk jn ll lm ln lo dt translated"><a class="ae lc" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">加密复制交易平台</a> | <a class="ae lc" href="https://coincodecap.com/blockfi-alternatives" rel="noopener ugc nofollow" target="_blank">五大BlockFi替代方案</a></li><li id="e06e" class="lg lh ht is b it lp ix lq jb lr jf ls jj lt jn ll lm ln lo dt translated"><a class="ae lc" href="https://coincodecap.com/coinloan-review" rel="noopener ugc nofollow" target="_blank"> CoinLoan点评</a>|<a class="ae lc" rel="noopener" href="/coinmonks/crypto-com-review-f143dca1f74c">Crypto.com点评</a> | <a class="ae lc" rel="noopener" href="/coinmonks/huobi-margin-trading-b3b06cdc1519">火币保证金交易</a></li><li id="1b01" class="lg lh ht is b it lp ix lq jb lr jf ls jj lt jn ll lm ln lo dt translated"><a class="ae lc" href="https://coincodecap.com/bybit-binance-moonxbt" rel="noopener ugc nofollow" target="_blank"> Bybit vs币安</a>|<a class="ae lc" rel="noopener" href="/coinmonks/stealthex-review-396c67309988">stealth x回顾</a> | <a class="ae lc" href="https://coincodecap.com/probit-review" rel="noopener ugc nofollow" target="_blank"> Probit回顾</a></li><li id="d1a5" class="lg lh ht is b it lp ix lq jb lr jf ls jj lt jn ll lm ln lo dt translated"><a class="ae lc" href="https://coincodecap.com/blockchain-courses" rel="noopener ugc nofollow" target="_blank">顶级付费加密货币和区块链课程</a></li><li id="0456" class="lg lh ht is b it lp ix lq jb lr jf ls jj lt jn ll lm ln lo dt translated"><a class="ae lc" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">密码交易机器人</a>|<a class="ae lc" href="https://coincodecap.com/p2e-nft-games" rel="noopener ugc nofollow" target="_blank">15大P2E NFT游戏</a></li></ul></div></div>    
</body>
</html>