<html>
<head>
<title>Checking CSC Network Using React JS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用React JS检查CSC网络</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/checking-csc-network-using-react-js-be27a0a88afe?source=collection_archive---------25-----------------------#2022-07-27">https://medium.com/coinmonks/checking-csc-network-using-react-js-be27a0a88afe?source=collection_archive---------25-----------------------#2022-07-27</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="d908" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">您是否有针对dapp前端的react项目，并希望强制用户使用特定网络？在本教程中，我们希望使用react来创建dapp的前端，并检查csc网络是否为所选网络。</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div class="fe ff jo"><img src="../Images/415f93b31c8c7968557389aab6ccc44a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*9U9tAJHGwW1Ez1MWZR7Paw.png"/></div><figcaption class="jw jx fg fe ff jy jz bd b be z ek">Image by Boskampi from Pixabay</figcaption></figure><h2 id="3721" class="ka kb ht bd kc kd ke kf kg kh ki kj kk jb kl km kn jf ko kp kq jj kr ks kt ku dt translated">反应</h2><p id="0315" class="pw-post-body-paragraph iq ir ht is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hm dt translated"><a class="ae la" href="http://reactjs.org" rel="noopener ugc nofollow" target="_blank"> React </a>是一个免费开源的前端JavaScript库。用于基于UI组件构建用户界面。它由Meta(以前的脸书)和一个由个人开发者和公司组成的社区维护。React可以作为使用Next.js等框架开发单页面、移动或服务器呈现的应用程序的基础。但是，React只关心状态管理并将状态呈现给DOM，因此创建React应用程序通常需要使用额外的路由库以及某些客户端功能。</p><h2 id="b4f5" class="ka kb ht bd kc kd ke kf kg kh ki kj kk jb kl km kn jf ko kp kq jj kr ks kt ku dt translated">要求</h2><ul class=""><li id="d67e" class="lb lc ht is b it kv ix kw jb ld jf le jj lf jn lg lh li lj dt translated">节点<code class="eh lk ll lm ln b">latest</code>版本</li><li id="0e93" class="lb lc ht is b it lo ix lp jb lq jf lr jj ls jn lg lh li lj dt translated">npm <code class="eh lk ll lm ln b">latest</code>版本</li></ul><h2 id="2f51" class="ka kb ht bd kc kd ke kf kg kh ki kj kk jb kl km kn jf ko kp kq jj kr ks kt ku dt translated">装置</h2><p id="67ad" class="pw-post-body-paragraph iq ir ht is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hm dt translated">首先，我们为项目创建一个目录:</p><pre class="jp jq jr js fq lt ln lu lv aw lw dt"><span id="71fc" class="ka kb ht ln b fv lx ly l lz ma">mkdir react<br/>cd react</span></pre><p id="478e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">为了安装react js，我们使用npm包管理器:</p><pre class="jp jq jr js fq lt ln lu lv aw lw dt"><span id="ea8f" class="ka kb ht ln b fv lx ly l lz ma">npm install -g create-react-app</span></pre><p id="2e50" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">将react和ethers js导入我们的项目。将此代码放在代码的上方:</p><pre class="jp jq jr js fq lt ln lu lv aw lw dt"><span id="c5dd" class="ka kb ht ln b fv lx ly l lz ma">import React, { useEffect, useState } from “react”; import { ethers } from “ethers”;</span></pre><h2 id="639c" class="ka kb ht bd kc kd ke kf kg kh ki kj kk jb kl km kn jf ko kp kq jj kr ks kt ku dt translated">检查元掩码</h2><p id="e686" class="pw-post-body-paragraph iq ir ht is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hm dt translated">要检查浏览器上的元掩码安装，我们应该确保能够访问window.ethereum:</p><pre class="jp jq jr js fq lt ln lu lv aw lw dt"><span id="ff72" class="ka kb ht ln b fv lx ly l lz ma">const checkIfWalletIsConnected = async () =&gt; {                                                              const { ethereum } = window;                                                               if (!ethereum) {                                   console.log("Make sure you have MetaMask!");                                   return;                                 } else {                                   console.log("We have the ethereum object", ethereum);                                 }</span></pre><p id="4485" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">检查我们是否有权访问用户的钱包:</p><pre class="jp jq jr js fq lt ln lu lv aw lw dt"><span id="e89e" class="ka kb ht ln b fv lx ly l lz ma">const accounts = await ethereum.request({ method: “eth_accounts” });</span></pre><p id="9e40" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在我们检查链id:</p><pre class="jp jq jr js fq lt ln lu lv aw lw dt"><span id="b6c3" class="ka kb ht ln b fv lx ly l lz ma">const chainId = await ethereum.request({ method: “eth_chainId” }); setNetwork(networks[chainId]); ethereum.on(“chainChanged”, handleChainChanged);</span></pre><p id="dc82" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">当他们更改网络时重新加载页面:</p><pre class="jp jq jr js fq lt ln lu lv aw lw dt"><span id="1742" class="ka kb ht ln b fv lx ly l lz ma">function handleChainChanged(_chainId) { window.location.reload(); } };</span></pre><p id="0bcf" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">是时候将网络切换到csc了:</p><pre class="jp jq jr js fq lt ln lu lv aw lw dt"><span id="03d8" class="ka kb ht ln b fv lx ly l lz ma">const switchNetwork = async () =&gt; {                                 if (window.ethereum) {                                   try {                                                                         await window.ethereum.request({                                       method: "wallet_switchEthereumChain",                                       params: [{ chainId: "0x35" }],                                     });                                   } catch (error) {                                                                        if (error.code === 4902) {                                       try {                                         await window.ethereum.request({                                           method: "wallet_addEthereumChain",                                           params: [                                             {                                               chainId: "0x35",                                               chainName: "Coinex Smart Chain Mainnet",                                               rpcUrls: ["https://testnet-rpc.coinex.net/"],                                               nativeCurrency: {                                                 name: "CET",                                                 symbol: "CET",                                                 decimals: 18,                                               },                                               blockExplorerUrls: ["https://testnet.coinex.net/"],                                             },                                           ],                                         });                                       } catch (error) {                                         console.log(error);                                       }                                     }                                     console.log(error);                                   }                                 } else {                                                           alert("MetaMask is not installed. Please install it to use this app: https://metamask.io/download.html");                                 }                               };</span></pre><p id="a575" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在上面的代码中，我们检查coinex智能链链id，如果csc不在网络列表中，它会自动将csc添加到metamask。如果需要，您可以设置其他节点rpc。</p><p id="62f8" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我们将链id和网络名称存储在<strong class="is hu"> network.json </strong>中。我们从<strong class="is hu"> network.json </strong>读取网络信息:</p><pre class="jp jq jr js fq lt ln lu lv aw lw dt"><span id="55d7" class="ka kb ht ln b fv lx ly l lz ma">const networks = {                               "0x1": "Mainnet",                               "0x3": "Ropsten",                               "0x2a": "Kovan",                               "0x4": "Rinkeby",                               "0x5": "Goerli",                               "0x61": "BSC Testnet",                               "0x38": "BSC Mainnet",                               "0x89": "Polygon Mainnet",                               "0x13881": "Polygon Mumbai Testnet",<br/>"0x35": "coinex smartchain mainnet",                               "0xa86a": "AVAX Mainnet",                             }                                                           export { networks }</span></pre><p id="5aa2" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">让我们实施dapp的前端:</p><pre class="jp jq jr js fq lt ln lu lv aw lw dt"><span id="28a2" class="ka kb ht ln b fv lx ly l lz ma">const renderInputForm = () =&gt; {                                 if (network !== "Coinex Smart Chain Mainnet") {                                   return (                                     &lt;div className="connect-wallet-container"&gt;                                       &lt;p&gt;Please connect to the Coinex Smart Chain&lt;/p&gt;                                       &lt;button className="cta-button mint-button" onClick={switchNetwork}&gt;                                         Click here to switch                                       &lt;/button&gt;                                     &lt;/div&gt;                                   );                                 }</span></pre><p id="ad4b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">上面的代码将检查链，如果网络不等于coinex智能链mainnet，屏幕上将显示一条消息“请连接到Coinex智能链”</p><p id="7621" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在我们可以使用npm开始我们的react项目了:</p><pre class="jp jq jr js fq lt ln lu lv aw lw dt"><span id="2cc2" class="ka kb ht ln b fv lx ly l lz ma">npm start</span></pre><p id="256e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">该应用程序将运行在<a class="ae la" href="http://localhost:3000" rel="noopener ugc nofollow" target="_blank"> http://localhost:3000 </a></p><p id="29f7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">祝贺🥳</p><p id="9f93" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在我们可以为我们的dapp实现网络检查器。这类作品可以查看<strong class="is hu"> Neutronium名称服务</strong>:</p><div class="mb mc fm fo md me"><a href="https://neutroniumcc.org/cns" rel="noopener  ugc nofollow" target="_blank"><div class="mf ab ej"><div class="mg ab mh cl cj mi"><h2 class="bd hu fv z el mj eo ep mk er et hs dt translated">Neutronium名称服务</h2><div class="ml l"><h3 class="bd b fv z el mj eo ep mk er et ek translated">作为CSC上的nft的薄荷域</h3></div><div class="mm l"><p class="bd b gc z el mj eo ep mk er et ek translated">neutroniumcc.org</p></div></div></div></a></div><blockquote class="mn"><p id="fe97" class="mo mp ht bd mq mr ms mt mu mv mw jn ek translated">交易新手？尝试<a class="ae la" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">加密交易机器人</a>或<a class="ae la" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">复制交易</a></p></blockquote></div></div>    
</body>
</html>