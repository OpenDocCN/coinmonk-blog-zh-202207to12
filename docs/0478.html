<html>
<head>
<title>How I Built a Blockchain &amp; NFT based 9Gag Clone and Meme Marketplace</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我如何建立区块链&amp;基于NFT的9Gag克隆和Meme市场</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/how-i-built-a-blockchain-nft-based-9gag-clone-and-meme-marketplace-24fb6a235334?source=collection_archive---------8-----------------------#2022-07-10">https://medium.com/coinmonks/how-i-built-a-blockchain-nft-based-9gag-clone-and-meme-marketplace-24fb6a235334?source=collection_archive---------8-----------------------#2022-07-10</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><figure class="fi fk ir is it iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff iq"><img src="../Images/37e7492feee551a8eb2e1e2c12e0ad7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DdoxZQGoDgXFQYRXpjbyPw.png"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">8Chiq — Meme Marketplace</figcaption></figure><p id="c772" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">在过去的几周里，我构建了<strong class="jh hu"> 8Chiq，</strong>基于NFT的9gag克隆，并将其部署在<strong class="jh hu"> <em class="kd"> Goerli测试网络</em> </strong>上。这个项目是我的fullstack Web3学习之旅的一部分，虽然你可以在这个<a class="ae ke" href="https://github.com/said017/8chiq" rel="noopener ugc nofollow" target="_blank"> github repo </a>中查看完整的源代码，但本文不会解释前端(Next JS，Tailwind)的详细过程，而是将重点放在Solidity &amp; Truffle部分以及如何迁移然后部署到网络上。</p><h1 id="6758" class="kf kg ht bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">项目概述</h1><p id="4c53" class="pw-post-body-paragraph jf jg ht jh b ji ld jk jl jm le jo jp jq lf js jt ju lg jw jx jy lh ka kb kc hm dt translated">顾名思义，8Chiq 就像9gag一样，是一个迷因平台，在这里你可以上传迷因，喜欢或不喜欢，评论并使用你最喜欢的社交媒体如Twitter或脸书分享给你的朋友。不同之处在于，模因被视为非功能性词汇，所有数据(评论、喜欢、不喜欢)都存储在区块链。</p><figure class="lj lk ll lm fq iu fe ff paragraph-image"><div class="fe ff li"><img src="../Images/1ea6d64f38668df7af2477dbe98c0fd4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1384/format:webp/1*o-T5IfKVTgidpxL4poZGqg.png"/></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">8Chiq Meme Marketplace</figcaption></figure><p id="98d3" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">最重要的是，用户还可以在8Chiq的市场页面上买卖迷因。</p><p id="dac1" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">市场系统本身是非常标准的，并且受到许多已经存在的项目的启发。当用户出售迷因时，它将被转移到市场，当用户购买迷因时，物品将被转移到买方，然后再转移到卖方。刊登费将在买方交易完成时收取，从卖方转到市场所有者。</p><p id="8b9c" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">我认为结合这两个概念会赋予NFT更多的社会价值，因为模因通常会在多个社交媒体上共享，因此很难证明模因的原始所有者。这个想法会给模因创造者带来更多的好处。</p><h1 id="02a3" class="kf kg ht bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">工具和技术堆栈</h1><p id="d322" class="pw-post-body-paragraph jf jg ht jh b ji ld jk jl jm le jo jp jq lf js jt ju lg jw jx jy lh ka kb kc hm dt translated">该项目的技术栈被广泛使用，并被认为是Web3开发的最佳实践:</p><p id="9445" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated"><strong class="jh hu"> Web App框架</strong> — <a class="ae ke" href="https://nextjs.org/" rel="noopener ugc nofollow" target="_blank"> Next.js </a>，<a class="ae ke" href="https://tailwindcss.com/" rel="noopener ugc nofollow" target="_blank">Tailwind</a><br/><strong class="jh hu">Solidity Dev环境</strong> — <a class="ae ke" href="https://trufflesuite.com/" rel="noopener ugc nofollow" target="_blank">松露</a>，<a class="ae ke" href="https://infura.io/" rel="noopener ugc nofollow" target="_blank"> Infura </a> <br/> <strong class="jh hu">文件存储</strong> — <a class="ae ke" href="https://ipfs.io/" rel="noopener ugc nofollow" target="_blank"> IPFS </a> <br/> <strong class="jh hu">以太坊Web客户端</strong> — <a class="ae ke" href="https://web3js.readthedocs.io/en/v1.7.4/" rel="noopener ugc nofollow" target="_blank"> Web3.js </a></p><p id="cd6c" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">我使用的工具:</p><p id="3269" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated"><strong class="jh hu">代码编辑器</strong> — <a class="ae ke" href="https://code.visualstudio.com/" rel="noopener ugc nofollow" target="_blank">可视化代码</a> <br/> <strong class="jh hu">项目注释&amp;跟踪</strong> — <a class="ae ke" href="https://www.notion.so/" rel="noopener ugc nofollow" target="_blank">批注</a></p><h1 id="9412" class="kf kg ht bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">项目设置</h1><p id="4f9f" class="pw-post-body-paragraph jf jg ht jh b ji ld jk jl jm le jo jp jq lf js jt ju lg jw jx jy lh ka kb kc hm dt translated">首先，我们通过在终端上键入以下命令来初始化Next.js应用程序:</p><pre class="lj lk ll lm fq ln lo lp lq aw lr dt"><span id="da8a" class="ls kg ht lo b fv lt lu l lv lw">npx create-next-app meme-nft-marketplace</span></pre><p id="9b07" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">进入目录，然后安装项目所需的库:</p><pre class="lj lk ll lm fq ln lo lp lq aw lr dt"><span id="46fa" class="ls kg ht lo b fv lt lu l lv lw">cd meme-nft-marketplace</span><span id="6cf9" class="ls kg ht lo b fv lx lu l lv lw">npm install <a class="ae ke" href="http://twitter.com/metamask/detect-provider" rel="noopener ugc nofollow" target="_blank">@metamask/detect-provider</a> <a class="ae ke" href="http://twitter.com/openzeppelin/contracts" rel="noopener ugc nofollow" target="_blank">@openzeppelin/contracts</a> <a class="ae ke" href="http://twitter.com/truffle/hdwallet-provider" rel="noopener ugc nofollow" target="_blank">@truffle/hdwallet-provider</a> axios ethers ipfs-http-client web3 swr dashify</span></pre><h1 id="0456" class="kf kg ht bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">顺风CSS设置</h1><p id="b43b" class="pw-post-body-paragraph jf jg ht jh b ji ld jk jl jm le jo jp jq lf js jt ju lg jw jx jy lh ka kb kc hm dt translated">正如本官方指南所述，正确设置顺风与下一个JS。首先，您必须通过npm安装<code class="eh ly lz ma lo b">tailwindcss</code>及其对等依赖项，然后运行init命令来生成<code class="eh ly lz ma lo b">tailwind.config.js</code>和<code class="eh ly lz ma lo b">postcss.config.js</code></p><pre class="lj lk ll lm fq ln lo lp lq aw lr dt"><span id="a5ae" class="ls kg ht lo b fv lt lu l lv lw">npm install -D tailwindcss postcss autoprefixer</span><span id="4c39" class="ls kg ht lo b fv lx lu l lv lw">npx tailwindcss init -p</span></pre><p id="0b26" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">在<code class="eh ly lz ma lo b">tailwind.config.js</code>文件中添加所有模板文件的路径。</p><figure class="lj lk ll lm fq iu"><div class="bz el l di"><div class="mb mc l"/></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">tailwind.config.js</figcaption></figure><p id="faaf" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">将每个顺风层的<code class="eh ly lz ma lo b">@tailwind</code>指令添加到你的<code class="eh ly lz ma lo b">./styles/globals.css</code>文件中。</p><figure class="lj lk ll lm fq iu"><div class="bz el l di"><div class="mb mc l"/></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">globals.css</figcaption></figure><p id="63d4" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">仅此而已。对于其余的前端组件和页面，可以在<a class="ae ke" href="https://github.com/said017" rel="noopener ugc nofollow" target="_blank"> github repo </a>上查看。</p><h1 id="8e8b" class="kf kg ht bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">松露装置</h1><p id="0b14" class="pw-post-body-paragraph jf jg ht jh b ji ld jk jl jm le jo jp jq lf js jt ju lg jw jx jy lh ka kb kc hm dt translated">Truffle是使用以太坊虚拟机(EVM)的区块链的solidity开发环境、测试框架和资产管道。</p><p id="1e62" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">首先，您必须全局安装truffle，在您的终端中键入这个命令，然后转到您之前创建的项目目录，并在那里初始化truffle bare项目:</p><pre class="lj lk ll lm fq ln lo lp lq aw lr dt"><span id="d9c1" class="ls kg ht lo b fv lt lu l lv lw">npm install -g truffle</span><span id="4945" class="ls kg ht lo b fv lx lu l lv lw">cd meme-nft-marketplace</span><span id="ac66" class="ls kg ht lo b fv lx lu l lv lw">truffle init</span></pre><p id="27e7" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">一旦该操作完成，您现在将拥有一个包含以下与Truffle相关的项目的项目结构:</p><ul class=""><li id="16db" class="md me ht jh b ji jj jm jn jq mf ju mg jy mh kc mi mj mk ml dt translated"><code class="eh ly lz ma lo b">contracts/</code>:关于<a class="ae ke" href="https://trufflesuite.com/docs/truffle/getting-started/interacting-with-your-contracts" rel="noopener ugc nofollow" target="_blank">担保合同的目录</a></li><li id="0b6b" class="md me ht jh b ji mm jm mn jq mo ju mp jy mq kc mi mj mk ml dt translated"><code class="eh ly lz ma lo b">migrations/</code>:可脚本化部署文件<a class="ae ke" href="https://trufflesuite.com/docs/truffle/getting-started/running-migrations#migration-files" rel="noopener ugc nofollow" target="_blank">的目录</a></li><li id="dc07" class="md me ht jh b ji mm jm mn jq mo ju mp jy mq kc mi mj mk ml dt translated"><code class="eh ly lz ma lo b">test/</code>:用于<a class="ae ke" href="https://trufflesuite.com/docs/truffle/testing/testing-your-contracts" rel="noopener ugc nofollow" target="_blank">测试您的应用和合同</a>的测试文件目录</li><li id="3800" class="md me ht jh b ji mm jm mn jq mo ju mp jy mq kc mi mj mk ml dt translated"><code class="eh ly lz ma lo b">truffle-config.js</code>:松露<a class="ae ke" href="https://trufflesuite.com/docs/truffle/reference/configuration" rel="noopener ugc nofollow" target="_blank">配置文件</a></li></ul><p id="7f99" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">为了这个项目的简单，我们将不做任何测试脚本功能。也许我会在不久的将来添加这些。但是现在让我们关注<code class="eh ly lz ma lo b">contracts/</code>目录，这里定义了solidity smart契约。</p><h1 id="09c9" class="kf kg ht bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">Meme NFT和市场合同</h1><p id="857f" class="pw-post-body-paragraph jf jg ht jh b ji ld jk jl jm le jo jp jq lf js jt ju lg jw jx jy lh ka kb kc hm dt translated"><a class="ae ke" href="https://www.openzeppelin.com/" rel="noopener ugc nofollow" target="_blank"> OpenZeppelin </a>是包含大量标准令牌代码/框架的库，因此我们可以轻松地利用它来创建NFT，我们从框架中继承<a class="ae ke" href="https://eips.ethereum.org/EIPS/eip-721" rel="noopener ugc nofollow" target="_blank"> ERC721标准</a>。</p><blockquote class="mr ms mt"><p id="4d8d" class="jf jg kd jh b ji jj jk jl jm jn jo jp mu jr js jt mv jv jw jx mw jz ka kb kc hm dt translated">交易新手？尝试<a class="ae ke" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">加密交易机器人</a>或<a class="ae ke" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">复制交易</a></p></blockquote><p id="9b6d" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">我试图将所有的NFT和市场功能放在一个合同中，从用户体验的角度来看，为了简单和容易的交互(更少的交易请求)，作为交换，合同代码和大小变得更大。我将在本文中尝试解释每一个重要的函数和数据结构。您可以随时在<a class="ae ke" href="https://github.com/said017/8chiq" rel="noopener ugc nofollow" target="_blank"> github repo </a>上查看完整代码。</p><p id="3f8c" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated"><strong class="jh hu">基本Meme Marketplace Solidity契约结构，继承ERC721 </strong></p><figure class="lj lk ll lm fq iu"><div class="bz el l di"><div class="mb mc l"/></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">MemeMarketplace.sol contract structure</figcaption></figure><p id="f003" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated"><strong class="jh hu"> Solidity </strong>是使用最多的智能合约语言，带扩展<code class="eh ly lz ma lo b">**.sol**</code>。在代码的顶部，你必须声明<strong class="jh hu">可靠性</strong>版本来使用<code class="eh ly lz ma lo b">pragma solidity 0.x.x</code>。(可选)使用代码顶部的<code class="eh ly lz ma lo b">SPDX-License-Identifier</code>来确定代码的许可。<code class="eh ly lz ma lo b">contract</code>是定义智能合同对象的关键字，后跟其名称，非常类似于OOP概念。</p><p id="12b2" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">如你所见，<code class="eh ly lz ma lo b">MemeMarketPlace</code>契约继承了<code class="eh ly lz ma lo b">ERC721URIStorage</code>和<code class="eh ly lz ma lo b">ReentrancyGuard</code>。然后，您必须为ERC721定义包含契约和令牌名称的构造函数。</p><p id="5a09" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated"><strong class="jh hu">变量和数据类型</strong></p><p id="b38f" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">接下来，我们将关注契约中使用的特定变量和数据类型。</p><figure class="lj lk ll lm fq iu"><div class="bz el l di"><div class="mb mc l"/></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">Meme variables and data types</figcaption></figure><p id="481c" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">现在我们将关注数据结构中的<code class="eh ly lz ma lo b">struct</code>类型，<code class="eh ly lz ma lo b">struct</code>是自定义的类型，可以将几个变量分组，很像Javascript中的object。</p><p id="613e" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">我们用它来创建<code class="eh ly lz ma lo b">MarketToken</code>，它存储了与meme NFT令牌相关的信息，如制造商、卖家、所有者、价格、物品状态等。<code class="eh ly lz ma lo b">TokenLikesComment</code>存储每个NFT的信息社交相关数据，例如喜欢、不喜欢和评论。然后<code class="eh ly lz ma lo b">Comment</code>数据类型帮助我们存储评论和评论者的地址。</p><p id="f404" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">我们还使用映射将<code class="eh ly lz ma lo b">tokenId</code>映射到带有<code class="eh ly lz ma lo b">idToMarketToken</code>的<code class="eh ly lz ma lo b">MarketToken</code>。并用<code class="eh ly lz ma lo b">idToTokenLikes</code>将<code class="eh ly lz ma lo b">tokenId</code>映射到<code class="eh ly lz ma lo b">TokenLikesComment</code>。映射数据类型本身的工作方式类似于其他编程语言中的映射。</p><p id="e1c1" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">映射类型使用语法<code class="eh ly lz ma lo b">mapping(KeyType =&gt; ValueType)</code>，映射类型的变量使用语法<code class="eh ly lz ma lo b">mapping(KeyType =&gt; ValueType) VariableName</code>声明。<code class="eh ly lz ma lo b">KeyType</code>可以是任何内置值类型、字节、字符串或任何契约或枚举类型。不允许其他用户定义的或复杂的类型，如映射、结构或数组类型。<code class="eh ly lz ma lo b">ValueType</code>可以是任何类型，包括映射、结构或数组。</p><p id="d4b0" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated"><strong class="jh hu">铸造代币并创建市场项目功能</strong></p><p id="2e58" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">为了在marketplace中创建meme和创建项目，我们定义了在创建meme后直接创建market item的函数，并根据用户输入决定是否出售它。</p><figure class="lj lk ll lm fq iu"><div class="bz el l di"><div class="mb mc l"/></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">mint and create marketplace token in MemeMarketplace.sol</figcaption></figure><p id="e26c" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated"><code class="eh ly lz ma lo b">mintToken()</code>利用OpenZeppelin ERC721功能创建NFT迷因，并将URI放在上面。然后我们根据用户输入使用<code class="eh ly lz ma lo b">makeMarketItem</code>或<code class="eh ly lz ma lo b">makeMarketItemNonSale</code>创建<code class="eh ly lz ma lo b">MarketToken</code>，看他们是否想卖。</p><p id="453b" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated"><strong class="jh hu">读取或查看功能</strong></p><p id="0fb0" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">然后，我们定义所有与数据/变量相关的视图函数。在可靠性方面，函数的结构非常重要，因为修改智能合同数据需要gas，而读取数据则不需要。因此，我们必须清楚地说明只读函数和修改数据函数的区别。</p><figure class="lj lk ll lm fq iu"><div class="bz el l di"><div class="mb mc l"/></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">Solidity function structure</figcaption></figure><p id="8110" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">我不会在这篇文章中解释所有关于可靠性的功能，因为你可以阅读他们的文档。定义只读函数时的重要参数是让函数有<code class="eh ly lz ma lo b">external</code>参数，因为我们希望前端能够读取它，<code class="eh ly lz ma lo b">view</code>明确声明这个函数是读取函数，<code class="eh ly lz ma lo b">returns (&lt;return type&gt;)</code>定义这个函数返回什么类型。</p><figure class="lj lk ll lm fq iu"><div class="bz el l di"><div class="mb mc l"/></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">View function in MemeMarketplace.sol</figcaption></figure><p id="e09b" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">一般来说，我们使用查看或读取功能有两个目的，从合同中读取数据，如<code class="eh ly lz ma lo b">getListingPrice()</code>和<code class="eh ly lz ma lo b">fetchMarketAllTokens()</code>，或者检查某种状态，如<code class="eh ly lz ma lo b">isTokenExists()</code>。</p><p id="cac2" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated"><strong class="jh hu">购买Meme &amp;取消列表功能</strong></p><p id="b487" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">之后，我们创建从市场购买meme的功能，并作为所有者取消列表。</p><figure class="lj lk ll lm fq iu"><div class="bz el l di"><div class="mb mc l"/></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">Buy and cancel listing functions</figcaption></figure><p id="8729" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated"><strong class="jh hu">合同迁移文件</strong></p><p id="b8d7" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">最后，转到truffle生成的<code class="eh ly lz ma lo b">migrations/</code>文件夹，删除文件夹中的初始文件，创建<code class="eh ly lz ma lo b">1_migrate_marketplace.js</code>。</p><figure class="lj lk ll lm fq iu"><div class="bz el l di"><div class="mb mc l"/></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">1_migrate_marketplace.js</figcaption></figure><p id="ee53" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">这就是关于Meme Marketplace合约的所有关键信息。接下来，我们转到部署步骤。</p><h1 id="75e8" class="kf kg ht bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">块菌结构</h1><p id="f8e5" class="pw-post-body-paragraph jf jg ht jh b ji ld jk jl jm le jo jp jq lf js jt ju lg jw jx jy lh ka kb kc hm dt translated">我们可以在<code class="eh ly lz ma lo b">truffle-config.js</code>文件中定义部署和迁移的行为，如<code class="eh ly lz ma lo b">contracts_build_directory</code>和合同部署的网络。</p><figure class="lj lk ll lm fq iu"><div class="bz el l di"><div class="mb mc l"/></div></figure><p id="4929" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">在这个项目中，我使用Infura并定义了几个网络。<a class="ae ke" href="https://infura.io/" rel="noopener ugc nofollow" target="_blank"> Infura </a>为开发者提供API，只需改变<code class="eh ly lz ma lo b">providerOrUrl</code>就能轻松与区块链网络交互。在本文中我们将使用<strong class="jh hu"> <em class="kd"> Goerli测试网络</em> </strong>中的<code class="eh ly lz ma lo b">goerli_infura_testnet</code>配置。确保您查看了关于如何设置项目的<a class="ae ke" href="https://docs.infura.io/infura" rel="noopener ugc nofollow" target="_blank">信息文档</a>，并将您获得的项目id的<code class="eh ly lz ma lo b">INFURA_PROJECT_ID</code>放入您的仪表板并放入<code class="eh ly lz ma lo b">.env</code>。</p><p id="60d4" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated"><strong class="jh hu">合同迁移执行</strong></p><p id="1253" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">最后，在终端中使用这个truffle命令迁移契约:</p><pre class="lj lk ll lm fq ln lo lp lq aw lr dt"><span id="2853" class="ls kg ht lo b fv lt lu l lv lw">truffle migrate</span><span id="4431" class="ls kg ht lo b fv lx lu l lv lw"># or do this if previously alredy run and do some modification to contract, just in case<br/>truffle migrate --reset</span><span id="d596" class="ls kg ht lo b fv lx lu l lv lw"># or migrate with spesific network configuration<br/>truffle migrate --network=&lt;network_name&gt; --reset</span></pre><p id="2054" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">然后可以使用<code class="eh ly lz ma lo b">npm run dev</code>命令在本地启动前端，或者使用vercel进行部署。您可以通过以下链接查看最终结果演示:</p><p id="f68c" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated"><a class="ae ke" href="https://8chiq.vercel.app/" rel="noopener ugc nofollow" target="_blank"> <strong class="jh hu">演示链接</strong> </a></p><h1 id="248f" class="kf kg ht bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">后续步骤</h1><p id="da7e" class="pw-post-body-paragraph jf jg ht jh b ji ld jk jl jm le jo jp jq lf js jt ju lg jw jx jy lh ka kb kc hm dt translated">从这里，你可以随时在<a class="ae ke" href="https://github.com/said017/8chiq" rel="noopener ugc nofollow" target="_blank"> github repo </a>上查看完整的代码。我还将发布更多关于<strong class="jh hu"> Web3.js </strong>以及如何与Meme Marketplace合同互动的信息。</p><p id="ea78" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">与此同时，您可以使用这些资源，我发现这些资源很有帮助，并且在创建这个项目时参考了很多:</p><p id="cf8f" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated"><strong class="jh hu">坚实基础</strong>—<strong class="jh hu"/><a class="ae ke" href="https://www.udemy.com/course/ethereum-and-solidity-the-complete-developers-guide/" rel="noopener ugc nofollow" target="_blank">https://www . udemy . com/course/ether eum-and-Solidity-the-complete-developers-guide/</a></p><p id="46c4" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated"><strong class="jh hu"> Solidity和下一个JS项目</strong>—<a class="ae ke" href="https://www.udemy.com/course/solidity-ethereum-in-react-next-js-the-complete-guide" rel="noopener ugc nofollow" target="_blank">https://www . udemy . com/course/Solidity-ether eum-in-react-Next-JS-the-complete-guide</a></p><blockquote class="mx"><p id="c3c2" class="my mz ht bd na nb nc nd ne nf ng kc ek translated">加入Coinmonks <a class="ae ke" href="https://t.me/coincodecap" rel="noopener ugc nofollow" target="_blank">电报频道</a>和<a class="ae ke" href="https://www.youtube.com/c/coinmonks/videos" rel="noopener ugc nofollow" target="_blank"> Youtube频道</a>了解加密交易和投资</p></blockquote><h1 id="6722" class="kf kg ht bd kh ki kj kk kl km kn ko kp kq nh ks kt ku ni kw kx ky nj la lb lc dt translated">另外，阅读</h1><ul class=""><li id="ba23" class="md me ht jh b ji ld jm le jq nk ju nl jy nm kc mi mj mk ml dt translated"><a class="ae ke" href="https://coincodecap.com/p2p-crypto-exchanges-in-india" rel="noopener ugc nofollow" target="_blank">印度最佳P2P加密交易所</a> | <a class="ae ke" href="https://coincodecap.com/baby-shiba-inu-wallets" rel="noopener ugc nofollow" target="_blank">柴犬钱包</a></li><li id="0dd4" class="md me ht jh b ji mm jm mn jq mo ju mp jy mq kc mi mj mk ml dt translated"><a class="ae ke" href="https://coincodecap.com/crypto-affiliate-programs" rel="noopener ugc nofollow" target="_blank">八大加密附属计划</a> | <a class="ae ke" href="https://coincodecap.com/etoro-vs-coinbase" rel="noopener ugc nofollow" target="_blank"> eToro vs比特币基地</a></li><li id="0f77" class="md me ht jh b ji mm jm mn jq mo ju mp jy mq kc mi mj mk ml dt translated"><a class="ae ke" href="https://coincodecap.com/best-ethereum-wallets" rel="noopener ugc nofollow" target="_blank">最佳以太坊钱包</a> | <a class="ae ke" href="https://coincodecap.com/telegram-crypto-bots" rel="noopener ugc nofollow" target="_blank">电报上的加密货币机器人</a></li><li id="3552" class="md me ht jh b ji mm jm mn jq mo ju mp jy mq kc mi mj mk ml dt translated"><a class="ae ke" href="https://coincodecap.com/leveraged-token-exchanges" rel="noopener ugc nofollow" target="_blank">交易杠杆代币的最佳交易所</a> | <a class="ae ke" href="https://coincodecap.com/buy-floki-inu-token" rel="noopener ugc nofollow" target="_blank">购买Floki </a></li><li id="0ffc" class="md me ht jh b ji mm jm mn jq mo ju mp jy mq kc mi mj mk ml dt translated"><a class="ae ke" href="https://coincodecap.com/3commas-vs-pionex-vs-cryptohopper" rel="noopener ugc nofollow" target="_blank"> 3Commas对Pionex对Cryptohopper </a> | <a class="ae ke" href="https://coincodecap.com/bingbon-review" rel="noopener ugc nofollow" target="_blank"> Bingbon评论</a></li></ul></div></div>    
</body>
</html>