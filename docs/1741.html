<html>
<head>
<title>Ethereum World State Review</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">以太坊世界状态评论</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/ethereum-world-state-review-486ecfa44f76?source=collection_archive---------22-----------------------#2022-08-04">https://medium.com/coinmonks/ethereum-world-state-review-486ecfa44f76?source=collection_archive---------22-----------------------#2022-08-04</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="00fb" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在这篇博客中，我将谈论</p><ul class=""><li id="8ed7" class="jo jp ht is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw dt translated">以太坊世界状态</li></ul><p id="9b22" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">以太坊丰富了账号的内容，除了剩下的，你想存多少数据都可以。并利用帐户数据的可维护性来构建智能合约帐户。以太坊是为实现智能合约而改进的帐户模型。按帐户安全地隔离数据。账户之间的信息是独立的，互不干扰。然后配合以太坊虚拟机，让智能合约沙盒运行。以太坊作为智能合约运营平台，将账户分为外部账户(EOAs)和合约账户。</p><p id="67c7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">如果你想了解更多关于EOA和合同账户的信息，请查看我的文章。</p><h2 id="8e78" class="jy jz ht bd ka kb kc kd ke kf kg kh ki jb kj kk kl jf km kn ko jj kp kq kr ks dt translated">以太坊世界状态</h2><p id="7352" class="pw-post-body-paragraph iq ir ht is b it kt iv iw ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn hm dt translated">世界状态是帐户地址(160位标识符)和帐户状态(如帐户余额)之间的映射。Merkle树用于维护状态。</p><p id="093d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">账户状态包括四条数据。</strong></p><figure class="kz la lb lc fq ld fe ff paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="fe ff ky"><img src="../Images/a773d9b2fdd113387e4e2aa865e6b824.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TgBHO-RH5GpHxjkJ92I1IA.png"/></div></div></figure><p id="7cae" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">对应的代码如下:</p><pre class="kz la lb lc fq lk ll lm ln aw lo dt"><span id="d284" class="jy jz ht ll b fv lp lq l lr ls">// core/state/state_object.go:100<br/>type Account struct {<br/>    Nonce    uint64<br/>    Balance  *big.Int<br/>    Root     common.Hash<br/>    CodeHash []byte<br/>}</span></pre><p id="3377" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">以太坊数据以账户为单位进行组织，账户数据的变化引起账户状态的变化。结果以太坊的状态被改变。</p><pre class="kz la lb lc fq lk ll lm ln aw lo dt"><span id="bf45" class="jy jz ht ll b fv lp lq l lr ls">WorldState = [(address, AccountState)]</span><span id="e28e" class="jy jz ht ll b fv lt lq l lr ls">AccountState = [Nonce, Balance, StorageHash, CodeHash]</span></pre><p id="6163" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">以太坊使用Merkle帕特里夏尝试结构。Markle patricia trie使用以太坊而不是朴素映射来存储&lt;<em class="lu"> Worldstate </em> &gt;的键值对。因为它在trie中存储了键值对和证明某个键值对的证明。然而，这些状态并不直接存储在区块链上，而是保存在Merkle前缀树中，并且只有相应的树根值被记录在区块链上。一个简单的数据库用来维护树的持久内容，用来维护映射的数据库叫做<strong class="is hu">状态数据库。</strong></p><p id="c46f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">现在的问题是StateDB如何管理状态？</strong></p><p id="7687" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">从程序员的角度来看，State DB有多种用途。</p><blockquote class="lv lw lx"><p id="3fa7" class="iq ir lu is b it iu iv iw ix iy iz ja ly jc jd je lz jg jh ji ma jk jl jm jn hm dt translated">1.维护帐户状态到世界状态的映射。</p><p id="0801" class="iq ir lu is b it iu iv iw ix iy iz ja ly jc jd je lz jg jh ji ma jk jl jm jn hm dt translated">2.支持修改、回滚和提交状态。</p><p id="60e2" class="iq ir lu is b it iu iv iw ix iy iz ja ly jc jd je lz jg jh ji ma jk jl jm jn hm dt translated">3.支持将状态保存到数据库。</p><p id="f500" class="iq ir lu is b it iu iv iw ix iy iz ja ly jc jd je lz jg jh ji ma jk jl jm jn hm dt translated">4.是状态进出Merkle树的媒介。</p></blockquote><p id="216c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">StateDB充当状态、树、级别DB(存储)的协调者</p><p id="450e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">参考:</p><div class="mb mc fm fo md me"><a href="https://ethereum.org/en/whitepaper/#ethereum-accounts" rel="noopener  ugc nofollow" target="_blank"><div class="mf ab ej"><div class="mg ab mh cl cj mi"><h2 class="bd hu fv z el mj eo ep mk er et hs dt translated">以太坊白皮书| ethereum.org</h2><div class="ml l"><h3 class="bd b fv z el mj eo ep mk er et ek translated">以太坊的介绍性论文，于2013年推出前出版。</h3></div><div class="mm l"><p class="bd b gc z el mj eo ep mk er et ek translated">ethereum.org</p></div></div><div class="mn l"><div class="mo l mp mq mr mn ms li me"/></div></div></a></div><div class="mb mc fm fo md me"><a rel="noopener follow" target="_blank" href="/@eiki1212/ethereum-state-trie-architecture-explained-a30237009d4e"><div class="mf ab ej"><div class="mg ab mh cl cj mi"><h2 class="bd hu fv z el mj eo ep mk er et hs dt translated">以太坊状态Trie架构解释</h2><div class="ml l"><h3 class="bd b fv z el mj eo ep mk er et ek translated">解释以太坊状态，加深对以太坊区块链的了解。</h3></div><div class="mm l"><p class="bd b gc z el mj eo ep mk er et ek translated">medium.com</p></div></div><div class="mn l"><div class="mt l mp mq mr mn ms li me"/></div></div></a></div><div class="mb mc fm fo md me"><a href="https://brilliant.org/wiki/merkle-tree/" rel="noopener  ugc nofollow" target="_blank"><div class="mf ab ej"><div class="mg ab mh cl cj mi"><h2 class="bd hu fv z el mj eo ep mk er et hs dt translated">Merkle Tree |卓越的数学和科学维基</h2><div class="ml l"><h3 class="bd b fv z el mj eo ep mk er et ek translated">Merkle树是一种基于散列的数据结构，是散列列表的推广。这是一个树形结构，其中…</h3></div><div class="mm l"><p class="bd b gc z el mj eo ep mk er et ek translated">brilliant.org</p></div></div><div class="mn l"><div class="mu l mp mq mr mn ms li me"/></div></div></a></div><blockquote class="mv"><p id="93af" class="mw mx ht bd my mz na nb nc nd ne jn ek translated">交易新手？试试<a class="ae jx" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">加密交易机器人</a>或者<a class="ae jx" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">复制交易</a></p></blockquote></div></div>    
</body>
</html>