<html>
<head>
<title>The Nomad Bridge — a Fast Mob Attack — Flaws, or other potential security holes that could invite hackers</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">游牧桥——一种快速的群体攻击——缺陷或其他可能吸引黑客的潜在安全漏洞</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/the-nomad-bridge-a-fast-mob-attack-flaws-or-other-potential-security-holes-that-could-invite-d254c34589fd?source=collection_archive---------41-----------------------#2022-10-15">https://medium.com/coinmonks/the-nomad-bridge-a-fast-mob-attack-flaws-or-other-potential-security-holes-that-could-invite-d254c34589fd?source=collection_archive---------41-----------------------#2022-10-15</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="d256" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">Nomad是一种跨链通信标准，有助于在链之间快速、安全地传输令牌和数据，以及在多个区块链之间发送和接收数字令牌。</p><p id="5fcc" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">Nomad Bridge加密货币项目也受到了威胁，黑客带走了几乎所有价值2亿美元的钱包。</p><p id="edf7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在Nomad的一个智能合同更新后，用户可以很容易地欺骗交易——从Nomad bridge中提取并不真正属于他们的钱。</p><p id="9283" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">由于其代码中的一个漏洞，Nomad Bridge允许大量过剩的WBTC代币退出，同时允许非常少的比特币进入。黑客利用了这个漏洞，从ERC游牧桥窃取了20枚代币，价值1.9亿美元。</p><p id="3ec5" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">该桥的目的是通过包装一枚硬币并将其绑定到另一个区块链上的智能合约，来促进几个区块链之间的交易。举个例子，包裹比特币(WBT)是比特币在以太坊区块链上的表征；理论上，一个WBT相当于一个BTC。</p><p id="a087" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">“混乱”的游牧袭击与大多数桥梁袭击形成对比，在大多数桥梁袭击中，一个犯罪人对整个骗局负责，这是一场混战，一旦消息传开，机会主义者就会从桥上抢钱。</p><p id="b7cd" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">随着许多其他人的参与，盗窃演变成了聚会抢劫。</p><p id="b994" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在每个受支持的区块链上，Nomad启动一个名为Replica的核心契约，作为所有跨链消息的邮箱。链外代理通过向该契约发布签名的新树根散列来更新树根，并在Merkle树中中继和安排跨链消息。</p><p id="8a0e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">每个需要链上确认的新消息都必须经过prove()和process()过程。Merkle树中的消息使用prove()过程进行验证，然后该过程声明要验证的消息。</p><p id="c5c5" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">请点击它:</p><div class="jo jp fm fo jq jr"><a href="https://github.com/nomad-xyz/nomad-monorepo/blob/main/solidity/nomad-core/contracts/Replica.sol" rel="noopener  ugc nofollow" target="_blank"><div class="js ab ej"><div class="jt ab ju cl cj jv"><h2 class="bd hu fv z el jw eo ep jx er et hs dt translated">nomad-monorepo/Replica.sol位于主nomad-xyz/nomad-monorepo</h2><div class="jy l"><h3 class="bd b fv z el jw eo ep jx er et ek translated">此存储库已由所有者存档。它现在是只读的。此时您不能执行该操作。你…</h3></div><div class="jz l"><p class="bd b gc z el jw eo ep jx er et ek translated">github.com</p></div></div><div class="ka l"><div class="kb l kc kd ke ka kf kg jr"/></div></div></a></div><p id="a521" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在逻辑契约的早期版本中，尤其是process()函数，计算消息散列，对照消息映射检查散列以确保该消息已经被证明，执行可重入性检查，最后更新消息状态。</p><p id="06be" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><code class="eh kh ki kj kk b">require(acceptableRoot(messages[_messageHash]), “!proven”);</code></p><p id="87a3" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在流程函数内部调用acceptable root(messages[message hash])，它用于验证乐观超时时间是否已过以及根是否已提交。此实例中的消息[ _messageHash]是0x000。</p><p id="6f47" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">当函数acceptable root(messages[_ message hash])返回true时，消息得到验证。(错误在这里)。</p><p id="bff4" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">为了绕开验证，攻击者可以用任意的“_message”直接调用“process(byte memory _message)”函数。</p><p id="4bad" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">更彻底的审核流程、渗透测试和部署操作验证可能会发现此问题。</p><p id="292c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在消息被证实后，攻击者可以将令牌移出桥。</p><p id="619f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">你不需要理解Merkle Trees，Solidity，或者其他任何东西，因为这个黑客太疯狂了。找到一笔成功的交易，用你自己的地址定位/替换对方的地址，然后重新广播就可以了。</p><p id="b23d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">常规升级将零哈希识别为合法根，这导致了在Nomad上启用消息欺骗的意外后果。</p><blockquote class="kl"><p id="0f4c" class="km kn ht bd ko kp kq kr ks kt ku jn ek translated">交易新手？试试<a class="ae kv" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">加密交易机器人</a>或者<a class="ae kv" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">复制交易</a></p></blockquote></div></div>    
</body>
</html>