# 以太坊智能合约

> 原文：<https://medium.com/coinmonks/ethereum-smart-contracts-1d92dd8e7f83?source=collection_archive---------6----------------------->

E thereum 是由 [**维塔利克·布特林**](https://fr.wikipedia.org/wiki/Vitalik_Buterin) 于 2013 年打造的项目。基本上，他想要一种脚本语言，一种为比特币创建程序的方法，然而，他没有得到比特币社区的批准。所以他继续前进，创建了自己的项目，这个项目后来成为了一个巨人。

比特币的目的很简单，就是创造一种加密货币。至于以太坊，它是一个构建程序的平台，是一个区块链，不仅允许存储数据和交易，还允许存储程序。

在本文中，我将介绍智能合约，以及以太坊的基础知识。

![](img/9a532773c29513470e980a58fe25451e.png)

# **文章概要**

**一、什么是智能合约？**

**二。以太坊的基础知识**

1.  **令牌**
2.  **首次发行硬币**
3.  **乙醚**
4.  **钱包**
5.  **气体**
6.  **以太坊虚拟机**
7.  **神谕**
8.  **分散的自治组织**
9.  **叉子**
10.  **对刀的攻击。**

# **一、什么是智能合约？**

智能合同是在区块链的每个节点上自动自主运行的计算机程序。它是由参与交易的双方订立的一套规则和条款构成和管理的。

基于“如果这个，那么那个”的逻辑，允许以透明的方式并且在没有信任中介的情况下交换货币、货物、股票或任何其他有价值的对象。

这是一个由密码学家和计算机科学家 Nick Szabo 在 20 世纪 90 年代中期提出的概念，远远早于区块链技术的出现。“智能合同”一词定义了一组规则，如果条件得到满足，这些规则将自动执行，而无需可信第三方的参与。但这个想法在当时无法实现，因为没有技术支持智能合约的实施……直到 2009 年，随着比特币出现了区块链技术的应用，允许智能合约草案的实施，然而，直到 2013 年，随着以太坊的出现，智能合约才真正得以实施和推出。

事实上，比特币无法部署智能合约，因为与它相关的编程语言“比特币脚本”与以太坊的“可靠性”编程语言不同，它不是图灵完整的。换句话说，用比特币脚本编写任何逻辑都是不可能的，此外，比特币脚本缺少的重要元素是**循环**。况且这不是偶然的，他们是故意的，因为一般来说，程序运行在区块链的每个节点上，所以如果有人故意(或无意)创建了一个包含无限循环的程序，他们真的可以慢下来。如果循环的使用方式不正确，它确实是一个危险的工具。

# **二世。以太坊的基础知识**

以太坊被认为是一个分散的计算机网络，任何人都可以编程和使用。特别是，它允许在区块链上执行交易和存储任何类型的数据。它的特点是大量的基本概念:令牌，ICO，以太，钱包，气体，EVM，神谕，叉子，道等。

## **1。令牌**

代币是在区块链上发行和交换的数字资产，具有加密货币的特征。它可以在没有可信第三方的情况下在两方之间转移。

代币有多种功能，使用的可能性非常多。因此，在给定的应用程序或生态系统中，令牌可以代表一项权利、一种支付手段或一个交换价值单位。

## **2。初始硬币发行**

ICO(初始硬币发行)是一种筹资机制，它通过发行代币来工作，代币可以在项目的启动阶段兑换成加密货币。交换的代币并不代表公司的股份，它们允许预付要开发的产品或服务。

## **3。乙醚**

以太是一种分散的、可交易的数字加密货币，它通过支付交易费用和计算服务来为以太坊网络提供额外的动力。

## **4。钱包**

钱包是一种应用程序，允许您存储资金，轻松执行交易，并在需要时随时查看余额。此外，钱包有公共地址，允许它们在网络中唯一地标识自己。因此，如果一个人想发送以太，他们会发送到这个公共地址。需要注意的是，除了以太，钱包还存储用户的私钥。

## **5。气体**

我们在上面谈到了**循环**，以及为什么比特币脚本从不包含它们，因为有人可以恶意或意外地制造无限循环或非常重的负载，这将降低所有节点上的计算速度，从而降低网络速度。以太坊在另一方面用气体的概念解决了这个问题，现在循环不再是一个威胁。简而言之，我们有一定数量的天然气，可以用来支付我们需要执行的所有操作。由于 [Excel](https://docs.google.com/spreadsheets/d/1m89CVujrQe5LAFJ8-YAUCcNK950dUzMQPMJBxRtGCqs/edit#gid=0) 文件显示了执行一项操作需要多少单位的气体，因此每项操作都有自己的成本(即使是低级操作)。在这一点上，我们可以清楚地看到这是如何解决问题的，即使我们的程序计算量太大，或者如果它包含一个无限循环，在 cas 中它将很快耗尽气体并停止工作。这个概念真的鼓励人们写出好的代码，否则你不希望你的代码有哪怕一点点的低效，因为这会让你付出代价。

所以 gas 是执行一个操作所需的计算机时间量。因此，操作的复杂性增加，气体单元的成本增加。每单位天然气的价格以 Gwei (1 Gwei = 0.000000001 ETH)表示，由市场需求决定。

**我们为什么不用乙醚代替汽油来付账呢？**

乙醚的价格会在一夜之间发生变化，它每天都在变化，所以很难预测你会花多少钱去做你正在做的事情。

**气体**和**以太**之间的联系，有助于我们看到比特币和以太坊之间的区别。

比特币背后的主导思想是创造一种加密货币，供人们交易、交换和支付服务，这种货币是透明的、无国界的，没有任何限制和许可(你不必请求许可就可以向任何地方汇款)。这就是比特币背后的原理。

而以太坊和以太网，即使人们不用它来进行交易，他们也要付费来运行他们的程序。

## **6。以太坊虚拟机**

以太坊中涉及的一个安全方面回答了这个问题:如果有人编写了一个类似智能合同的病毒，并将其部署在区块链上，每个人都会有一个副本，突然，这就是结局，所有的节点都将被感染。这就是 EVM(以太坊虚拟机)的用武之地，它运行在你的计算机上，因此它完全封装了通过它的所有东西。所以，这些程序运行在 EVM 上，没有任何东西可以出去，因为它不与主机联系，所以它是隔离的，所以如果出了问题，这个程序将永远无法访问你的文件，它永远无法看到它们。

## **7。神谕**

以太坊区块链和区块链一般不能调用外部服务。换句话说，它对外界是盲目的，因此需要使用神谕。

oracle 是一种负责将外部数据手动输入区块链的服务。事实上，在 T 时刻(将被预先定义),甲骨文将检索已被请求的信息，并将它插入区块链中已被指定的位置。需要这些数据的智能合约在执行时，会在区块链中指定的地址进行搜索，然后根据这些数据执行。

## **8。分散自治组织**

现在的组织是什么？一个组织由主管、经理和员工等组成。

嗯，这些人遵循一定的程序，以使他们的公司工作。对于检查和所有的事情，在那个公司里，所有的事情大部分时间都是由人来完成的，这只是人们必须遵循的程序，做出商业决策，每个组织都有必须完成的工作。

![](img/ad306139ea167c57029fdff83a737aba.png)

Organization

因此，我们的想法是假设，如果我们有一个组织，在那里我们不必以传统的方式来做，也就是说，当它可以自动完成时，这将带来智能合同的概念。如果我们将所有这些都编码到智能契约中，突然之间你就有了一个自己工作的组织，无需人工干预，这就是 DAO 的全部意义。所以 DAO(去中心化自治组织)是一个完全去中心化和自动化的组织。它只存在于以太坊区块链上，其参与者只在区块链上相互交互。因此，道的特点是透明和持续运作。

![](img/941157965e20d58aef7477da525e341c.png)

DAO

## **9。叉子**

分叉是分成几个分支的划分。在区块链层面，它可以是由街区之间的冲突引起的区块链的分裂，也可以是由管辖区块链的协议的改变引起的分裂。有两种类型的叉子:软堡和硬叉。

**柔软的叉子。**是一种称为向后兼容的规则变化，也就是说，不必更新所有节点和矿工，区块链就能继续发挥作用。

**硬裆**。是一个更深入地修改管理区块链的规则的分支。因此，不更新系统的矿工无法使用区块链。在这个过程结束时，可能有两种情况:或者所有的节点和挖掘器接受共识并更新它们的系统，或者一些节点和挖掘器拒绝更新它们的系统。在这种情况下，将并行构建两个区块链。

![](img/a564cc0c1e874f00e93d3bbc52254e13.png)

Hard Fork

## **10。对刀的攻击**

**道**是 Vitalik Buterin 在以太坊 **2016** 上创建的首批去中心化自治组织之一。这个概念是创建一个投资者主导的风险投资基金，帮助开发在以太坊上运行的分散化应用程序，这就像是一个崇高的事业，帮助其他人在区块链上启动他们自己的分散化项目。注意，道组织不属于任何国家。

2016 年 5 月**，当它最终出现时，他们通过众筹筹集了一亿五千万美元**150，000，000 美元，这是众筹史上最高的金额。人们相信这种分权的想法。****

****然而，不幸的是，在 DAO 代码中有一个错误，我宁愿说是一个漏洞..因为正如我们所说的，这些 DAO 完全由智能合约而不是人来管理。****

****结果刀被攻击黑了，在**2016 年 6 月**为**50**百万**(当时)，而这里有意思的是，攻击者并没有做什么“违法”的事情，他只是发现了代码中的这个漏洞，他利用这个漏洞把钱从刀的账户转到了自己的账户……******

****每个人都看到发生了什么，但他们对此无能为力，因为 DAO 是自主的，你不能只是告诉它做什么，它自己做事情，它受自己的算法控制，同时，合同中有一个漏洞，允许攻击者窃取以太。更不用说合同在本质上是不可改变的，一旦在区块链，你就不能改变它，你不能就这样去改变事情，因为这违背了区块链的目的，所以这是一个主要问题。****

****然而，好消息是，根据 DAO 的设计，有一个自动防故障机制，这意味着资金不能完全提取，直到大约 30 天后。****

****在这一点上，整个社区都有机会和时间去思考和决定该做什么，所以出现了一个两难的问题，那就是“代码就是法律？”。社区中的一部分人说*我们不会做任何事情，因为代码就是法律，我们不能就这么去改变那些被认为是不可改变的东西，所以我们必须照原样使用它。*****

****社区的另一部分人说*这是太多的钱了，5000 万美元，它属于人们，我们将通过改变规则来做艰苦的努力，这样，我们将能够改变合同，把钱拿回来，然后把它交给它的所有者。*****

****最终，他们做了一个硬分叉，这是维塔利克的倡议，但因为一些人不喜欢这个想法，不是因为他们想保护攻击者，而是为了维护区块链这个概念的完整性，这是一个聪明的契约，这是一个有理由的契约。****

****于是，以太坊被分成了 **ETH(以太坊)**和 **ETC(以太坊经典)**。在 ETH 版本中，盗版的钱被回收并分发给人们，但是在 ETC 版本中，钱仍然在攻击者手中。****

****可以说，这是两个平行的世界，在一个世界里，钱被找回，而在另一个世界里，钱仍在攻击者手中，因为被盗的钱在两个版本的以太坊中都翻了一倍。****

****最后黑客带着 ETC 版本的**6700 万**美元离开(67 因为是后来算的，交换和所有)。****

****请注意，问题出在 DAO 代码，而不是以太坊，问题出在智能合约的编码方式，而不是平台。****

****![](img/ff3b35338f49c45134f26663bb6e9bb5.png)****

****Hard fork****

*****【归功于梅丽莎】*****

****如果你喜欢我的故事，你可以在推特上关注我****

## ******资源******

****[https://www.superdatascience.com/courses/blockchain-a-z](https://www.superdatascience.com/courses/blockchain-a-z)****

****[https://repository . psau . edu . sa/jspui/retrieve/5965 ad5a-ec46-44ca-9109-a6bc 540991d 4/IRJAES-v4 N2 p 546y 19 . pdf](https://repository.psau.edu.sa/jspui/retrieve/5965ad5a-ec46-44ca-9109-a6bc540991d4/IRJAES-V4N2P546Y19.pdf)****

****[https://www.superdatascience.com/pages/blockchain](https://www.superdatascience.com/pages/blockchain)****

****[https://membres-ljk.imag.fr/Jean-Guillaume.Dumas/enseignments/ProjetsCrypto/以太坊/以太坊-yellowpaper.pdf](https://membres-ljk.imag.fr/Jean-Guillaume.Dumas/Enseignements/ProjetsCrypto/Ethereum/ethereum-yellowpaper.pdf)****

****[https://www.ethereum-france.com/quest-ce-que-lethereum/](https://www.ethereum-france.com/quest-ce-que-lethereum/)****

****[https://ethereum.org/en/](https://ethereum.org/en/)****

****[https://cryptoast.fr/gas/](https://cryptoast.fr/gas/)****

****[https://cryptoast.fr/quest-ce-que-la-machine-virtual-ethereum/](https://cryptoast.fr/quest-ce-que-la-machine-virtuelle-ethereum/)****

> ****新到交易?Try [加密交易机器人](/coinmonks/crypto-trading-bot-c2ffce8acb2a) or [复制交易](/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c)****