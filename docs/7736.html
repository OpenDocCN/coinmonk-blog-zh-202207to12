<html>
<head>
<title>Learn Ethereum programming #3. Ethereum accounts.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">学习以太坊编程#3。以太坊账户。</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/learn-ethereum-programming-2-ethereum-accounts-fca60dcb191b?source=collection_archive---------7-----------------------#2022-12-21">https://medium.com/coinmonks/learn-ethereum-programming-2-ethereum-accounts-fca60dcb191b?source=collection_archive---------7-----------------------#2022-12-21</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><figure class="fi fk ir is it iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff iq"><img src="../Images/f310339fce9edfa3a9c15c3de11fd5eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zxBKJ-8bKapwvEbc7Y2yFw.jpeg"/></div></div></figure><p id="3fe9" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">以太坊上有两种账户，<strong class="jd hu">外部自有账户</strong> (EOAs)和<strong class="jd hu">合约账户</strong>。eoa由私钥控制，而契约账户由代码本身控制。合约帐户不能发送交易，但可以通过向其他帐户发送消息来对交易做出反应(也称为内部交易)。</p><blockquote class="jz"><p id="456e" class="ka kb ht bd kc kd ke kf kg kh ki jy ek translated">从顶级交易者那里复制交易机器人。免费试用<a class="ae kj" href="https://coincodecap.com/go/pionex-coinmonks" rel="noopener ugc nofollow" target="_blank"/>。</p></blockquote><p id="8e24" class="pw-post-body-paragraph jb jc ht jd b je kk jg jh ji kl jk jl jm km jo jp jq kn js jt ju ko jw jx jy hm dt translated">eoa由用户自己通过生成一个32字节的随机数来创建。合同账户通过发送到地址0的交易创建。任何人都可以创建一个合同帐户，只需支付所需的燃气费。</p><p id="66e6" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">eoa只在以太坊上注册，可以说，当他们参与他们的第一笔交易时，无论是他们发送的交易还是为他们发送的交易。没有必要“警告”网络创建帐户。为了更好地理解这一点，我们先来了解以太坊的世界状态是什么样子的。</p><p id="4e4a" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">全局状态是一个键值数据库，其中的键是一个20字节的数字。关键是账户地址。EOAs的地址是根据私钥计算的，而协定的地址是根据创建该协定的帐户及其nonce计算的(见后面)。</p><p id="3041" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">只要一个账户没有与以太坊进行交易，该地址对应的密钥值就会为空。从第一笔交易开始，以太坊就开始存储账户信息。</p><p id="906e" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">账户有4条信息:<strong class="jd hu">余额</strong>、<strong class="jd hu">随机数</strong>、<strong class="jd hu">代码哈希</strong> e <strong class="jd hu">存储哈希</strong>。最后两个字段仅对于契约帐户是非空的，并且保存契约代码散列(字节码散列)及其存储散列。字节码是以太坊虚拟机执行的代码。存储器是存储契约的所有状态变量的地方。</p><p id="fe62" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">在下图中，我们看到了以太坊的状态。给定一个20字节的密钥，它的值是一组4个字段。</p><figure class="kq kr ks kt fq iu fe ff paragraph-image"><div class="fe ff kp"><img src="../Images/dfccd5ebd884437baffa45dfd0e4282e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1232/format:webp/1*yVpfMKa_wc0dTgPxK3vszw.png"/></div><figcaption class="ku kv fg fe ff kw kx bd b be z ek">The world state.</figcaption></figure><p id="4d20" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">我们可以通过JSON-RPC使用方法检索关于帐户的信息。我们开始吧。</p><h1 id="5457" class="ky kz ht bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv dt translated">正在检索帐户信息</h1><p id="7752" class="pw-post-body-paragraph jb jc ht jd b je lw jg jh ji lx jk jl jm ly jo jp jq lz js jt ju ma jw jx jy hm dt translated">以太坊中使用最多的方法之一就是恢复账户余额:<em class="mb"> eth_getBalance </em>。这种方法需要两个参数:帐户的地址和我们想要在哪个块中恢复余额。可以用十六进制或具有值的字符串来通知块号，“最早”、“最新”、“待定”、“安全”和“已完成”。</p><p id="d16a" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">以太坊上的所有历史信息都由称为<em class="mb">档案节点</em>的节点存储。因此，可以在过去的任何时间恢复任何帐户的余额。并非每个节点都是归档节点。一些节点只存储以太坊最近状态的信息。</p><p id="3f96" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">让我们在网络的最后一个区块恢复一个帐户的余额。</p><pre class="kq kr ks kt fq mc md me bn mf mg bi"><span id="bea2" class="mh kz ht md b be mi mj l mk ml">{<br/>    "method":"eth_getBalance",<br/>    "params":["0xC66d07097f4823343bf116463070B3be5e941C4E","latest"],<br/>    "id":1,<br/>    "jsonrpc":"2.0"<br/>}</span></pre><p id="e29a" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">请求的返回可以在下图中看到。</p><figure class="kq kr ks kt fq iu fe ff paragraph-image"><div class="fe ff mm"><img src="../Images/efffe7fcd9f8c87aafcae0cea8d61306.png" data-original-src="https://miro.medium.com/v2/resize:fit:802/format:webp/1*cRTsqPcmrSxoR5t93hyLqw.png"/></div><figcaption class="ku kv fg fe ff kw kx bd b be z ek">An account balance.</figcaption></figure><p id="3339" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">结果以十六进制形式返回，<code class="eh mn mo mp md b">0xb5e620f48000</code>。十进制的话，值<code class="eh mn mo mp md b">200000000000000</code>。这个值以卫为单位，这是乙醚的最小值，1个乙醚值10个卫。一个非常有用的把卫转换成以太和把以太转换成卫的地方是eth-converter.com。以上数值换算成0.0002乙醚。</p><p id="edf9" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated"><strong class="jd hu"> Nonce </strong>是一个唯一的数字，表示在外部账户的情况下，给定账户进行了多少次交易。对于合同帐户，nonce表示该合同已经创建了多少个合同。</p><p id="b2ca" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">我们可以使用<em class="mb"> eth_getTransactionCount </em>方法检索一个帐户的nonce。让我们检索一个帐户的总交易量。</p><pre class="kq kr ks kt fq mc md me bn mf mg bi"><span id="012b" class="mh kz ht md b be mi mj l mk ml">{<br/>    "jsonrpc": "2.0",<br/>    "method": "eth_getTransactionCount",<br/>    "params": ["0x27E0155021E63842aFb79F99da8B9592F429f614", "latest"],<br/>    "id": 0<br/>}</span></pre><p id="2565" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">在戈利那里，结果如下:</p><pre class="kq kr ks kt fq mc md me bn mf mg bi"><span id="2dbb" class="mh kz ht md b be mi mj l mk ml">{<br/>  "jsonrpc": "2.0",<br/>  "id": 0,<br/>  "result": "0x2d"<br/>}</span></pre><p id="5547" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">这意味着随机数是45。nonce是从零开始的，所以这个帐户已经发送了46笔交易。当发送下一个事务时，我们必须指示当前nonce，即45。</p><p id="f939" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">合同账户代码，字节码，也可以通过JSON-RPC，通过<em class="mb"> eth_getCode </em>方法来检索。下面我们来看一个例子。</p><pre class="kq kr ks kt fq mc md me bn mf mg bi"><span id="2fdd" class="mh kz ht md b be mi mj l mk ml">{<br/>    "jsonrpc": "2.0",<br/>    "method": "eth_getCode",<br/>    "params": ["0x24a1f370c33aF7476490d8fe70Fde5629A82842F", "latest"],<br/>    "id": 0<br/>}</span></pre><p id="30ce" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">结果将是字节码，一个长的十六进制数。</p><p id="fcd7" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">我们还可以通过<em class="mb">eth _ getstoraget</em>方法检索关于合同账户的状态变量的信息。但是，为了更好地理解这种方法，我们必须首先了解存储的结构。我们将在下一课中看到这一点。</p><h1 id="8732" class="ky kz ht bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv dt translated">如何创建一个以太坊帐户，简要回顾</h1><p id="9b97" class="pw-post-body-paragraph jb jc ht jd b je lw jg jh ji lx jk jl jm ly jo jp jq lz js jt ju ma jw jx jy hm dt translated">外部拥有的账户是一对密钥，公共的和私人的。公钥是从私钥派生出来的，所以只需要定义一个私钥。基本上，私钥是一个32字节的数字。我们可以天真地随机选择一个32字节的数字，但是人类不擅长选择真正的随机数。我们最好让软件为我们做这件事。</p><p id="2f00" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">创建和管理账户的软件被称为钱包。在本课程中，我们将看到更多关于钱包的内容。一些以太坊客户端如Geth (Go-Ethereum)有钱包功能，但目前不建议将执行客户端作为钱包使用。建议使用另一个软件作为钱包。</p><p id="55de" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">没有创建帐户的JSON-RPC方法，因为不仅不需要，而且发送私钥也不安全。我要明确的是，是用户远程创建自己的账户。只要账户没有与以太坊互动，网络就不会保留任何关于它们的信息。</p><p id="2e46" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated"><strong class="jd hu">感谢阅读！</strong></p><p id="fd6b" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">欢迎对本文提出意见和建议。</p><p id="6fb4" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">欢迎任何投稿。www.buymeacoffee.com/jpmorais<a class="ae kj" href="http://www.buymeacoffee.com/jpmorais" rel="noopener ugc nofollow" target="_blank">。</a></p><blockquote class="jz"><p id="d481" class="ka kb ht bd kc kd ke kf kg kh ki jy ek translated">加入Coinmonks <a class="ae kj" href="https://t.me/coincodecap" rel="noopener ugc nofollow" target="_blank">电报频道</a>和<a class="ae kj" href="https://www.youtube.com/c/coinmonks/videos" rel="noopener ugc nofollow" target="_blank"> Youtube频道</a>了解加密交易和投资</p></blockquote><h1 id="cd8b" class="ky kz ht bd la lb lc ld le lf lg lh li lj mq ll lm ln mr lp lq lr ms lt lu lv dt translated">另外，阅读</h1><ul class=""><li id="57d4" class="mt mu ht jd b je lw ji lx jm mv jq mw ju mx jy my mz na nb dt translated"><a class="ae kj" href="https://coincodecap.com/bookmap-review-2021-best-trading-software" rel="noopener ugc nofollow" target="_blank"> Bookmap评论</a> | <a class="ae kj" href="https://coincodecap.com/crypto-exchange-usa" rel="noopener ugc nofollow" target="_blank">美国5大最佳加密交易所</a></li><li id="1847" class="mt mu ht jd b je nc ji nd jm ne jq nf ju ng jy my mz na nb dt translated"><a class="ae kj" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">加密交易机器人</a> | <a class="ae kj" href="https://coincodecap.com/coingate-review" rel="noopener ugc nofollow" target="_blank">造币评论</a></li><li id="1e30" class="mt mu ht jd b je nc ji nd jm ne jq nf ju ng jy my mz na nb dt translated">最佳加密<a class="ae kj" rel="noopener" href="/coinmonks/hardware-wallets-dfa1211730c6">硬件钱包</a> | <a class="ae kj" rel="noopener" href="/coinmonks/bitbns-review-38256a07e161"> Bitbns评论</a></li><li id="4b3f" class="mt mu ht jd b je nc ji nd jm ne jq nf ju ng jy my mz na nb dt translated"><a class="ae kj" href="https://coincodecap.com/crypto-exchange-in-singapore" rel="noopener ugc nofollow" target="_blank">新加坡十大最佳加密交易所</a> | <a class="ae kj" href="https://coincodecap.com/buy-axs-token" rel="noopener ugc nofollow" target="_blank">购买AXS </a></li></ul></div></div>    
</body>
</html>