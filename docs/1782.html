<html>
<head>
<title>The Ethernaut Level 9 : Vault</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">以太9级:金库</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/ethernaut-vault-774f8875149f?source=collection_archive---------25-----------------------#2022-08-05">https://medium.com/coinmonks/ethernaut-vault-774f8875149f?source=collection_archive---------25-----------------------#2022-08-05</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><figure class="hs ht fm fo hu hv fe ff paragraph-image"><div role="button" tabindex="0" class="hw hx di hy bf hz"><div class="fe ff hr"><img src="../Images/96e2e108d2fd9e554d0d2832363034fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6wyT89PmxcnrDN6-O3Dt3g.png"/></div></div><figcaption class="ic id fg fe ff ie if bd b be z ek">ethernaut vault</figcaption></figure><div class=""/><div class=""><h2 id="0bb6" class="pw-subtitle-paragraph jf ih ii bd b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw ek translated">以太者跳马挑战的解决方案</h2></div><h1 id="e07a" class="jx jy ii bd jz ka kb kc kd ke kf kg kh jo ki jp kj jr kk js kl ju km jv kn ko dt translated">挑战简介</h1><p id="1b1b" class="pw-post-body-paragraph kp kq ii kr b ks kt jj ku kv kw jm kx ky kz la lb lc ld le lf lg lh li lj lk hm dt translated">以太英雄是一个基于Web3/Solidity的战争游戏，灵感来自overthewire.org，在以太坊虚拟机上玩。每一层都是需要‘黑’的智能合约。游戏是100%开源的，所有关卡都是其他玩家做出的贡献。请完成<a class="ae ll" href="https://ethernaut.openzeppelin.com/level/0x4E73b858fD5D7A5fc1c3455061dE52a53F35d966" rel="noopener ugc nofollow" target="_blank">这个</a>挑战，以便更好地了解游戏。</p><p id="9cb4" class="pw-post-body-paragraph kp kq ii kr b ks lm jj ku kv ln jm kx ky lo la lb lc lp le lf lg lq li lj lk hm dt translated">以太挑战:【https://ethernaut.openzeppelin.com/ T2】</p><h1 id="75f2" class="jx jy ii bd jz ka kb kc kd ke kf kg kh jo ki jp kj jr kk js kl ju km jv kn ko dt translated">所有问题</h1><ul class=""><li id="2284" class="lr ls ii kr b ks kt kv kw ky lt lc lu lg lv lk lw lx ly lz dt translated"><a class="ae ll" rel="noopener" href="/@kevin30101999/ethernaut-fallback-c8ead99dca4a">退路</a></li><li id="0508" class="lr ls ii kr b ks ma kv mb ky mc lc md lg me lk lw lx ly lz dt translated">余波</li><li id="2442" class="lr ls ii kr b ks ma kv mb ky mc lc md lg me lk lw lx ly lz dt translated"><a class="ae ll" rel="noopener" href="/@kevin30101999/ethernaut-coinflip-121f590d90af">硬币翻转</a></li><li id="614c" class="lr ls ii kr b ks ma kv mb ky mc lc md lg me lk lw lx ly lz dt translated"><a class="ae ll" rel="noopener" href="/@kevin30101999/ethernaut-force-b980687c77b">力</a></li><li id="1b9d" class="lr ls ii kr b ks ma kv mb ky mc lc md lg me lk lw lx ly lz dt translated">跳马(这个)</li></ul><h1 id="4647" class="jx jy ii bd jz ka kb kc kd ke kf kg kh jo ki jp kj jr kk js kl ju km jv kn ko dt translated">智能合同黑客！！</h1><figure class="mf mg mh mi fq hv"><div class="bz el l di"><div class="mj mk l"/></div></figure><h1 id="ba50" class="jx jy ii bd jz ka kb kc kd ke kf kg kh jo ki jp kj jr kk js kl ju km jv kn ko dt translated">工作</h1><p id="0eee" class="pw-post-body-paragraph kp kq ii kr b ks kt jj ku kv kw jm kx ky kz la lb lc ld le lf lg lh li lj lk hm dt translated">解锁金库通过关卡！</p><h1 id="461c" class="jx jy ii bd jz ka kb kc kd ke kf kg kh jo ki jp kj jr kk js kl ju km jv kn ko dt translated">可能有帮助的事情</h1><p id="45be" class="pw-post-body-paragraph kp kq ii kr b ks kt jj ku kv kw jm kx ky kz la lb lc ld le lf lg lh li lj lk hm dt translated">合同的结帐存储布局</p></div><div class="ab cl ml mm hb mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="hm hn ho hp hq"><h2 id="e087" class="ms jy ii bd jz mt mu mv kd mw mx my kh ky mz na kj lc nb nc kl lg nd ne kn nf dt translated">理解合同</h2><p id="f4be" class="pw-post-body-paragraph kp kq ii kr b ks kt jj ku kv kw jm kx ky kz la lb lc ld le lf lg lh li lj lk hm dt translated"><strong class="kr ij">第8–11行</strong>这里我们在构造函数中设置<strong class="kr ij">密码</strong>和<strong class="kr ij">锁定</strong>变量的值。为了完成任务，我们需要以某种方式将<strong class="kr ij">锁定</strong>的状态改为假。</p><p id="1842" class="pw-post-body-paragraph kp kq ii kr b ks lm jj ku kv ln jm kx ky lo la lb lc lp le lf lg lq li lj lk hm dt translated"><strong class="kr ij">第13–16行</strong>我们可以使用<strong class="kr ij"> unlock() </strong>方法来做到这一点，但这需要我们有密码值来解锁。</p></div><div class="ab cl ml mm hb mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="hm hn ho hp hq"><h2 id="eef0" class="ms jy ii bd jz mt mu mv kd mw mx my kh ky mz na kj lc nb nc kl lg nd ne kn nf dt translated">解决办法</h2><p id="03ea" class="pw-post-body-paragraph kp kq ii kr b ks kt jj ku kv kw jm kx ky kz la lb lc ld le lf lg lh li lj lk hm dt translated">解决方案是，即使变量被标记为私有，我们也可以在区块链上看到它的值！！是的，如果这让你感到震惊，请再读一遍。将变量标记为私有只会阻止其他智能合约访问它。我们可以通过查看合同的存储布局来访问任何存储变量。</p><p id="ef4f" class="pw-post-body-paragraph kp kq ii kr b ks lm jj ku kv ln jm kx ky lo la lb lc lp le lf lg lq li lj lk hm dt translated">现在，让我们了解一下解决这一挑战的存储布局。</p><p id="1aa9" class="pw-post-body-paragraph kp kq ii kr b ks lm jj ku kv ln jm kx ky lo la lb lc lp le lf lg lq li lj lk hm dt translated">以太坊虚拟机上的每个智能合约可以将其变量值存储在一个永久存储器<strong class="kr ij">中</strong>。这个永久存储器就像一个数组，数组的每个块可以存储32字节的数据。这种块也称为槽。这些插槽总共有<strong class="kr ij"> 2个⁵⁶ </strong>。好吧，如果你在想，如果那已经耗尽了呢？新的智能合约将在哪里存储其变量。那么让我告诉你，这个数字远远大于整个地球上的原子数量。所以，至少在这一生中我们不会面对这个问题。</p><p id="2428" class="pw-post-body-paragraph kp kq ii kr b ks lm jj ku kv ln jm kx ky lo la lb lc lp le lf lg lq li lj lk hm dt translated">让我们看一下智能合同的简化存储模型，以便更好地理解它。我们的智能合约中有2个变量<strong class="kr ij">锁定</strong>和<strong class="kr ij">密码。在渗透存储上看起来会像这样。</strong></p><figure class="mf mg mh mi fq hv fe ff paragraph-image"><div role="button" tabindex="0" class="hw hx di hy bf hz"><div class="fe ff hr"><img src="../Images/02de68b4df9c8c69869ff3f551a33d23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PuInToQ7YH73swcT9nBgkQ.png"/></div></div><figcaption class="ic id fg fe ff ie if bd b be z ek">Simplified version of memory Layout</figcaption></figure><p id="a657" class="pw-post-body-paragraph kp kq ii kr b ks lm jj ku kv ln jm kx ky lo la lb lc lp le lf lg lq li lj lk hm dt translated">现在，如果我们知道智能合同的地址，我们还可以访问其存储内存，并获得<strong class="kr ij">密码的值。</strong>我们可以使用ethersjs、web3等库。在我们的控制台中，我们有web3的实例，因此我们将使用它。</p><ul class=""><li id="3366" class="lr ls ii kr b ks lm kv ln ky ng lc nh lg ni lk lw lx ly lz dt translated">您可以在控制台<br/> <code class="eh nj nk nl nm b">await contract.address</code>中使用下面一行获取您的以太网联系人地址</li><li id="6f62" class="lr ls ii kr b ks ma kv mb ky mc lc md lg me lk lw lx ly lz dt translated">要获取插槽1(存储密码的位置)的值，请运行以下代码。<br/>T1。这里第一个参数是合同地址，第二个是槽号。</li><li id="3885" class="lr ls ii kr b ks ma kv mb ky mc lc md lg me lk lw lx ly lz dt translated">复制该值，并使用该值调用契约中的<strong class="kr ij"> unlock() </strong>方法。<br/> <code class="eh nj nk nl nm b">await contract.unlock(“&lt;Copied Value&gt;”)</code>。</li><li id="56e3" class="lr ls ii kr b ks ma kv mb ky mc lc md lg me lk lw lx ly lz dt translated">检查<strong class="kr ij">锁定</strong>的值并提交实例。</li></ul><h2 id="d500" class="ms jy ii bd jz mt mu mv kd mw mx my kh ky mz na kj lc nb nc kl lg nd ne kn nf dt translated">结论</h2><p id="ff75" class="pw-post-body-paragraph kp kq ii kr b ks kt jj ku kv kw jm kx ky kz la lb lc ld le lf lg lh li lj lk hm dt translated">重要的是要记住，将变量标记为私有只会阻止其他契约访问它。标记为私有和局部变量的状态变量仍然可以公开访问。因此，我们应该避免在智能合约中存储任何密码或API密钥。安全存储它们的一种方法是加密其值，然后存储它。这样，没有人可以得到价值，除非他们有加密。</p><p id="cd18" class="pw-post-body-paragraph kp kq ii kr b ks lm jj ku kv ln jm kx ky lo la lb lc lp le lf lg lq li lj lk hm dt translated">这个挑战很快就能解决，但是写这篇文章花了更多的时间。请欣赏👏(鼓掌)如果你从中得到任何有意义的东西。此外，如果我在评论中遗漏了什么，请纠正我。</p><blockquote class="nn"><p id="4455" class="no np ii bd nq nr ns nt nu nv nw lk ek translated">加入Coinmonks <a class="ae ll" href="https://t.me/coincodecap" rel="noopener ugc nofollow" target="_blank">电报频道</a>和<a class="ae ll" href="https://www.youtube.com/c/coinmonks/videos" rel="noopener ugc nofollow" target="_blank"> Youtube频道</a>了解加密交易和投资</p></blockquote><h1 id="4012" class="jx jy ii bd jz ka kb kc kd ke kf kg kh jo nx jp kj jr ny js kl ju nz jv kn ko dt translated">另外，阅读</h1><ul class=""><li id="5650" class="lr ls ii kr b ks kt kv kw ky lt lc lu lg lv lk lw lx ly lz dt translated"><a class="ae ll" href="https://coincodecap.com/buy-shiba-bitbns" rel="noopener ugc nofollow" target="_blank">如何在Bitbns上购买柴犬(SHIB)币？</a> | <a class="ae ll" href="https://coincodecap.com/buy-floki-inu-token" rel="noopener ugc nofollow" target="_blank">购买弗洛基</a></li><li id="f22d" class="lr ls ii kr b ks ma kv mb ky mc lc md lg me lk lw lx ly lz dt translated"><a class="ae ll" href="https://coincodecap.com/coinflex-review" rel="noopener ugc nofollow" target="_blank"> CoinFLEX评论</a> | <a class="ae ll" href="https://coincodecap.com/aex-exchange-review" rel="noopener ugc nofollow" target="_blank"> AEX交易所评论</a> | <a class="ae ll" href="https://coincodecap.com/upbit-review" rel="noopener ugc nofollow" target="_blank"> UPbit评论</a></li><li id="9409" class="lr ls ii kr b ks ma kv mb ky mc lc md lg me lk lw lx ly lz dt translated"><a class="ae ll" href="https://coincodecap.com/best-cryptocurrency-blogs" rel="noopener ugc nofollow" target="_blank">十大最佳加密货币博客</a> | <a class="ae ll" href="https://coincodecap.com/youhodler-review" rel="noopener ugc nofollow" target="_blank"> YouHodler评论</a></li><li id="35c0" class="lr ls ii kr b ks ma kv mb ky mc lc md lg me lk lw lx ly lz dt translated"><a class="ae ll" href="https://coincodecap.com/ascendex-margin-trading" rel="noopener ugc nofollow" target="_blank"> AscendEx保证金交易</a> | <a class="ae ll" href="https://coincodecap.com/bitfinex-staking" rel="noopener ugc nofollow" target="_blank"> Bitfinex赌注</a></li><li id="2440" class="lr ls ii kr b ks ma kv mb ky mc lc md lg me lk lw lx ly lz dt translated"><a class="ae ll" href="https://coincodecap.com/best-cardano-wallets" rel="noopener ugc nofollow" target="_blank">最好的卡达诺钱包</a> | <a class="ae ll" href="https://coincodecap.com/bingbon-copy-trading" rel="noopener ugc nofollow" target="_blank"> Bingbon副本交易</a></li></ul></div></div>    
</body>
</html>