# Uniswap v2 æä¾›æ›´ä¼˜æƒ çš„ä»·æ ¼

> åŸæ–‡ï¼š<https://medium.com/coinmonks/better-price-feeds-with-uniswap-v2-dc0dc133347a?source=collection_archive---------1----------------------->

## äº†è§£ Uniswap v2 ä»·æ ¼æº

![](img/afaf076647227246f9cde1ad4253aaaf.png)

å¤§å®¶å¥½ï¼Œä»Šå¤©æˆ‘ä»¬å°†è®¨è®º **Uniswap v2 ä»·æ ¼åé¦ˆ**ä»¥åŠ Uniswap v2 å¦‚ä½•ä¸ºæ‚¨æä¾›**æ›´å¥½çš„ä»·æ ¼åé¦ˆ**ã€‚

å¿«é€Ÿå¢é•¿çš„åˆ†æ•£é‡‘è(DeFi)ç”Ÿæ€ç³»ç»Ÿæ—¨åœ¨ä½¿ç”¨åˆ†æ•£ã€éæ‰˜ç®¡çš„é‡‘èäº§å“æ¥å–ä»£è´·æ¬¾ã€ä¿é™©å’Œè¡ç”Ÿå“ç­‰é‡‘èåº”ç”¨ä¸­çš„é›†ä¸­å¼ä¸­é—´äººã€‚

**Uniswap** æ˜¯ **DeFi** ç”Ÿæ€ç³»ç»Ÿä¸­æ ¸å¿ƒäº§å“ä¹‹ä¸€çš„ä¸€ä¸ªä¾‹å­ï¼Œå³åˆ†æ•£åŠ å¯†äº¤æ˜“æ‰€ï¼Œæˆ– **DEX** ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬æ¥è®¨è®ºä¸€ä¸‹ Uniswap æ˜¯ä»€ä¹ˆã€‚

# ä»€ä¹ˆæ˜¯ Uniswapï¼Ÿ

**Uniswap** æ˜¯**ä»¥å¤ªåŠ**ä¸Šçš„ä¸€ä¸ªåè®®ï¼Œç”¨äºäº¤æ¢ **ERC20** ä»¤ç‰Œï¼Œä¸éœ€è¦ä¹°å–åŒæ–¹åˆ›é€ éœ€æ±‚ã€‚æ¢å¥è¯è¯´ï¼ŒUniswap æ˜¯ä¸€ä¸ªåŸºäºä»¥å¤ªåŠçš„**å»ä¸­å¿ƒåŒ–äº¤æ¢(DEX)** ï¼Œå…è®¸ä»»ä½•äºº**äº¤æ¢** ERC20 ä»¤ç‰Œã€‚2020 å¹´ 9 æœˆï¼ŒUniswap æ¨å‡ºäº†å…¶ **UNI governance token** ï¼Œå‘ 9 æœˆå‰ä½¿ç”¨è¯¥åè®®çš„ä»»ä½•äººç©ºæŠ•ã€‚ **Uniswap V3** äº 2021 å¹´ 5 æœˆæ¨å‡ºï¼Œå¢åŠ äº†æ–°åŠŸèƒ½ï¼ŒåŒ…æ‹¬é›†ä¸­æµåŠ¨æ€§å’Œå¤šå±‚è´¹ç”¨ã€‚

ä¸å¤§å¤šæ•°æ—¨åœ¨æ”¶å–è´¹ç”¨çš„äº¤æ˜“æ‰€ä¸åŒï¼ŒUniswap çš„åŠŸèƒ½æ˜¯ä¸€ç§å…¬å…±äº§å“â€”â€”ç¤¾åŒºäº¤æ˜“ä»£å¸çš„å·¥å…·ï¼Œæ²¡æœ‰å¹³å°è´¹æˆ–ä¸­é—´äººã€‚æ­¤å¤–ï¼Œä¸å¤§å¤šæ•°æ’®åˆä¹°å®¶å’Œå–å®¶ä»¥ç¡®å®šä»·æ ¼å¹¶æ‰§è¡Œäº¤æ˜“çš„äº¤æ˜“æ‰€ä¸åŒï¼ŒUniswap ä½¿ç”¨ä¸€ä¸ªç®€å•çš„æ•°å­¦ç­‰å¼ã€ä»£å¸æ± å’Œ ETH æ± æ¥åšåŒæ ·çš„å·¥ä½œã€‚

# Uniswap v1 ä¸ v2

è®©æˆ‘ä»¬æé†’è‡ªå·±å®ƒçš„è¿›åŒ–è·¯å¾„å’Œ **v1** ä¸ **v2** çš„åŒºåˆ«ã€‚è¿™å°†æœ‰åŠ©äºæˆ‘ä»¬ç†è§£ä¸ºä»€ä¹ˆ Uniswap æˆä¸ºè¿™ä¸ªé¢†åŸŸçš„é¢†å¯¼è€…æ˜¯ç†æ‰€å½“ç„¶çš„äº‹æƒ…ã€‚

# uni swap v1â€”AMMs ç®€ä»‹

**Uniswap v1** äº 2018 å¹´ 11 æœˆ 2 æ—¥åœ¨**ä»¥å¤ªåŠä¸»ç½‘**é¦–å‘ã€‚å°½ç®¡å®ƒä¸æ˜¯ç¬¬ä¸€ä¸ª DEXï¼Œä½†å®ƒè‚¯å®šæ˜¯ç¬¬ä¸€ä¸ªå¸å¼•å¯†ç çˆ±å¥½è€…çœ¼çƒçš„ã€‚åœ¨ Uniswap ä¹‹å‰ï¼Œ [EtherDelta](https://etherdelta.com/) å‡ ä¹æ˜¯å”¯ä¸€ä¸€ä¸ªè·å¾—ä¸€äº›å…³æ³¨çš„ DEXã€‚å°½ç®¡å¦‚æ­¤ï¼Œå®ƒè¿˜æ˜¯åŸºäº**è®¢å•ç°¿**æ¨¡å¼ï¼Œè¿™å¹¶ä¸è¢«è®¤ä¸ºæ˜¯åˆ†æ•£äº¤æ˜“æ‰€çš„æœ€ä½³è§£å†³æ–¹æ¡ˆï¼Œå› ä¸ºå®ƒå¸¦æ¥äº†æˆæœ¬ã€ç”¨æˆ·ä½“éªŒå·®å’Œç¼ºä¹æµåŠ¨æ€§ç­‰é—®é¢˜ã€‚

ä¸ EtherDelta ä¸åŒï¼ŒUniswap åŸºäº**è‡ªåŠ¨åšå¸‚å•†(AMM)** æ¨¡å¼ã€‚è¿™ä¸ªæ¨¡å‹ä¾é ä¸€ä¸ª**æ•°å­¦å…¬å¼**æ¥ç»™èµ„äº§å®šä»·ã€‚AMMs ä¾èµ–äºæµåŠ¨æ€§æä¾›è€…(LP)è€Œä¸æ˜¯ä¸‹å•ï¼ŒæµåŠ¨æ€§æä¾›è€…æŠ•èµ„äºæµåŠ¨æ€§æ± ä¸­çš„äº¤æ˜“å¯¹ã€‚

Uniswap æ˜¯ä¸€å®¶**æ’å®šåŠŸèƒ½åšå¸‚å•†**ï¼Œæˆ–è€…æ›´å…·ä½“åœ°è¯´ï¼Œæ˜¯ä¸€å®¶æ’å®šäº§å“åšå¸‚å•†ã€‚è¿™æ„å‘³ç€æ¯ä¸ªæµåŠ¨æ€§æ± ä¸­äº¤æ˜“å¯¹çš„æ¯”ç‡å¿…é¡»éµå¾ªå¸¸æ•°ä¹˜ç§¯å…¬å¼:

***x*y=k***

å…¶ä¸­ *k* ä¸ºå¸¸æ•°ï¼Œ *x* ä¸ºç¬¬ä¸€é¡¹èµ„äº§çš„å‚¨å¤‡ï¼Œ *y* ä¸ºç¬¬äºŒé¡¹èµ„äº§çš„å‚¨å¤‡ã€‚

è¿™æ„å‘³ç€æ‰€æœ‰æœ‰é™åˆä¼™äººéƒ½è¦ä»¥ä¸æ”¹å˜ k çš„æ–¹å¼æä¾›é¢å¤–çš„æµåŠ¨æ€§ã€‚æ­¤å¤–ï¼Œæ¯ä¸ªäº¤æ˜“è€…éƒ½å¿…é¡»çŸ¥é“é”å®šçš„èµ„é‡‘æ€»é‡ï¼Œä»¥é¿å…é«˜æ»‘ç‚¹ã€‚

Uniswap v1 ä»…æ”¯æŒ **ETH-ERC20** äº¤æ˜“å¯¹ï¼Œå› æ­¤æ‚¨åªèƒ½ç”¨ ETH äº¤æ¢ä¸€ä¸ª ERC20 ä»¤ç‰Œã€‚æ‰€ä»¥ï¼Œå¦‚æœä½ æƒ³æŠŠæ¢æˆæˆ´ï¼Œä½ å¿…é¡»æŠŠæ¢æˆ ETHï¼Œç„¶åå» ETH-DAI æ± å¾—åˆ°æˆ´ã€‚

![](img/1a01abea83b11ebe973d4908f913f073.png)

Uniswap v1 Example â€” DAI to USDC Swap

Uniswap v1 å¼•å…¥çš„å¦ä¸€ä¸ªç‰¹æ€§æ˜¯ **LP ä»¤ç‰Œ**ã€‚æ¯ä¸ªæµåŠ¨æ€§æä¾›è€…å°†è·å¾—ä¸ä»–ä»¬å¢åŠ çš„æ€»æµåŠ¨æ€§çš„ç™¾åˆ†æ¯”æˆæ¯”ä¾‹çš„ LP ä»¤ç‰Œçš„æ•°é‡ã€‚è¿™äº› LP ä»£å¸ä»£è¡¨ LP å¯¹æ± çš„è´¡çŒ®ï¼Œå¹¶ä¸”å¯ä»¥è¢«å‡ºå”®/äº¤æ˜“æˆ–ç‡ƒçƒ§ä»¥èµå›å­˜æ”¾çš„ä»£å¸ã€‚æ­¤å¤–ï¼ŒUniswap ä¸Šçš„æ¯ç¬”äº¤æ˜“éƒ½ä¼šäº§ç”Ÿ 0.30%çš„äº¤æ˜“è´¹ã€‚è¿™äº›è´¹ç”¨ä½œä¸ºå¯¹æä¾›æµåŠ¨æ€§çš„æœ‰é™åˆä¼™äººçš„å¥–åŠ±è¢«è‡ªåŠ¨å‘é€åˆ°æµåŠ¨æ€§å‡†å¤‡é‡‘ã€‚

# uni WAP v2â€”ä¼˜åŒ–ã€åˆ†æ•£åŒ–å’Œå®‰å…¨æ€§

Uniswap v1 æ˜¯ä¸€ç§æ–°å‹åˆ†æ•£å¸‚åœºçš„æ¦‚å¿µéªŒè¯ã€‚å®ƒçš„åˆæ­¥æˆåŠŸæ˜¯å›¢é˜Ÿç«‹å³é‡ç”³ä¸€ä¸ªæ›´å¥½çš„è§£å†³æ–¹æ¡ˆçš„ä¿¡å·ã€‚Uniswap v2 äº 2020 å¹´ 5 æœˆæ¨å‡ºã€‚

ç®€è€Œè¨€ä¹‹ï¼Œ **Uniswap v2** æ˜¯ Uniswap v1 çš„ä¸€ä¸ªæ›´å¥½ã€æ›´ç”¨æˆ·å‹å¥½çš„ç‰ˆæœ¬ã€‚è¿™ä¸ªæ–°ç‰ˆæœ¬ä¸­è§£å†³çš„ v1 çš„ä¸»è¦é—®é¢˜æ˜¯ç¼ºå°‘ ERC20-ERC20 ä»¤ç‰Œæ± ã€‚å¯¹äºé‚£äº›æƒ³ç”¨ä¸€ä¸ª **ERC20** ä»¤ç‰Œæ¢å¦ä¸€ä¸ªä»¤ç‰Œçš„ç”¨æˆ·æ¥è¯´ï¼Œè¿™å¯¼è‡´äº†æ›´é«˜çš„æˆæœ¬å’Œå»¶è¯¯ã€‚

## ERC20-ERC20 æ± 

Uniswap v2 å¼•å…¥äº† ERC20-ERC20 æµåŠ¨æ€§æ± æ¥è§£å†³è¿™ä¸ª" **ETH æ¡¥æ¥**"é—®é¢˜ã€‚ä»–ä»¬ç”šè‡³åœ¨æ ¸å¿ƒåˆåŒä¸­ä½¿ç”¨åŒ…è£… ETH è€Œä¸æ˜¯æœ¬åœ° ETHã€‚ç„¶è€Œï¼Œæœ€ç»ˆç”¨æˆ·ä»ç„¶å¯ä»¥é€šè¿‡å¸®åŠ©è€…åˆåŒä½¿ç”¨ ETHã€‚

![](img/bf0f63d8bfc9fa6f2308fd788725a9fb.png)

Uniswap V2 â€” ETH Bridging

## ç¥è°•

Uniswap çš„ç¬¬äºŒä¸ªç‰ˆæœ¬è¿˜å®ç°äº†æ–°åŠŸèƒ½ï¼Œæ”¯æŒé«˜åº¦åˆ†æ•£å’ŒæŠ—æ“çºµçš„é“¾ä¸Š**ä»·æ ¼é¦ˆé€**ã€‚

åŸºæœ¬æ€æƒ³æ˜¯é€šè¿‡å°†ç´¯ç§¯ä»·æ ¼(æ•´ä¸ªåˆåŒå†å²ä¸­æ¯ç§’çš„ Uniswap ä»·æ ¼ä¹‹å’Œ)é™¤ä»¥æ—¶é—´æˆ³æŒç»­æ—¶é—´(æŒç»­æ—¶é—´ç»“æŸæ—¶é—´æˆ³å‡å»æŒç»­æ—¶é—´å¼€å§‹æ—¶é—´æˆ³)æ¥è®¡ç®—ä¸€æ®µæ—¶é—´å†…çš„å¹³å‡ä»·æ ¼(æ—¶é—´åŠ æƒå¹³å‡ä»·æ ¼â€” **TWAP** )ã€‚

![](img/b48db0c2fb92587300b27b364ca19409.png)

Uniswap v2 â€” Time Weighted Average Price â€” **TWAP**

## é—ªå­˜äº’æ¢

v2 æ¨å‡ºçš„å¦ä¸€ä¸ªçªç ´æ€§ç‰¹æ€§æ˜¯**é—ªå­˜äº¤æ¢**ã€‚è¿™äº› Flash Swaps å…è®¸ç”¨æˆ·åœ¨ Uniswap ä¸Šæå–ä»»æ„æ•°é‡çš„ ERC20 ä»¤ç‰Œï¼Œæ— éœ€ä»»ä½•å‰æœŸè´¹ç”¨ï¼Œå¹¶ä¸”å¯ä»¥å¯¹å…¶è¿›è¡Œä»»ä½•æ“ä½œ(æ‰§è¡Œä»»æ„ä»£ç )ï¼Œå‰ææ˜¯åœ¨äº¤æ˜“æ‰§è¡Œç»“æŸæ—¶ï¼Œä»–ä»¬å¯ä»¥:

*   æ”¯ä»˜æ‰€æœ‰æå–çš„ ERC20 ä»£å¸
*   æ”¯ä»˜ä¸€å®šæ¯”ä¾‹çš„ ERC20 ä»£å¸ï¼Œå¹¶è¿”è¿˜å‰©ä½™éƒ¨åˆ†
*   é€€å›æ‰€æœ‰æå–çš„ ERC20 ä»£å¸

![](img/8a56610cd8ae0d8e357e4ebfdc7e1ecc.png)

Uniswap v2 Flash Swaps

Uniswap è¿˜å¼•å…¥äº†**åè®®è´¹**(å¯ä»¥é€šè¿‡åˆ†æ•£çš„ç¤¾åŒºæŠ•ç¥¨æ¥å¼€å¯/å…³é—­ï¼Œå°†æ¯ 0.30%çš„äº¤æ˜“è´¹ä¸­çš„ 0.05%äº¤ç»™ Uniswap åŸºé‡‘ï¼Œä»¥èµ„åŠ©æœªæ¥çš„å‘å±•ã€‚

å³ä½¿åœ¨ v2 æ¨å‡ºå Uniswap v1 ä¾ç„¶å­˜åœ¨ï¼Œä½†æ²¡è¿‡å¤šä¹…ï¼ŒLPs å°±å°†å¤§éƒ¨åˆ†æµåŠ¨æ€§ä»ä¸€ä¸ªç‰ˆæœ¬è½¬ç§»åˆ°äº†å¦ä¸€ä¸ªç‰ˆæœ¬ã€‚Uniswap v2 å–å¾—äº†å·¨å¤§çš„æˆåŠŸï¼Œæ—¥äº¤æ˜“é‡ç”šè‡³è¶…è¿‡äº†ä¸€äº›æœ€è‘—åçš„ä¸­å¤®äº¤æ˜“æ‰€ã€‚è¿™ä¸€æˆåŠŸä½¿ Uniswap v2 æˆä¸ºæœ€åˆ†å‰çš„é¡¹ç›®ä¹‹ä¸€ï¼ŒSushiSwap æ˜¯å…¶æœ€å¤§çš„ç«äº‰å¯¹æ‰‹ï¼Œè¢«åˆ›å»ºä¸ºåˆ†å‰é¡¹ç›®ã€‚SushiSwap çš„è¿™ä¸€å¸è¡€é¬¼æ”»å‡»è€—å°½äº† Uniswap çš„å¾ˆå¤§ä¸€éƒ¨åˆ†æµåŠ¨æ€§ï¼Œå¯¼è‡´äº† 2020 å¹´ 9 æœˆè‘—åçš„ **UNI token ç©ºæŠ•**ã€‚

# Uniswap V2 æä¾›æ›´å¥½çš„ä»·æ ¼é¦ˆé€

**Uniswap v2** å‘å¸ƒäº†è¯¥å¹³å°çš„ç¬¬äºŒä¸ªä¸»è¦ç‰ˆæœ¬ï¼Œå®ƒå…·æœ‰**æ›´å¥½çš„ä»·æ ¼åé¦ˆ** oracle çš„ç‰¹æ€§ï¼ŒåŒæ—¶å¼•å…¥äº†ä¸€ä¸ª**é—ªè´·**çš„å˜ä½“ã€‚

# Uniswap ä»·æ ¼æ˜¯å¦‚ä½•ç¡®å®šçš„ï¼Ÿ

æ­£å¦‚æˆ‘ä»¬åœ¨ Uniswap æ¦‚è¿°ä¸­äº†è§£åˆ°çš„ï¼ŒUniswap ä¸Šçš„æ¯ä¸€å¯¹å®é™…ä¸Šéƒ½æ˜¯ç”±æµåŠ¨æ€§æ± æ”¯æ’‘çš„ã€‚**æµåŠ¨æ€§æ± **æ˜¯æ™ºèƒ½åˆçº¦ï¼ŒæŒæœ‰ä¸¤ç§ç‹¬ç‰¹ä»£å¸çš„ä½™é¢ï¼Œå¹¶æ‰§è¡Œæœ‰å…³å­˜æ¬¾å’Œå–æ¬¾çš„è§„åˆ™ã€‚é¦–è¦è§„åˆ™æ˜¯**ä¸å˜ä¹˜ç§¯å…¬å¼**ã€‚å½“ä»£å¸è¢«æå–(è´­ä¹°)æ—¶ï¼Œå¿…é¡»å­˜å…¥(å‡ºå”®)ä¸€å®šæ¯”ä¾‹çš„é‡‘é¢ä»¥ä¿æŒä¸å˜ã€‚æ± ä¸­ä»£å¸çš„æ¯”ç‡ï¼Œç»“åˆå¸¸æ•°ä¹˜ç§¯å…¬å¼ï¼Œæœ€ç»ˆå†³å®šäº†äº’æ¢æ‰§è¡Œçš„ä»·æ ¼ã€‚

# Uniswap å¦‚ä½•å¤„ç†ä»·æ ¼

åœ¨ Uniswap V1ï¼Œäº¤æ˜“æ€»æ˜¯ä»¥æ‰§è¡Œæ—¶è®¡ç®—çš„â€œæœ€ä½³å¯èƒ½â€ä»·æ ¼æ‰§è¡Œã€‚æœ‰ç‚¹ä»¤äººå›°æƒ‘çš„æ˜¯ï¼Œè¿™ç§è®¡ç®—å®é™…ä¸Šæ˜¯ç”¨ä¸¤ç§ä¸åŒå…¬å¼ä¸­çš„ä¸€ç§æ¥å®Œæˆçš„ï¼Œè¿™å–å†³äºäº¤æ˜“æ˜¯å¦æŒ‡å®šäº†ç¡®åˆ‡çš„ ***æŠ•å…¥*æˆ–*äº§å‡º*** é‡‘é¢ã€‚ä»åŠŸèƒ½ä¸Šæ¥è¯´ï¼Œè¿™ä¸¤ä¸ªåŠŸèƒ½ä¹‹é—´çš„å·®å¼‚å¾ˆå°ï¼Œä½†æ˜¯å·®å¼‚çš„å­˜åœ¨å¢åŠ äº†æ¦‚å¿µçš„å¤æ‚æ€§ã€‚æœ€åˆåœ¨ V2 æ”¯æŒè¿™ä¸¤ç§åŠŸèƒ½çš„å°è¯•è¢«è¯æ˜æ˜¯ä¸åˆé€‚çš„ï¼Œäºæ˜¯å†³å®šä¸åœ¨æ ¸å¿ƒä¸­æä¾›ä»»ä½•å®šä»·åŠŸèƒ½ã€‚ç›¸åï¼Œpairs åœ¨æ¯æ¬¡äº¤æ˜“åç›´æ¥æ£€æŸ¥ä¸å˜é‡æ˜¯å¦æ»¡è¶³(è€ƒè™‘è´¹ç”¨)ã€‚è¿™æ„å‘³ç€ï¼Œ **V2** å¯¹ç®€å•è€Œé€æ˜åœ°ç¡®ä¿ä»–ä»¬è‡ªå·±çš„å®‰å…¨ï¼Œå¾ˆå¥½åœ°åˆ†ç¦»äº†å…³æ³¨ç‚¹ï¼Œè€Œä¸æ˜¯ä¾èµ–äºå®šä»·å‡½æ•°æ¥*ä¹Ÿ*å®æ–½ä¸å˜é‡ã€‚ä¸€ä¸ªä¸‹æ¸¸å¥½å¤„æ˜¯ **V2** å¯¹æ›´è‡ªç„¶åœ°æ”¯æŒå‡ºç°çš„å…¶ä»–é£æ ¼çš„äº¤æ˜“(ä¾‹å¦‚ï¼Œåœ¨æ‰§è¡Œæ—¶äº¤æ˜“åˆ°ç‰¹å®šä»·æ ¼)ã€‚

ä»é«˜å±‚æ¬¡æ¥è¯´ï¼Œåœ¨ Uniswap V2 å…¬å¸ï¼Œ*äº¤æ˜“å¿…é¡»åœ¨å¤–å›´è¿›è¡Œå®šä»·*ã€‚å¥½æ¶ˆæ¯æ˜¯ï¼Œè¯¥åº“æä¾›äº†å„ç§æ—¨åœ¨ä½¿è¿™å˜å¾—éå¸¸ç®€å•çš„å‡½æ•°ï¼Œè·¯ç”±å™¨ä¸­çš„æ‰€æœ‰äº¤æ¢å‡½æ•°åœ¨è®¾è®¡æ—¶éƒ½è€ƒè™‘åˆ°äº†è¿™ä¸€ç‚¹ã€‚

# å®šä»·äº¤æ˜“

å½“**åœ¨ Uniswap ä¸Šäº¤æ¢ä»£å¸**æ—¶ï¼Œé€šå¸¸å¸Œæœ›ä»¥ ***çš„ç¡®åˆ‡è¾“å…¥é‡‘é¢*** è·å¾—å°½å¯èƒ½å¤šçš„è¾“å‡ºä»£å¸ï¼Œæˆ–è€…ä»¥ ***çš„ç¡®åˆ‡è¾“å‡ºé‡‘é¢*** æ”¯ä»˜å°½å¯èƒ½å°‘çš„è¾“å…¥ä»£å¸ã€‚ä¸ºäº†è®¡ç®—è¿™äº›é‡‘é¢ï¼ŒåˆåŒå¿…é¡»æŸ¥æ‰¾ä¸€å¯¹è´§å¸çš„ ***å½“å‰å‚¨å¤‡*** ï¼Œä»¥ä¾¿äº†è§£**å½“å‰ä»·æ ¼**æ˜¯å¤šå°‘ã€‚ç„¶è€Œï¼Œ ***ä¸å®‰å…¨*** *æ‰§è¡Œè¯¥æŸ¥æ‰¾å¹¶ä¾èµ–ç»“æœè€Œä¸è®¿é—®å¤–éƒ¨ä»·æ ¼*ã€‚

å‡è®¾ï¼Œä¸€ä»½æ™ºèƒ½åˆçº¦å¤©çœŸåœ°å¸Œæœ›å‘ DAI/WETH å¯¹å‘é€ 10 ä¸ª DAIï¼Œå¹¶åœ¨ç»™å®šå½“å‰å‡†å¤‡é‡‘ç‡çš„æƒ…å†µä¸‹æ¥æ”¶å°½å¯èƒ½å¤šçš„ WETHã€‚å¦‚æœåœ¨è°ƒç”¨æ—¶ï¼Œç®€å•çš„æ™ºèƒ½åˆçº¦åªæ˜¯æŸ¥çœ‹å½“å‰ä»·æ ¼å¹¶æ‰§è¡Œäº¤æ˜“ï¼Œé‚£ä¹ˆå®ƒå¾ˆå®¹æ˜“å—åˆ°æŠ¢å…ˆäº¤æ˜“çš„å½±å“ï¼Œå¹¶å¯èƒ½é­å—ç»æµæŸå¤±ã€‚è¦äº†è§£ä¸ºä»€ä¹ˆè¦è€ƒè™‘ä¸€ä¸ªåœ¨äº¤æ˜“è¢«ç¡®è®¤ä¹‹å‰å°±çœ‹åˆ°äº¤æ˜“çš„æ¶æ„è¡Œä¸ºè€…ã€‚ä»–ä»¬å¯ä»¥åœ¨ç®€å•äº’æ¢è¿›è¡Œä¹‹å‰ç«‹å³æ‰§è¡Œå¤§å¹…æ”¹å˜ DAI/WETH ä»·æ ¼çš„äº’æ¢ï¼Œç­‰å¾…ç®€å•äº’æ¢ä»¥ç³Ÿç³•çš„ä»·æ ¼æ‰§è¡Œï¼Œç„¶åäº’æ¢ä»¥å°†ä»·æ ¼æ”¹å˜å›ç®€å•äº’æ¢ä¹‹å‰çš„ä»·æ ¼ã€‚è¿™ç§æ”»å‡»ç›¸å½“ä¾¿å®œä¸”é£é™©ä½ï¼Œé€šå¸¸å¯ä»¥è·åˆ©ã€‚

ä¸ºäº†é˜²æ­¢è¿™ç§ç±»å‹çš„æ”»å‡»ï¼Œæäº¤**äº’æ¢** *æ˜¯è‡³å…³é‡è¦çš„ï¼Œå®ƒä»¬æœ‰æƒäº†è§£å…¶äº’æ¢åº”åœ¨*æ‰§è¡Œçš„â€œ ***å…¬å¹³*** *â€ä»·æ ¼ã€‚æ¢å¥è¯è¯´ï¼Œæ‰æœŸäº¤æ˜“éœ€è¦è®¿é—®ä¸€ä¸ª ***oracle*** ï¼Œä»¥ç¡®ä¿ä»–ä»¬å¯ä»¥ä» Uniswap è·å¾—çš„æœ€ä½³æ‰§è¡Œè¶³å¤Ÿæ¥è¿‘ oracle è®¤ä¸ºçš„â€œçœŸå®ä»·æ ¼ã€‚è™½ç„¶è¿™å¬èµ·æ¥å¯èƒ½å¾ˆå¤æ‚ï¼Œä½†æ˜¯**é¢„è¨€**å¯ä»¥ç®€å•åˆ°*å¯¹ä¸€åŒ*é‹å½“å‰å¸‚åœºä»·æ ¼çš„ç¦»çº¿è§‚å¯Ÿã€‚ç”±äºå¥—åˆ©ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œä¸€å¯¹è´§å¸çš„å†…éƒ¨å‚¨å¤‡æ¯”ç‡æ¥è¿‘â€œçœŸå®â€å¸‚åœºä»·æ ¼ã€‚å› æ­¤ï¼Œå¦‚æœç”¨æˆ·åœ¨æäº¤äº¤æ˜“æ—¶è€ƒè™‘åˆ°è¿™ä¸€ç‚¹ï¼Œä»–ä»¬å¯ä»¥ç¡®ä¿ç”±äºæŠ¢å…ˆäº¤æ˜“é€ æˆçš„æŸå¤±è¢«ä¸¥æ ¼æ§åˆ¶ã€‚ä¾‹å¦‚ï¼ŒUniswap å‰ç«¯å°±æ˜¯è¿™æ ·ç¡®ä¿äº¤æ˜“å®‰å…¨çš„ã€‚å®ƒè®¡ç®—ç»™å®šè§‚å¯Ÿåˆ°çš„å—å†…ä»·æ ¼çš„æœ€ä½³è¾“å…¥/è¾“å‡ºé‡ï¼Œå¹¶ä½¿ç”¨è·¯ç”±å™¨æ‰§è¡Œäº¤æ¢ï¼Œè¿™ä¿è¯äº¤æ¢å°†ä»¥æ¯”è§‚å¯Ÿåˆ°çš„å—å†…é€Ÿç‡å·®ä¸å°äº`x` %çš„é€Ÿç‡æ‰§è¡Œï¼Œå…¶ä¸­`x`æ˜¯ç”¨æˆ·æŒ‡å®šçš„æ»‘åŠ¨å®¹å·®(é»˜è®¤ä¸º 0.5%)ã€‚*

# å‡†ç¡®è¾“å…¥[å’Œ](https://docs.uniswap.org/protocol/V2/concepts/advanced-topics/pricing#exact-input)

å¦‚æœæ‚¨æƒ³è¦å‘é€ç²¾ç¡®æ•°é‡çš„è¾“å…¥ä»¤ç‰Œï¼Œä»¥æ¢å–å°½å¯èƒ½å¤šçš„è¾“å‡ºä»¤ç‰Œï¼Œæ‚¨å°†éœ€è¦ä½¿ç”¨ [getAmountsOut](https://docs.uniswap.org/protocol/V2/reference/smart-contracts/router-02#getamountout) ã€‚ç­‰æ•ˆçš„ SDK å‡½æ•°æ˜¯ç”¨äºæ»‘ç§»è®¡ç®—çš„ [getOutputAmount](https://docs.uniswap.org/sdk/2.0.0/reference/pair#getoutputamount) æˆ– [minimumAmountOut](https://docs.uniswap.org/sdk/2.0.0/reference/trade#minimumamountout-since-204) ã€‚

# ç²¾ç¡®è¾“å‡º[](https://docs.uniswap.org/protocol/V2/concepts/advanced-topics/pricing#exact-output)

å¦‚æœæ‚¨æƒ³ç”¨å°½å¯èƒ½å°‘çš„è¾“å…¥ä»¤ç‰Œæ¥æ”¶ç²¾ç¡®æ•°é‡çš„è¾“å‡ºä»¤ç‰Œï¼Œæ‚¨å°†éœ€è¦ä½¿ç”¨ [getAmountsIn](https://docs.uniswap.org/protocol/V2/reference/smart-contracts/router-02#getamountsin) ã€‚ç­‰æ•ˆçš„ SDK å‡½æ•°æ˜¯ç”¨äºæ»‘ç§»è®¡ç®—çš„ [getInputAmount](https://docs.uniswap.org/sdk/2.0.0/reference/pair#getinputamount) ï¼Œæˆ–[maximum amount](https://docs.uniswap.org/sdk/2.0.0/reference/trade#maximumamountin-since-204)ã€‚

# ä»·æ ¼å…ˆçŸ¥

**Uniswap V2** å®æ–½äº†æ–°åŠŸèƒ½ï¼Œå®ç°äº†é«˜åº¦åˆ†æ•£å’ŒæŠ—æ“çºµçš„**é“¾ä¸Šä»·æ ¼åé¦ˆ**ã€‚è¿™æ˜¯é€šè¿‡åœ¨æ“çºµä»·æ ¼æ˜‚è´µæ—¶è¡¡é‡ä»·æ ¼ï¼Œå¹¶å·§å¦™åœ°ç§¯ç´¯å†å²æ•°æ®æ¥å®ç°çš„ã€‚è¿™ä½¿å¾—å¤–éƒ¨æ™ºèƒ½åˆçº¦å¯ä»¥åœ¨ä»»ä½•æ—¶é—´é—´éš”å†…åˆ›å»ºèŠ‚èƒ½çš„æ—¶é—´åŠ æƒå¹³å‡ Uniswap ä»·æ ¼ã€‚

**é“¾ä¸Šä»·æ ¼åé¦ˆ**æ˜¯è®¸å¤šåˆ†æ•£å¼é‡‘èåº”ç”¨çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼ŒåŒ…æ‹¬ç±»ä¼¼äºè¡ç”Ÿå“ã€è´·æ¬¾ã€ä¿è¯é‡‘äº¤æ˜“ã€é¢„æµ‹å¸‚åœºç­‰ã€‚å°½ç®¡å¤§å¤šæ•°æ—¶é—´å¯†åˆ‡è·Ÿè¸ªçœŸå®ä¸–ç•Œçš„ä»·æ ¼ï¼Œä½† Uniswap V1 ä¸èƒ½å®‰å…¨åœ°ç”¨ä½œä»·æ ¼é¢„æµ‹å·¥å…·ï¼Œå› ä¸ºä»·æ ¼å¯èƒ½åœ¨çŸ­æ—¶é—´å†…å¤§å¹…æ³¢åŠ¨ã€‚

Uniswap V2 å¯¹æ„å»ºäºå…¶ä¸Šçš„ price feed è¿›è¡Œäº†å¤§é‡æ”¹è¿›ã€‚é¦–å…ˆï¼Œåœ¨ä»»ä½•äº¤æ˜“å‘ç”Ÿä¹‹å‰ï¼Œæ¯ä¸€å¯¹éƒ½æµ‹é‡(ä½†ä¸å­˜å‚¨)æ¯ä¸€ä¸ªå—å¼€å§‹æ—¶çš„å¸‚åœºä»·æ ¼ã€‚æ“çºµè¿™ä¸ªä»·æ ¼çš„æˆæœ¬å¾ˆé«˜ï¼Œå› ä¸ºå®ƒæ˜¯ç”±å‰ä¸€ä¸ªåŒºå—ä¸­çš„æœ€åä¸€ç¬”äº¤æ˜“è®¾å®šçš„ã€‚

ä¸ºäº†å°†æµ‹é‡çš„ä»·æ ¼è®¾ç½®ä¸ºä¸å…¨çƒå¸‚åœºä»·æ ¼ä¸åŒæ­¥çš„ä»·æ ¼ï¼Œæ”»å‡»è€…å¿…é¡»åœ¨å‰ä¸€ä¸ªäº¤æ˜“å—ç»“æŸæ—¶è¿›è¡Œä¸€æ¬¡ç³Ÿç³•çš„äº¤æ˜“ï¼Œé€šå¸¸æ— æ³•ä¿è¯ä»–ä»¬èƒ½å¤Ÿåœ¨ä¸‹ä¸€ä¸ªäº¤æ˜“å—å¥—åˆ©å›æ¥ã€‚æ”»å‡»è€…ä¼šæŠŠé’±è¾“ç»™å¥—åˆ©è€…ï¼Œé™¤éä»–ä»¬èƒ½â€œè‡ªç§åœ°â€è¿ç»­å¼€é‡‡ä¸¤ä¸ªåŒºå—ã€‚è¿™ç§ç±»å‹çš„æ”»å‡»æå‡ºäº†è®¸å¤šæŒ‘æˆ˜ï¼Œè¿„ä»Šä¸ºæ­¢è¿˜æ²¡æœ‰è§‚å¯Ÿåˆ°ã€‚

ä»…æ­¤è¿˜ä¸å¤Ÿã€‚å¦‚æœåŸºäºè¯¥æœºåˆ¶äº§ç”Ÿçš„ä»·æ ¼ç»“ç®—äº†å¤§é‡ä»·å€¼ï¼Œé‚£ä¹ˆæ”»å‡»çš„åˆ©æ¶¦å¯èƒ½ä¼šè¶…è¿‡æŸå¤±ã€‚

å–è€Œä»£ä¹‹çš„æ˜¯ï¼ŒUniswap V2 å…¬å¸å°†è¿™ä¸€äº¤æ˜“ç»“æŸä»·æ ¼åŠ å…¥åˆ°æ ¸å¿ƒåˆçº¦ä¸­çš„ä¸€ä¸ªå•ä¸€çš„**ç´¯è®¡ä»·æ ¼å˜é‡**ä¸­ï¼Œè¯¥å˜é‡æ ¹æ®è¯¥ä»·æ ¼å­˜åœ¨çš„æ—¶é—´è¿›è¡ŒåŠ æƒã€‚æ­¤å˜é‡è¡¨ç¤ºæ•´ä¸ªåˆåŒå†å²ä¸­æ¯ä¸€ç§’çš„ Uniswap ä»·æ ¼æ€»å’Œã€‚

![](img/69ba28a2ca4a94a041cce9de1d833c62.png)

Uniswap v2 Onchain Price Feeds

å¤–éƒ¨åˆåŒå¯ä»¥ä½¿ç”¨è¯¥å˜é‡æ¥è·Ÿè¸ªä»»ä½•æ—¶é—´é—´éš”å†…çš„å‡†ç¡®æ—¶é—´åŠ æƒå¹³å‡ä»·æ ¼(TWAPs)ã€‚

è¿™æ˜¯é€šè¿‡åœ¨é—´éš”å¼€å§‹å’Œç»“æŸæ—¶ä» ERC20 ä»¤ç‰Œå¯¹ä¸­è¯»å–ç´¯ç§¯ä»·æ ¼æ¥å®ç°çš„ã€‚è¿™ä¸ªç´¯è®¡ä»·æ ¼çš„å·®é¢å¯ä»¥é™¤ä»¥æ—¶é—´é—´éš”çš„é•¿åº¦ï¼Œå°±å¯ä»¥å¾—åˆ°è¿™ä¸ªæ—¶é—´æ®µçš„ TWAPã€‚

![](img/0444f9ed3dc001dff0d7eae2f24de34c.png)

TWAPs using Uniswap V2

**TWAPs** å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥æ ¹æ®éœ€è¦ä½œä¸ºç§»åŠ¨å¹³å‡çº¿(EMAs å’Œ SMAs)çš„åŸºç¡€ã€‚

ä¸€äº›æ³¨æ„äº‹é¡¹:

*   å¯¹äº 10 åˆ†é’Ÿ TWAPï¼Œæ¯ 10 åˆ†é’Ÿå–æ ·ä¸€æ¬¡ã€‚å¯¹äºä¸ºæœŸä¸€å‘¨çš„ TWAPï¼Œæ¯å‘¨å–æ ·ä¸€æ¬¡ã€‚
*   å¯¹äºç®€å•çš„ TWAPï¼Œæ“ä½œæˆæœ¬å¢åŠ (å¤§çº¦ã€‚çº¿æ€§)ä¸ Uniswap ä¸Šçš„æµåŠ¨æ€§ï¼Œä»¥åŠ(å¤§çº¦ã€‚çº¿æ€§)ä¸ä½ å¹³å‡çš„æ—¶é—´é•¿åº¦ã€‚
*   ä¼°è®¡ä¸€æ¬¡æ”»å‡»çš„æˆæœ¬ç›¸å¯¹ç®€å•ã€‚åœ¨ 1 å°æ—¶çš„ TWAP ä¸Šç§»åŠ¨ä»·æ ¼ 5%å¤§çº¦ç­‰äºå¥—åˆ©æŸå¤±çš„é‡‘é¢å’Œ 1 å°æ—¶å†…ç§»åŠ¨ä»·æ ¼ 5%çš„è´¹ç”¨ã€‚

å½“ä½¿ç”¨ Uniswap V2 ä½œä¸º oracle æ—¶ï¼Œæœ‰ä¸€äº›ç»†å¾®å·®åˆ«éœ€è¦æ³¨æ„ï¼Œç‰¹åˆ«æ˜¯åœ¨æ¶‰åŠåˆ°æ“ä½œé˜»åŠ›æ—¶ã€‚

# Uniswap V2 å®šä»·

æˆ‘ä»¬æ¥è°ˆè°ˆå®šä»·ã€‚æœ¬æŒ‡å—å°†å…³æ³¨ä¸¤ä¸ªæœ€é‡è¦çš„ Uniswap ä»·æ ¼:ä¸­é—´ä»·å’Œæ‰§è¡Œä»·ã€‚

# ä¸­ç­‰ä»·æ ¼

åœ¨ Uniswap çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œä¸­é—´ä»·æ ¼æ˜¯åæ˜ ä¸€ä¸ªæˆ–å¤šä¸ªå¯¹ ä¸­çš„ ***å‚¨å¤‡æ¯”ç‡çš„ä»·æ ¼ã€‚æˆ‘ä»¬æœ‰ä¸‰ç§æ–¹å¼æ¥è€ƒè™‘è¿™ä¸ªä»·æ ¼ã€‚***

*   å®ƒå®šä¹‰äº†ä¸€ä¸ªä»¤ç‰Œç›¸å¯¹äºå¦ä¸€ä¸ªä»¤ç‰Œçš„ç›¸å¯¹å€¼ã€‚
*   å®ƒä»£è¡¨äº†ç†è®ºä¸Šä½ å¯ä»¥ç”¨ä¸€ç§æå°‘é‡çš„ä»£å¸æ¢å¦ä¸€ç§ä»£å¸çš„ä»·æ ¼ã€‚
*   å®ƒå¯ä»¥è§£é‡Šä¸ºèµ„äº§çš„å½“å‰*å¸‚åœºå‡ºæ¸…ä»·æ ¼æˆ–å…¬å…ä»·å€¼ä»·æ ¼*ã€‚

è®©æˆ‘ä»¬è€ƒè™‘ DAI-WETH çš„ä¸­é—´ä»·æ ¼(å³æ¯ 1 WETH çš„ DAI æ•°é‡)ã€‚

## ç›´æ¥[](https://docs.uniswap.org/sdk/2.0.0/guides/pricing#direct)

**è·å¾—æˆ´éŸ¦ä¸­é—´ä»·çš„æœ€ç®€å•æ–¹æ³•**æ˜¯ç›´æ¥è§‚å¯Ÿè¿™å¯¹**:**

```
*import* { ChainId, Token, WETH, Fetcher, Route } *from* '@uniswap/sdk'*const* DAI = *new* Token(ChainId.MAINNET, '0x6B175474E89094C44Da98b954EedeAC495271d0F', 18)*// note that you may want/need to handle this async code differently,*
*// for example if top-level await is not an option*
*const* pair = *await* Fetcher.fetchPairData(DAI, WETH[DAI.chainId])*const* route = *new* Route([pair], WETH[DAI.chainId])console.log(route.midPrice.toSignificant(6)) *// 201.306*
console.log(route.midPrice.invert().toSignificant(6)) *// 0.00496756*
```

**æ‚¨å¯èƒ½æƒ³çŸ¥é“ä¸ºä»€ä¹ˆæˆ‘ä»¬å¿…é¡»æ„å»ºä¸€ä¸ª*è·¯å¾„*æ¥è·å¾—ä¸­é—´ä»·æ ¼ï¼Œè€Œä¸æ˜¯ç®€å•åœ°ä»å¯¹ä¸­è·å¾—å®ƒ(æ¯•ç«Ÿï¼Œå®ƒåŒ…æ‹¬æ‰€æœ‰å¿…è¦çš„æ•°æ®)ã€‚åŸå› å¾ˆç®€å•:ä¸€æ¡è·¯çº¿è¿«ä½¿æˆ‘ä»¬åšæŒäº¤æ˜“çš„æ–¹å‘ã€‚è·¯çº¿ç”±ä¸€å¯¹æˆ–å¤šå¯¹ä»¥åŠä¸€ä¸ªè¾“å…¥ä»¤ç‰Œ(å®ƒå®Œå…¨å®šä¹‰äº†ä¸€æ¡äº¤æ˜“è·¯å¾„)ç»„æˆã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬ä¼ é€’ WETH ä½œä¸ºè¾“å…¥ä»¤ç‰Œï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¯¹ WETH - > DAI äº¤æ˜“æ„Ÿå…´è¶£ã€‚**

**ç°åœ¨æˆ‘ä»¬æ˜ç™½äº†ï¼Œä¸­é—´ä»·å°†æ ¹æ® DAI/WETH æ¥å®šä¹‰ã€‚ä¸è¿‡ä¸è¦æ‹…å¿ƒï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦ WETH/DAI ä»·æ ¼ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“åœ°å°†å…¶åè½¬ã€‚**

**æœ€åï¼Œæ‚¨å¯èƒ½å·²ç»æ³¨æ„åˆ°ï¼Œæˆ‘ä»¬å°†ä»·æ ¼æ ¼å¼åŒ–ä¸º 6 ä½æœ‰æ•ˆæ•°å­—ã€‚è¿™æ˜¯å› ä¸ºåœ¨å†…éƒ¨ï¼Œä»·æ ¼å­˜å‚¨ä¸ºç²¾ç¡®çš„åˆ†æ•°ï¼Œå¯ä»¥æ ¹æ®éœ€è¦è½¬æ¢ä¸ºå…¶ä»–è¡¨ç¤ºå½¢å¼ã€‚**

## **é—´æ¥[](https://docs.uniswap.org/sdk/2.0.0/guides/pricing#indirect)**

**ä¸ºäº†ä¸¾ä¾‹ï¼Œè®©æˆ‘ä»¬è®¾æƒ³åœ¨æˆ´å’Œ WETH *ä¹‹é—´ä¸å­˜åœ¨ç›´æ¥é…å¯¹*ã€‚ä¸ºäº†å¾—åˆ°é˜¿å‘†-éŸ¦ç‘Ÿçš„ä¸­ç­‰ä»·æ ¼ï¼Œæˆ‘ä»¬éœ€è¦é€‰æ‹©ä¸€ä¸ªæœ‰æ•ˆçš„è·¯çº¿ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œæˆ´å’Œæˆ‘ä»¬éƒ½ä¸ç¬¬ä¸‰ä¸ªä»¤ç‰Œé…å¯¹ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ USDC å¯¹è®¡ç®—é—´æ¥ä¸­é—´ä»·:**

```
*import* { ChainId, Token, WETH, Fetcher, Route } *from* '@uniswap/sdk'*const* USDC = *new* Token(ChainId.MAINNET, '0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48', 6)
*const* DAI = *new* Token(ChainId.MAINNET, '0x6B175474E89094C44Da98b954EedeAC495271d0F', 18)*// note that you may want/need to handle this async code differently,*
*// for example if top-level await is not an option*
*const* USDCWETHPair = *await* Fetcher.fetchPairData(USDC, WETH[ChainId.MAINNET])
*const* DAIUSDCPair = *await* Fetcher.fetchPairData(DAI, USDC)*const* route = *new* Route([USDCWETHPair, DAIUSDCPair], WETH[ChainId.MAINNET])console.log(route.midPrice.toSignificant(6)) *// 202.081*
console.log(route.midPrice.invert().toSignificant(6)) *// 0.00494851*
```

# **æ‰§è¡Œä»·æ ¼**

**ä¸­é—´ä»·æ˜¯ä¸€æ¡è·¯çº¿çš„ ***å½“å‰çŠ¶æ€*çŠ¶æ€**çš„ç»ä½³ä»£è¡¨ï¼Œä½†æ˜¯äº¤æ˜“å‘¢ï¼Ÿäº‹å®è¯æ˜ï¼Œå®šä¹‰å¦ä¸€ä¸ªä»·æ ¼ï¼Œå³äº¤æ˜“çš„ ***æ‰§è¡Œ*** ä»·æ ¼ï¼Œä½œä¸ºå‘é€/æ¥æ”¶èµ„äº§çš„**æ¯”ç‡æ˜¯æœ‰æ„ä¹‰çš„ã€‚****

**å‡è®¾ï¼Œæˆ‘ä»¬æƒ³ç”¨ 1 WETH æ¢æˆ´:**

```
*import* { ChainId, Token, WETH, Fetcher, Trade, Route, TokenAmount, TradeType } *from* '@uniswap/sdk'*const* DAI = *new* Token(ChainId.MAINNET, '0x6B175474E89094C44Da98b954EedeAC495271d0F', 18)*// note that you may want/need to handle this async code differently,*
*// for example if top-level await is not an option*
*const* pair = *await* Fetcher.fetchPairData(DAI, WETH[DAI.chainId])*const* route = *new* Route([pair], WETH[DAI.chainId])*const* trade = *new* Trade(route, *new* TokenAmount(WETH[DAI.chainId], '1000000000000000000'), TradeType.EXACT_INPUT)console.log(trade.executionPrice.toSignificant(6))
console.log(trade.nextMidPrice.toSignificant(6))
```

**è¯·æ³¨æ„ï¼Œæˆ‘ä»¬æ­£åœ¨ä¸ºå°½å¯èƒ½å¤šçš„ DAI æ„å»ºä¸€ä¸ª 1 WETH çš„äº¤æ˜“ï¼Œ*ç»™å®šç›´æ¥é…å¯¹çš„å½“å‰å‚¨å¤‡*ã€‚æ‰§è¡Œä»·æ ¼ä»£è¡¨è¯¥äº¤æ˜“çš„å¹³å‡ DAI/WETH ä»·æ ¼ã€‚å½“ç„¶ï¼Œä»»ä½•ä¸€å¯¹çš„å‚¨å¤‡å¯ä»¥æ”¹å˜æ¯ä¸ªåŒºå—ï¼Œè¿™å°†å½±å“æ‰§è¡Œä»·æ ¼ã€‚**

**è¿˜è¦æ³¨æ„ï¼Œå¦‚æœäº¤æ˜“åœ¨å‚¨å¤‡æ”¹å˜ä¹‹å‰æˆåŠŸå®Œæˆï¼Œæˆ‘ä»¬å¯ä»¥è®¿é—®ä¸‹ä¸€ä¸ª*ä¸­é—´ä»·ã€‚***

# **åŒ…è£¹**

**æœ¬æ–‡é˜è¿°äº†å¯¹ **Uniswap v2 ä»·æ ¼æº**çš„æ·±åˆ»ç†è§£ã€‚å¦å¤–ï¼Œè¯·é˜…è¯»æˆ‘ä¹‹å‰å…³äº Uniswap v3 æ¦‚è¿°çš„æ–‡ç« ğŸ”½**

**[](/coinmonks/uniswap-v3-explained-57e0cdf86719) [## Uniswap V3 è§£é‡Š

### å…³äº Uniswap V3ï¼Œæ‚¨éœ€è¦äº†è§£çš„æ‰€æœ‰ä¿¡æ¯

medium.com](/coinmonks/uniswap-v3-explained-57e0cdf86719)** 

# **ä¸æˆ‘ä¿æŒè”ç³»ï¼ğŸ‘‹**

**é»˜ç½•é»˜å¾·Â·æ²™èµ«æ‰å¾·
â€”â€”*[*ç‘æ€ç§‘æŠ€*](https://medium.com/u/8721a6090e85?source=post_page-----dc0dc133347a--------------------------------) çš„æŠ€æœ¯å‰¯æ€»è£***

*****é¢†è‹±**https://www.linkedin.com/in/ishanshahzad/[â–¶ï¸](https://www.linkedin.com/in/ishanshahzad/)***

> ***äº¤æ˜“æ–°æ‰‹ï¼Ÿå°è¯•[åŠ å¯†äº¤æ˜“æœºå™¨äºº](/coinmonks/crypto-trading-bot-c2ffce8acb2a)æˆ–[å¤åˆ¶äº¤æ˜“](/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c)***