<html>
<head>
<title>The cooking behind Hashes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">哈希背后的烹饪</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/the-cooking-behind-hashes-431f430fc7d9?source=collection_archive---------49-----------------------#2022-07-04">https://medium.com/coinmonks/the-cooking-behind-hashes-431f430fc7d9?source=collection_archive---------49-----------------------#2022-07-04</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="eab3" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在上周解释了ECDSA和SHA256在区块链<a class="ae jo" rel="noopener" href="/block-magnates/understanding-wallet-addresses-and-keys-6331bf40c6a8">中的用途之后——分别创建密钥对和创建数字指纹，让我们来谈谈如何实现。</a></p><p id="f713" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我们将专注于散列的创建，关于椭圆曲线的更多细节，你最好看看<a class="ae jo" href="https://www.youtube.com/watch?v=NF1pwjL9-DE" rel="noopener ugc nofollow" target="_blank">这个视频</a>或<a class="ae jo" href="https://www.youtube.com/watch?v=gAtBM06xwaw" rel="noopener ugc nofollow" target="_blank">这个给数学爱好者的视频</a>。</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff jp"><img src="../Images/266d8fde6101484d8e5205afe55ce3b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZQxwzHdCWEkgSUFYvTjmjA.jpeg"/></div></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">Alexandre Debiève — <a class="ae jo" href="https://unsplash.com/@alexkixa" rel="noopener ugc nofollow" target="_blank">https://unsplash.com/@alexkixa</a></figcaption></figure><p id="713f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在区块链技术中，哈希用于3个主要操作:</p><ul class=""><li id="7f55" class="kf kg ht is b it iu ix iy jb kh jf ki jj kj jn kk kl km kn dt translated">总结并展示您的公钥</li><li id="b439" class="kf kg ht is b it ko ix kp jb kq jf kr jj ks jn kk kl km kn dt translated">总结并代表前一个模块</li><li id="324b" class="kf kg ht is b it ko ix kp jb kq jf kr jj ks jn kk kl km kn dt translated">通过找到满足某些条件的散列来挖掘块</li></ul><p id="fa25" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">可以使用不同的哈希算法，我们将重点关注比特币和其他加密货币中使用的算法:SHA256。为了理解它是如何工作的，让我们先回顾一下二进制代码。</p><blockquote class="kt ku kv"><p id="ef71" class="iq ir kw is b it iu iv iw ix iy iz ja kx jc jd je ky jg jh ji kz jk jl jm jn hm dt translated">交易新手？尝试<a class="ae jo" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">加密交易机器人</a>或<a class="ae jo" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">复制交易</a></p></blockquote><h2 id="e363" class="la lb ht bd lc ld le lf lg lh li lj lk jb ll lm ln jf lo lp lq jj lr ls lt lu dt translated"><strong class="ak">位</strong></h2><p id="2827" class="pw-post-body-paragraph iq ir ht is b it lv iv iw ix lw iz ja jb lx jd je jf ly jh ji jj lz jl jm jn hm dt translated">Bits代表“二进制数字”，0或1。</p><p id="7d93" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这个想法是用电信号的形式来表示值，简单的是或不是。</p><p id="1014" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">计算机与所谓的“逻辑门”一起工作，它们就像电灯开关:要么开，要么关。</p><p id="b963" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">如果该位为0 →不击穿，则为1，小电阻会击穿。如果你把它们放在一起，你可以创造更复杂的信号。有点像莫尔斯电码，但只有点，什么也没有。</p><p id="0b5a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">让我们从简单的4位语言开始:_ _ _ _ _</p><p id="7aca" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">4比特意味着我们有4个时隙，其中我们可以有1或0。</p><p id="0aba" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">提醒你一下早期的数学课，用4个槽和2个变量来计算你能做出的组合数:它是2^4 = 16。</p><p id="bda2" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt">0000|0001|0010|0100|1000|0011|0101|1001|0110|0111|.…|1111</p><p id="2078" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我们只需要9个这样的组合来代表宇宙中的任何数字，对吗？0的十分之一。</p><p id="3b2a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">所以我们还有6个空位，有些人决定用字母表的6个第一个字母来代表:a | b | c | d | e | f |(以防你有疑问)。</p><p id="3345" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这个我的朋友是十六进制代码，你可以用4位来表示；a到f的数字和字母。</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff ma"><img src="../Images/5da3ea3381669776dc136d1d0bc9db7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FsHfsQAHTedmPqDmTxYgSg.png"/></div></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek"><a class="ae jo" href="https://suchprogramming.com/beginning-logic-design-part-2/" rel="noopener ugc nofollow" target="_blank">https://suchprogramming.com/beginning-logic-design-part-2/</a></figcaption></figure></div><div class="ab cl mb mc hb md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="hm hn ho hp hq"><h2 id="2b8e" class="la lb ht bd lc ld le lf lg lh li lj lk jb ll lm ln jf lo lp lq jj lr ls lt lu dt translated">指数生长</h2><p id="a425" class="pw-post-body-paragraph iq ir ht is b it lv iv iw ix lw iz ja jb lx jd je jf ly jh ji jj lz jl jm jn hm dt translated">如你所知，在电脑中代表16个值很酷，但我们需要更多，否则你如何编码那个神秘的表情符号来丰富你的文本？</p><p id="bac0" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">还记得我们的那个小"？"而不是表情符号或字符？这是因为您的计算机没有足够的空间来存储16位或32位处理器上的其他值。</p><p id="c8fb" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">因此，我们可以尝试用4位代替:</p><ul class=""><li id="8df8" class="kf kg ht is b it iu ix iy jb kh jf ki jj kj jn kk kl km kn dt translated">8位→ 2^8 = 256种组合或非常复古的游戏</li><li id="39c9" class="kf kg ht is b it ko ix kp jb kq jf kr jj ks jn kk kl km kn dt translated">16位→2^16 = 65535种组合</li><li id="e989" class="kf kg ht is b it ko ix kp jb kq jf kr jj ks jn kk kl km kn dt translated">32位→ 2^32 = 4 294 967 295种组合</li><li id="960f" class="kf kg ht is b it ko ix kp jb kq jf kr jj ks jn kk kl km kn dt translated">256位→2^256 = 115 ' 792 ' 089 ' 237 ' 316 ' 195 ' 423 ' 570 ' 985 ' 008 ' 687 ' 907 ' 853 ' 269 ' 984 ' 665 ' 640 ' 564 ' 039 ' 457 ' 584 ' 007 ' 913 ' 129 ' 639 ' 936组合</li></ul><p id="f418" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">你会明白，当我们开始计算用256个0和1表示的数字时，我们会得到惊人的大量0和1的字符串。</p><h2 id="540f" class="la lb ht bd lc ld le lf lg lh li lj lk jb ll lm ln jf lo lp lq jj lr ls lt lu dt translated">解构</h2><p id="a2b1" class="pw-post-body-paragraph iq ir ht is b it lv iv iw ix lw iz ja jb lx jd je jf ly jh ji jj lz jl jm jn hm dt translated">所以每个数字或文本都可以分解成二进制形式。</p><p id="c8c0" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">SHA256是这样工作的:一旦它将数据分解成二进制形式，它就对其应用简单的数学运算，它应用不同的函数:一些函数向左或向右移动位，另一些函数比较位以输出另一位，另一个函数将位行相加，还有一些函数是所有这些函数的组合。</p><p id="51a9" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">将</strong>值向右移动，例如0011变成0001 (a 1得到批次):</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff mi"><img src="../Images/4ac052ea88c727ed43c93970831035cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Iktt6slkohcQwmO38eKLbA.png"/></div></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">Here we see a shift of 32 on a 32 bits word, so all numbers are replaced by a 0</figcaption></figure><p id="1f7c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">向右旋转</strong>值:0011变成1001(1从左边回来)；</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff mj"><img src="../Images/5b0e4ca09ea12a3b09a1d5f469715f60.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OcfjCS5ktclVypBL8kG_ag.png"/></div></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">Here we see a rotation of 32 on a 32 bits word, so all numbers come back to their initial position</figcaption></figure><p id="a297" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu"> XOR </strong>函数，是2行位之间的比较:如果比较的两个位中只有1个是1，该函数的结果是1，否则两个0或两个1输出0:</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff mk"><img src="../Images/e097a3b26e32935478ed0b4b2eb3e88e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uCmyh1NleDzoYE95JIZ62w.png"/></div></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">Here we see a double XOR, the result between the first two rows is implicitly compared to the third one to get the end result</figcaption></figure><p id="2b86" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">在它们之间添加</strong>行。二进制加法规则很简单:</p><ul class=""><li id="284f" class="kf kg ht is b it iu ix iy jb kh jf ki jj kj jn kk kl km kn dt">0 + 0 = 0</li><li id="4d86" class="kf kg ht is b it ko ix kp jb kq jf kr jj ks jn kk kl km kn dt">0 + 1 = 1</li><li id="09c3" class="kf kg ht is b it ko ix kp jb kq jf kr jj ks jn kk kl km kn dt translated">1 + 1 = 10 |左栏取1相加</li></ul><p id="d949" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">组合的移动可以看起来像下面的函数<strong class="is hu">∑(x)</strong>:从输入x，我们应用右旋转7，加上另一个18，右移位3，以及最后两行上的两个XOR函数，以在底部获得最终结果。</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div class="fe ff ml"><img src="../Images/fb36934cfa505d2075f3dae972433f34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jbsskHBegkgYfw8j8k7gvQ.png"/></div></figure><p id="e857" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">另外两个条件函数是:</p><ul class=""><li id="6e7d" class="kf kg ht is b it iu ix iy jb kh jf ki jj kj jn kk kl km kn dt translated"><strong class="is hu">选择</strong> —比较3行x，y，z时:如果x = 0，则取z中的值，如果x = 1，则取y中的值作为输出</li><li id="c131" class="kf kg ht is b it ko ix kp jb kq jf kr jj ks jn kk kl km kn dt translated"><strong class="is hu">多数</strong> —比较3行时:如果0或1占多数，则输出。</li></ul><p id="8682" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">为了增加一些随机性，创造了一系列常数:更准确地说是两组64个数字:素数的立方和平方根，从这些数字中你得到一个实数，从这个实数中你保持小数部分为整数，从这个整数中你保持它的二进制形式。</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff mm"><img src="../Images/60d8f58a73156430393b5fd6ac56b81e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nZvUKg0m6wWxfV90gzv7rA.png"/></div></div></figure><h2 id="7978" class="la lb ht bd lc ld le lf lg lh li lj lk jb ll lm ln jf lo lp lq jj lr ls lt lu dt translated">填料</h2><p id="7c99" class="pw-post-body-paragraph iq ir ht is b it lv iv iw ix lw iz ja jb lx jd je jf ly jh ji jj lz jl jm jn hm dt translated">SHA256的一个非常酷的方面是，它可以接受任何大小的输入，并总是返回一个256位的块。</p><p id="7ae5" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">它通过两种方式做到这一点:如果消息小于256位，它会添加足够的零来填充块中的空闲空间。否则，它将消息分解成多个256比特的块，然后将算法一个接一个地应用于这些块。</p><h2 id="bb49" class="la lb ht bd lc ld le lf lg lh li lj lk jb ll lm ln jf lo lp lq jj lr ls lt lu dt translated">压缩</h2><p id="b7cd" class="pw-post-body-paragraph iq ir ht is b it lv iv iw ix lw iz ja jb lx jd je jf ly jh ji jj lz jl jm jn hm dt translated">在所有这些准备步骤(解构值、创建常数等)之后。)我们到了精彩的部分:信息的压缩。</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff mn"><img src="../Images/cc51cdae1778603ecdd0348543eeaa2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T_pwTcQmvI4YqaCNCE9QmA.png"/></div></div></figure><p id="879f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">从H0到H1，或者从原始数据到散列，或者从第一个散列到第二个散列，等等。</p><p id="1a61" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">你混合已经从256位初始块创建的32位字W。其中32位常数K是从素数的根创建的。通过应用两个函数T1和T2，这两个函数是我们之前看到的置换函数和加法选择/多数的组合。</p><p id="a862" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">256位块被分成8个32位字，称为a、b、c、d、e、f、g、h，因为32 x 8 = 256。</p><p id="c3aa" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在对所有的单词应用了所有的函数之后，你得到了一个0和1的快乐的混乱，它与你最初的信息尽可能的不同。</p><p id="b05c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">但最重要的是，<strong class="is hu">这个算法是确定性的，</strong>意味着即使最终结果看起来是随机的，如果你输入相同的内容，它将总是呈现相同的输出。</p><h2 id="a73b" class="la lb ht bd lc ld le lf lg lh li lj lk jb ll lm ln jf lo lp lq jj lr ls lt lu dt translated"><strong class="ak">最后一步</strong></h2><p id="6eb9" class="pw-post-body-paragraph iq ir ht is b it lv iv iw ix lw iz ja jb lx jd je jf ly jh ji jj lz jl jm jn hm dt translated">一旦计算出最后的8个32位值，它们就被分解成8个4位字，并用十六进制代码表示——还记得前面的内容吗？</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff mo"><img src="../Images/a9195ed37889f302629bf8d6c5baaee8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hrPno2CTVrxIQ-IzvYHw3w.png"/></div></div></figure><p id="e6d1" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">然后，你只需要把它们并排放在一起。这就是你如何从一个公钥到一个钱包地址，从一个完整的区块到一个有代表性的散列，或者从一个区块+一个随机数到一个散列，赢得你挖掘一个区块的权利。</p></div><div class="ab cl mb mc hb md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="hm hn ho hp hq"><p id="2784" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">希望这能帮助你更好地理解散列的概念。</p><p id="73bc" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">感谢您的阅读，非常感谢视频<a class="ae jo" href="https://www.youtube.com/watch?v=f9EbD6iY9zI&amp;t=492s" rel="noopener ugc nofollow" target="_blank">的创作者，截图来自该视频。</a></p><p id="c2b7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">保重。</p></div></div>    
</body>
</html>