<html>
<head>
<title>Learn Ethereum programming #2. Using Alchemy to send requests.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">学习以太坊编程#2。使用炼金术发送请求。</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/learn-ethereum-programming-2-using-alchemy-to-send-requests-a1ee1b5f8296?source=collection_archive---------4-----------------------#2022-12-17">https://medium.com/coinmonks/learn-ethereum-programming-2-using-alchemy-to-send-requests-a1ee1b5f8296?source=collection_archive---------4-----------------------#2022-12-17</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><figure class="fi fk ir is it iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff iq"><img src="../Images/144f27a1071db4ba2b8f9d576ee4a4f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aWpL328b5fc3XeJ8U374Nw.jpeg"/></div></div></figure><p id="dcd2" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">目前，要成为以太坊节点，您需要运行至少两个客户端:一个执行客户端和一个共识客户端。要成为以太坊验证器，您需要运行第三个程序，该程序执行块验证和证明。在这种情况下，您需要将至少32个以太锁定到一个合约中。</p><p id="7992" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">很多时候，作为程序员，我们会向执行客户端发送请求，请求中包含了所有关于块的信息以及以太坊的全局状态。共识客户端维护关于验证器和验证的信息，这并不经常使用。无论如何，consensus客户端的引入是相对较新的，现在说它们在以太坊编程的未来中的重要性还为时过早。</p><p id="0de4" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">目前使用最多的执行客户端叫做Geth，是Go Ethereum的缩写，用Go语言编写。在以后的文章中，我们将向您展示如何安装Geth并使用它的一些特性。然而，一般来说，我们会向某个公司提供的外部节点发送请求。</p><p id="91b0" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">有几家公司提供这项服务。其中一些是炼金术，Infura和道德。我提到这些是因为它们是我已经测试过的公司，并且有免费的计划。两者都非常适合在以太坊上编程，最大的区别是它们支持的网络。当然，它们都支持以太坊主网，但很多时候我们希望与以太坊兼容的网络一起工作，如Polygon、BNB链、Avalanche或第2层，如Arbitrum和Optmism。并非所有这些公司都支持所有这些提到的链。</p><p id="394d" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">除了接受执行客户端的请求，这些公司还提供其他服务，比如他们自己的API和事件监控。我们不会使用任何其他服务，但它们肯定很有趣。</p><p id="e366" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">提到的公司目前都不接受共识客户的请求。一个有趣的事实是，以太坊的共识客户端使用Rest而不是JSON-RPC接收请求，JSON-RPC是自比特币以来的标准。</p><p id="27fd" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">我认为Alchemy的服务很好，使用起来也很简单，所以我将在这里简单地展示如何创建一个API键并生成一个端点。</p><h1 id="214f" class="jz ka ht bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw dt translated">使用炼金术</h1><p id="62f7" class="pw-post-body-paragraph jb jc ht jd b je kx jg jh ji ky jk jl jm kz jo jp jq la js jt ju lb jw jx jy hm dt translated">除了有一个接受每月大量请求的免费计划，Alchemy还有一个主动水龙头服务。例如，一个炼金术账户允许你向格利请求乙醚。这很有帮助。</p><p id="a372" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">创建了一个非常简单的Alchemy帐户后，主页面就指向了仪表板，如下图所示。Alchemy的免费计划允许您创建多达5个应用程序，每个应用程序在一个特定的网络上，并有自己的密钥。</p><figure class="ld le lf lg fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff lc"><img src="../Images/60e4fa95ab4752da70a3b67fe7d5a1b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LTNU8c27UxXe54kB_ik1bw.png"/></div></div><figcaption class="lh li fg fe ff lj lk bd b be z ek">The dashboard.</figcaption></figure><p id="2ede" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">要创建新的应用程序，请在顶部菜单中选择“应用程序”选项卡和“创建应用程序”按钮。这一点可以从下图中看出。</p><figure class="ld le lf lg fq iu fe ff paragraph-image"><div class="fe ff ll"><img src="../Images/0fae5e002f05162514b966d0cc37ffb8.png" data-original-src="https://miro.medium.com/v2/resize:fit:804/format:webp/1*q-cbGtapJuPixN7kbZO53g.png"/></div><figcaption class="lh li fg fe ff lj lk bd b be z ek">Creating a new app.</figcaption></figure><p id="f7ae" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">在下一个屏幕上，填写应用程序的基本信息。应用程序名称和描述并不重要，但您必须选择正确的网络。在连锁，让我们选择<em class="lm">以太坊</em>，在网络，<em class="lm">歌尔利</em>。我们可以在下图中看到这一点。</p><figure class="ld le lf lg fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff ln"><img src="../Images/f0ce5088212fa880c960e5a337e275e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X_omeIWN0-TO6FhNL_Pggw.png"/></div></div><figcaption class="lh li fg fe ff lj lk bd b be z ek">Filling in the information about the application.</figcaption></figure><p id="58f1" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">以太坊目前有两个测试网，Goerli和Sepolia。两者都使用利益相关者共识机制，但Goerli是分散的，而Sepolia是集中的。到目前为止，还不能在炼金术中使用赛波利亚。</p><p id="3b83" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">创建新应用程序后，它将出现在控制面板上，如下图所示。</p><figure class="ld le lf lg fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff lo"><img src="../Images/db1ca3ca90fa6857dcde418183d6444a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8IzYRV_4iWvY6jvFw8lHGA.png"/></div></div><figcaption class="lh li fg fe ff lj lk bd b be z ek">The created application appears on the dashboard.</figcaption></figure><p id="41bc" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">创建应用程序后，可以通过点击<strong class="jd hu">查看键</strong>按钮来检索端点。它位于右侧角落，在面板的项目行中。这一点可以从下图中看出。</p><figure class="ld le lf lg fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff lp"><img src="../Images/df13f42698e41bb65470f1f2e117438f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Iig3fGU5xuTcbTj21sdDlw.png"/></div></div><figcaption class="lh li fg fe ff lj lk bd b be z ek">It is possible to use HTTPS, WebSocket or Alchemy’s own SDKs.</figcaption></figure><p id="5176" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">Alchemy有自己的几个语言的SDK，但是我们不打算使用它们中的任何一个。我们需要的是HTTPS端点，它应该有以下路径:<a class="ae lq" href="https://eth-goerli.g.alchemy.com/v2/[YOUR-KEY" rel="noopener ugc nofollow" target="_blank">https://eth-goerli . g . alchemy . com/v2/[YOUR-KEY</a></p><p id="2104" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">现在可以通过Alchemy的端点用JSON-RPC向Goerli网络发送请求。为此，我们需要一些发送HTTP请求的客户机。</p><p id="331b" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">浏览器发送HTTP请求，但是使用POST方法发送请求并不简单。有一些程序做起来容易得多，比如<a class="ae lq" href="https://www.postman.com/" rel="noopener ugc nofollow" target="_blank">邮递员</a>或者<a class="ae lq" href="https://insomnia.rest/" rel="noopener ugc nofollow" target="_blank">失眠</a>。也可以使用在线应用程序发送此类请求，如<a class="ae lq" href="https://restninja.io/" rel="noopener ugc nofollow" target="_blank">https://restninja.io/</a>。</p><p id="0b00" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">在下图中，我使用restninja网站向Alchemy发送请求。注意，我使用的是上面检索到的端点，我选择了POST方法(重要的是，通常默认方法是GET ),并将请求以JSON格式写在主体中。</p><figure class="ld le lf lg fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff lr"><img src="../Images/d9b9663e582a428976ebd0af0709ddf8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sW2xwJL0XmUl_o_2DCew1w.png"/></div></div><figcaption class="lh li fg fe ff lj lk bd b be z ek">Sending a JSON-RPC request to Alchemy.</figcaption></figure><p id="8509" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">正如我们在上一篇文章中看到的，我们必须编写的JSON有4个属性:<em class="lm"> jsonrpc </em>，<em class="lm"> id </em>，<em class="lm">方法</em>和<em class="lm"> params </em>。以太坊有几个我们可以执行的方法，有些方法有强制和可选参数。</p><h1 id="bce1" class="jz ka ht bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw dt translated">JSON-RPC请求技巧</h1><p id="5c65" class="pw-post-body-paragraph jb jc ht jd b je kx jg jh ji ky jk jl jm kz jo jp jq la js jt ju lb jw jx jy hm dt translated">在上面的例子中，我们发送了一个执行<em class="lm"> eth_blockNumber </em>方法的请求。以太坊方法以<em class="lm"> eth_ </em>开始，并以camel case格式继续。在处理数字时，数字必须被发送，并且将以十六进制返回。</p><p id="8beb" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">下图显示了方法<em class="lm"> eth_blockNumber </em>的返回。该方法要求最后一个块号。值为<em class="lm"> 0x7c52cd </em>，其中<em class="lm"> 0x </em>表示数字为十六进制。有几个网站可以把十六进制转换成十进制。上面的数字是十进制的8147661。</p><figure class="ld le lf lg fq iu fe ff paragraph-image"><div class="fe ff ls"><img src="../Images/4e6d493171449f238dacea6f6f162308.png" data-original-src="https://miro.medium.com/v2/resize:fit:986/format:webp/1*tcxO9mpUU3ySjwv8Cm7O4g.png"/></div><figcaption class="lh li fg fe ff lj lk bd b be z ek">The return of the request is in hexadecimal.</figcaption></figure><p id="6042" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">我们可以运行的另一个方法是<em class="lm"> eth_chainId </em>方法，它应该返回网络Id。每个兼容以太坊协议的网络都有一个ID，Goerli的ID是5。试试看！</p><p id="d7e9" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">并不是每个以太坊的方法都会被炼金术所接受。有些节点还充当钱包，因此有一些方法是要发送到钱包的，比如请求帐户，甚至要求节点签署交易。炼金术不是钱包，所以这样的方法不会被接受。</p><p id="93b3" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">然而，完全有可能将炼金术与钱包一起使用。因此，在将交易发送给Alchemy之前，钱包会在交易上签名。</p><p id="7e71" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated"><strong class="jd hu">感谢阅读！</strong></p><p id="3132" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">欢迎对本文提出意见和建议。</p><p id="7a2c" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">欢迎任何投稿。<a class="ae lq" href="http://www.buymeacoffee.com/jpmorais" rel="noopener ugc nofollow" target="_blank">www.buymeacoffee.com/jpmorais</a>。</p><blockquote class="lt"><p id="3ba6" class="lu lv ht bd lw lx ly lz ma mb mc jy ek translated">交易新手？尝试<a class="ae lq" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">加密交易机器人</a>或<a class="ae lq" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">复制交易</a></p><p id="2860" class="lu lv ht bd lw lx ly lz ma mb mc jy ek translated">多样化的密码持有，了解币安的选择</p><p id="b2b9" class="lu lv ht bd lw lx ly lz ma mb mc jy ek translated">加入Coinmonks <a class="ae lq" href="https://t.me/coincodecap" rel="noopener ugc nofollow" target="_blank">电报频道</a>和<a class="ae lq" href="https://www.youtube.com/c/coinmonks/videos" rel="noopener ugc nofollow" target="_blank"> Youtube频道</a>获取每日<a class="ae lq" href="http://coincodecap.com/" rel="noopener ugc nofollow" target="_blank">加密新闻</a></p></blockquote><h1 id="f66e" class="jz ka ht bd kb kc kd ke kf kg kh ki kj kk md km kn ko me kq kr ks mf ku kv kw dt translated">另外，阅读</h1><ul class=""><li id="dd1b" class="mg mh ht jd b je kx ji ky jm mi jq mj ju mk jy ml mm mn mo dt translated"><a class="ae lq" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">复制交易</a> | <a class="ae lq" rel="noopener" href="/coinmonks/crypto-tax-software-ed4b4810e338">加密税务软件</a></li><li id="f297" class="mg mh ht jd b je mp ji mq jm mr jq ms ju mt jy ml mm mn mo dt translated"><a class="ae lq" href="https://coincodecap.com/grid-trading" rel="noopener ugc nofollow" target="_blank">网格交易</a> | <a class="ae lq" rel="noopener" href="/coinmonks/the-best-cryptocurrency-hardware-wallets-of-2020-e28b1c124069">加密硬件钱包</a></li><li id="3756" class="mg mh ht jd b je mp ji mq jm mr jq ms ju mt jy ml mm mn mo dt translated"><a class="ae lq" rel="noopener" href="/coinmonks/top-3-telegram-channels-for-crypto-traders-in-2021-8385f4411ff4">密码电报信号</a> | <a class="ae lq" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">密码交易机器人</a></li><li id="87d9" class="mg mh ht jd b je mp ji mq jm mr jq ms ju mt jy ml mm mn mo dt translated"><a class="ae lq" rel="noopener" href="/coinmonks/crypto-exchange-dd2f9d6f3769">最佳加密交易所</a> | <a class="ae lq" rel="noopener" href="/coinmonks/bitcoin-exchange-in-india-7f1fe79715c9">印度最佳加密交易所</a></li><li id="600b" class="mg mh ht jd b je mp ji mq jm mr jq ms ju mt jy ml mm mn mo dt translated"><a class="ae lq" rel="noopener" href="/coinmonks/best-crypto-apis-for-developers-5efe3a597a9f">开发者最佳加密API</a></li><li id="9342" class="mg mh ht jd b je mp ji mq jm mr jq ms ju mt jy ml mm mn mo dt translated">最佳<a class="ae lq" rel="noopener" href="/coinmonks/top-5-crypto-lending-platforms-in-2020-that-you-need-to-know-a1b675cec3fa">密码借贷平台</a></li><li id="d7b9" class="mg mh ht jd b je mp ji mq jm mr jq ms ju mt jy ml mm mn mo dt translated"><a class="ae lq" rel="noopener" href="/coinmonks/free-crypto-signals-48b25e61a8da">免费加密信号</a> | <a class="ae lq" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">加密交易机器人</a></li><li id="1715" class="mg mh ht jd b je mp ji mq jm mr jq ms ju mt jy ml mm mn mo dt translated">杠杆代币的终极指南</li></ul></div></div>    
</body>
</html>