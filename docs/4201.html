<html>
<head>
<title>Run your own IDNTTY blockchain node in 5 minutes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在5分钟内运行你自己的区块链节点</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/run-your-own-idntty-blockchain-node-in-5-minutes-6fd048affa44?source=collection_archive---------14-----------------------#2022-09-26">https://medium.com/coinmonks/run-your-own-idntty-blockchain-node-in-5-minutes-6fd048affa44?source=collection_archive---------14-----------------------#2022-09-26</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><figure class="fi fk ir is it iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff iq"><img src="../Images/609348412b9e98ed54ecc99f90d3dcc8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wlReoxcWkOoUupKJZF7pVA.png"/></div></div></figure><p id="a9df" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">在我们看来，几乎任何技术开发中的一个主要问题是沉浸和第一步的艰难过程。如果你不能只是发布和尝试一些解决方案或系统，并且需要几个小时，有时几天，才能弄清楚它是如何工作的，那么大多数普通用户不会需要这个产品。</p><p id="11d8" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">这就是为什么我们尽一切努力使我们自己的<a class="ae jz" href="https://testnet.idntty.org" rel="noopener ugc nofollow" target="_blank"> IDNTTY网络节点</a>的安装尽可能简单易懂，即使对于一个对区块链技术，尤其是对IDNTTY基础设施工作细节不是很熟悉的人来说也是如此。</p><p id="75d4" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">我们使用Lisk SDK开发我们自己的网络，这是<a class="ae jz" href="https://lisk.com/documentation/run-blockchain/index.html" rel="noopener ugc nofollow" target="_blank">很好地记录了足够的</a>，任何人都可以知道如何运行和配置他们自己的节点。但是，我们已经确保任何用户或开发人员只要想部署和运行他们自己的节点，都只需付出最少的努力。</p><h1 id="35b8" class="ka kb ht bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated">为什么需要自己的节点？</h1><p id="28e5" class="pw-post-body-paragraph jb jc ht jd b je ky jg jh ji kz jk jl jm la jo jp jq lb js jt ju lc jw jx jy hm dt translated">这是你要问自己的第一个问题。如果您是一名普通的开发人员，并且希望开发自己的应用程序或将IDNTTY集成到您的应用程序中，您可以使用我们的网络节点并使用API来处理网络，而无需配置和维护您自己的基础架构。</p><p id="a255" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">以下是一些需要自己的节点的场景:</p><ul class=""><li id="f1b0" class="ld le ht jd b je jf ji jj jm lf jq lg ju lh jy li lj lk ll dt translated">你想成为网络的代表，参与维护它，并锻造积木以获得奖励</li><li id="48ee" class="ld le ht jd b je lm ji ln jm lo jq lp ju lq jy li lj lk ll dt translated">您正在制作自己的应用程序，并希望通过方便的界面直接与网络互动</li><li id="311f" class="ld le ht jd b je lm ji ln jm lo jq lp ju lq jy li lj lk ll dt translated">您想要获得关于网络交易的额外分析</li></ul></div><div class="ab cl lr ls hb lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="hm hn ho hp hq"><h1 id="92e0" class="ka kb ht bd kc kd ly kf kg kh lz kj kk kl ma kn ko kp mb kr ks kt mc kv kw kx dt translated">在docker中运行您的节点</h1><pre class="md me mf mg fq mh mi mj mk aw ml dt"><span id="b519" class="mm kb ht mi b fv mn mo l mp mq">$ docker run -it --name idntty-node -p 5000:5000 idntty/node:latest</span></pre><p id="41ba" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">只需在安装了docker的电脑上运行一个命令就可以了。您不需要做任何其他事情，只需启动自己的节点。最新的节点镜像将被下载、部署并运行在docker中，名为<strong class="jd hu"> idntty-node </strong>。</p><figure class="md me mf mg fq iu"><div class="bz el l di"><div class="mr ms l"/></div><figcaption class="mt mu fg fe ff mv mw bd b be z ek">IDNTTY node setup in Digital ocean cloud</figcaption></figure><p id="8d2c" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">p参数提供了一个端口expose，这是必需的，以便您启动的节点可以与网络上的其他节点通信。</p><p id="62ea" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">如果您想用自己的节点配置文件启动一个节点，您可以将它保存在本地计算机上，并使用-v参数将其挂载到docker中。</p><pre class="md me mf mg fq mh mi mj mk aw ml dt"><span id="1521" class="mm kb ht mi b fv mn mo l mp mq">$ docker run -d --name idntty-node -p 5000:5000 -v /opt/config.json:/path-on-local-computer/config.json:ro idntty/core:latest</span></pre><p id="7141" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">一旦启动，节点必须找到其他根节点、其他对等节点，连接到它们并进行同步。</p><h1 id="2cbf" class="ka kb ht bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated">从源设置您的节点</h1><blockquote class="mx my mz"><p id="f5e8" class="jb jc na jd b je jf jg jh ji jj jk jl nb jn jo jp nc jr js jt nd jv jw jx jy hm dt translated">这可能需要更长的时间，大约15-20分钟</p></blockquote><p id="7582" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">如果您想运行自己的节点并对其进行微调，安装额外的插件或将它集成到您的应用程序中，您可以从源代码构建自己的<a class="ae jz" href="https://github.com/idntty/core" rel="noopener ugc nofollow" target="_blank">节点。</a></p><p id="8ad2" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">以下步骤针对任何允许您运行Ubuntu 20.0及更高版本的云基础设施提供商。有时，防火墙的配置可能会有所不同，但除此之外，这个顺序将允许您安装和部署自己的节点。</p><h1 id="38d2" class="ka kb ht bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated">步骤1-更新我们的本地包索引和安装节点</h1><p id="243e" class="pw-post-body-paragraph jb jc ht jd b je ky jg jh ji kz jk jl jm la jo jp jq lb js jt ju lc jw jx jy hm dt translated">由于这是我们在本次会议中与<code class="eh ne nf ng mi b">apt</code>打包系统的第一次互动，我们将更新我们的本地包索引，以便我们可以访问最新的包列表。之后，我们可以安装工具来获取和安装软件包。以下所有操作都必须使用特权来完成。</p><pre class="md me mf mg fq mh mi mj mk aw ml dt"><span id="3dd2" class="mm kb ht mi b fv mn mo l mp mq">$ apt update</span><span id="b3da" class="mm kb ht mi b fv nh mo l mp mq">$ apt install <strong class="mi hu">-y curl build-essential git</strong></span></pre><p id="ac8d" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">Ubuntu 20.04在其默认存储库中包含一个Node.js版本，可用于提供跨多个系统的一致体验。在撰写本文时，存储库中的版本是10.19。这不会是最新的版本，但它应该是稳定的，足以快速体验这种语言。Ubuntu 20.04版本10.19中包含的Node.js版本现在不受支持和维护。您不应该在生产中使用这个版本</p><p id="6d58" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">要安装Node.js的不同版本，可以使用NodeSource维护的<em class="na"> PPA </em>(个人包归档)。首先，我们将安装PPA以便访问它的软件包。从您的主目录中，使用<code class="eh ne nf ng mi b">curl</code>来检索您的首选版本的安装脚本。</p><pre class="md me mf mg fq mh mi mj mk aw ml dt"><span id="c05b" class="mm kb ht mi b fv mn mo l mp mq">$ curl -fsSL <a class="ae jz" href="https://deb.nodesource.com/setup_16.x" rel="noopener ugc nofollow" target="_blank">https://deb.nodesource.com/setup_16.x</a> | bash -</span></pre><p id="374e" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">PPA将添加到您的配置中，并且您的本地包缓存将自动更新。现在可以用<code class="eh ne nf ng mi b">apt</code>打包系统安装Node.js了。</p><pre class="md me mf mg fq mh mi mj mk aw ml dt"><span id="bb83" class="mm kb ht mi b fv mn mo l mp mq">$ apt install<strong class="mi hu"> -y nodejs</strong></span></pre><p id="a93d" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">通过运行带有<code class="eh ne nf ng mi b">-v</code>版本标志的<code class="eh ne nf ng mi b">node</code>，验证您已经安装了新版本:</p><pre class="md me mf mg fq mh mi mj mk aw ml dt"><span id="16bf" class="mm kb ht mi b fv mn mo l mp mq">$ node -v</span></pre><h1 id="8e84" class="ka kb ht bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated">步骤2–准备idntty用户</h1><p id="bf3b" class="pw-post-body-paragraph jb jc ht jd b je ky jg jh ji kz jk jl jm la jo jp jq lb js jt ju lc jw jx jy hm dt translated">虽然作为根用户运行可以让你完全控制一个系统和它的用户，但是这也是危险的，可能是破坏性的。对于常见的系统管理任务，最好添加一个无特权用户，并在没有<strong class="jd hu"> root </strong>特权的情况下执行这些任务。这不是一个强制步骤，但是仍然建议创建一个单独的用户来运行您的IDNTTY节点。为此，请运行以下命令:</p><pre class="md me mf mg fq mh mi mj mk aw ml dt"><span id="983c" class="mm kb ht mi b fv mn mo l mp mq">$ addgroup -gid 1100 idntty &amp;&amp; useradd -d /home/idntty -m -s /bin/bash -u 1100 -g idntty idntty</span></pre><p id="97c5" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">之后，您需要创建一个目录，为它和创建的用户设置适当的权限，其中将存储运行您的节点所需的启动文件和附加库:</p><pre class="md me mf mg fq mh mi mj mk aw ml dt"><span id="334c" class="mm kb ht mi b fv mn mo l mp mq">$ mkdir /opt/idntty</span><span id="7d30" class="mm kb ht mi b fv nh mo l mp mq">$ chown -R idntty:idntty /opt/idntty</span></pre><p id="896a" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">建议使用idntty用户的权限执行所有后续操作。为此，您必须使用以下命令切换到它:</p><pre class="md me mf mg fq mh mi mj mk aw ml dt"><span id="a769" class="mm kb ht mi b fv mn mo l mp mq">$ su idntty</span></pre><h1 id="e51d" class="ka kb ht bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated">步骤3 —获取源代码并安装软件包</h1><p id="d5b9" class="pw-post-body-paragraph jb jc ht jd b je ky jg jh ji kz jk jl jm la jo jp jq lb js jt ju lc jw jx jy hm dt translated">如果您还没有这样做，克隆<a class="ae jz" href="https://github.com/LiskHQ/lisk-service" rel="noopener ugc nofollow" target="_blank"> lisk-service </a> GitHub存储库，然后导航到项目文件夹并签出最新版本。</p><pre class="md me mf mg fq mh mi mj mk aw ml dt"><span id="41b4" class="mm kb ht mi b fv mn mo l mp mq">$ git clone <a class="ae jz" href="https://github.com/idntty/core.git" rel="noopener ugc nofollow" target="_blank">https://github.com/idntty/core.git</a></span></pre><p id="bf9a" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated"><em class="na">将目录切换到新的存储库，然后</em>从根目录安装所有npm依赖项。</p><pre class="md me mf mg fq mh mi mj mk aw ml dt"><span id="b911" class="mm kb ht mi b fv mn mo l mp mq">$ cd core &amp; npm i</span></pre><p id="e50e" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">因为我们使用<a class="ae jz" href="https://lisk.com/documentation/lisk-sdk/index.html" rel="noopener ugc nofollow" target="_blank"> Lisk SDK </a>来构建我们的区块链应用程序，所以我们所有的节点都完全继承了Lisk提供的所有方法，这意味着您可以使用<a class="ae jz" href="https://medium.com/r?url=https%3A%2F%2Flisk.com%2Fdocumentation%2Flisk-sdk%2Fapplication-cli.html" rel="noopener"> CLI来管理您的IDNTTY节点</a>。</p><p id="f212" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">之后，您必须运行命令来启动节点:</p><pre class="md me mf mg fq mh mi mj mk aw ml dt"><span id="03f5" class="mm kb ht mi b fv mn mo l mp mq">$ ./bin/run start</span></pre><p id="12b7" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">过一会儿，您的节点应该找到testnet根节点(此时只有测试网络在运行)，并将您的节点与网络的其余部分同步。</p><h1 id="1894" class="ka kb ht bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated">步骤4 —(可选)创建IDNTTY服务</h1><p id="499c" class="pw-post-body-paragraph jb jc ht jd b je ky jg jh ji kz jk jl jm la jo jp jq lb js jt ju lc jw jx jy hm dt translated">一旦您配置了节点并准备在生产环境中运行它，您就需要运行一个守护进程，它将持续运行，甚至在您的终端会话结束之后。事实上，这有许多不同的选择。如果你只是想启动你的应用程序，你可以使用<a class="ae jz" href="https://github.com/foreverjs/forever" rel="noopener ugc nofollow" target="_blank"> Forever </a>或<a class="ae jz" href="http://pm2.keymetrics.io/" rel="noopener ugc nofollow" target="_blank"> PM2 </a>来运行并在崩溃时自动重启。<strong class="jd hu">但是，这不是后台任务</strong>。</p><p id="1ed0" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">对于在服务器重启时开始的后台任务，您链接的帖子是正确的方法。你必须创造:</p><pre class="md me mf mg fq mh mi mj mk aw ml dt"><span id="0905" class="mm kb ht mi b fv mn mo l mp mq">[Unit]<br/>Description = Idntty blockchain application<br/>After = network.target<br/>StartLimitBurst = 3<br/>StartLimitIntervalSec = 15</span><span id="7e41" class="mm kb ht mi b fv nh mo l mp mq">[Service]<br/>Type = simple<br/>Restart = always<br/>RestartSec = 5<br/>ExecStart = /opt/idntty/core/bin/run start<br/>User = idntty<br/>Group = idntty</span><span id="2fd2" class="mm kb ht mi b fv nh mo l mp mq">[Install]<br/>WantedBy = multi-user.target</span></pre><p id="10d2" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">到/etc/systemd/system/id ntty . service文件中，然后使用<a class="ae jz" href="https://en.wikipedia.org/wiki/Systemd#Core_components_and_libraries" rel="noopener ugc nofollow" target="_blank"> systemctl </a>来启动它:</p><pre class="md me mf mg fq mh mi mj mk aw ml dt"><span id="e1c8" class="mm kb ht mi b fv mn mo l mp mq">$ sudo systemctl enable idntty.service<br/>$ sudo systemctl start idntty.service</span></pre><p id="6243" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">之后，您的节点将在您的服务器启动后自动启动。现在假设您的Linux发行版可以与systemctl一起工作。如果您的Linux发行版可以与upstart或其他软件一起工作，那么您需要在google上查找该进程管理器的说明。</p><h1 id="f361" class="ka kb ht bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated">步骤5 —(可选)设置nginx以使用API</h1><p id="aa03" class="pw-post-body-paragraph jb jc ht jd b je ky jg jh ji kz jk jl jm la jo jp jq lb js jt ju lc jw jx jy hm dt translated">Nginx是世界上最流行的网络服务器之一，负责托管互联网上一些最大、流量最高的网站。这是一个轻量级的选择，既可以用作web服务器，也可以用作反向代理。对于我们的例子，我们将使用Nginx作为反向代理来发布本地主机服务，以便从所有外部ip地址进行访问。如果你有不止一个节点，Nginx可以用来平衡这些节点的负载(我们不会在这篇文章中讨论)。</p><p id="9ea1" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">此外，如果您想使用SSL协议提供对主机API服务的访问，Nginx也将帮助您完成这项任务。</p><p id="ba7d" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">因为Nginx在Ubuntu的默认存储库中可用，所以可以使用<code class="eh ne nf ng mi b">apt</code>打包系统从这些存储库中安装它。由于这是我们在本次会议中与<code class="eh ne nf ng mi b">apt</code>打包系统的第一次互动，我们将更新我们的本地包索引，以便我们可以访问最新的包列表。之后，我们可以安装<code class="eh ne nf ng mi b">nginx</code>:</p><pre class="md me mf mg fq mh mi mj mk aw ml dt"><span id="2263" class="mm kb ht mi b fv mn mo l mp mq">$ sudo apt update<br/>$ sudo apt install nginx</span></pre><p id="18f1" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">在测试Nginx之前，需要配置防火墙软件以允许访问服务。在安装过程的最后，Ubuntu 22.04启动Nginx。web服务器应该已经启动并运行。我们可以通过键入以下命令来检查<code class="eh ne nf ng mi b">systemd</code> init系统，以确保服务正在运行:</p><pre class="md me mf mg fq mh mi mj mk aw ml dt"><span id="79d4" class="mm kb ht mi b fv mn mo l mp mq">$ sudo systemctl status nginx</span></pre><p id="0e63" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">正如本out所确认的，服务已经成功启动。然而，最好的测试方法是从Nginx实际请求一个页面。为了让Nginx服务于这些内容，有必要用正确的指令创建一个服务器块。您可以直接更改默认配置文件，或者为您的域创建一个新的配置文件。</p><p id="221f" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">正如本out所确认的，服务已经成功启动。然而，最好的测试方法是从Nginx实际请求一个页面。为了让Nginx服务于这些内容，有必要用正确的指令创建一个服务器块。您可以直接更改默认配置文件，或者为您的域创建一个新的配置文件。我们将以编辑默认配置文件为例:</p><pre class="md me mf mg fq mh mi mj mk aw ml dt"><span id="91c4" class="mm kb ht mi b fv mn mo l mp mq">/etc/nginx/sites-available/default</span></pre><p id="010e" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">为了通过使用<em class="na">让我们加密</em>的免费SSL证书为您的域名设置HTTPS，您应该继续阅读<a class="ae jz" href="https://www.digitalocean.com/community/tutorials/how-to-secure-nginx-with-let-s-encrypt-on-ubuntu-22-04" rel="noopener ugc nofollow" target="_blank">如何在Ubuntu 22.04上使用让我们加密</a>来保护Nginx。例如，下面是我们自己用于公共节点的Nginx服务器设置。你可以在下面找到每个模块的解释。</p><pre class="md me mf mg fq mh mi mj mk aw ml dt"><span id="9030" class="mm kb ht mi b fv mn mo l mp mq"># Default server configuration</span><span id="d2c4" class="mm kb ht mi b fv nh mo l mp mq">#</span><span id="8c5a" class="mm kb ht mi b fv nh mo l mp mq">server {<br/>   if ($host = <em class="na">your_domain</em>) {</span><span id="00c5" class="mm kb ht mi b fv nh mo l mp mq">      return 301 <a class="ae jz" href="https://$host$request_uri;" rel="noopener ugc nofollow" target="_blank">https://$host$request_uri;</a></span><span id="5434" class="mm kb ht mi b fv nh mo l mp mq">   }</span><span id="79b3" class="mm kb ht mi b fv nh mo l mp mq">   listen 80 default_server;</span><span id="cc96" class="mm kb ht mi b fv nh mo l mp mq">   listen [::]:80 default_server;</span><span id="3710" class="mm kb ht mi b fv nh mo l mp mq">   server_name <em class="na">your_domain</em>;</span><span id="f7cb" class="mm kb ht mi b fv nh mo l mp mq">   return 404; # managed by Certbot</span><span id="951c" class="mm kb ht mi b fv nh mo l mp mq">}</span><span id="e855" class="mm kb ht mi b fv nh mo l mp mq">server {</span><span id="d362" class="mm kb ht mi b fv nh mo l mp mq"># Static pages SSL configuration</span><span id="0b3b" class="mm kb ht mi b fv nh mo l mp mq">#</span><span id="ea0e" class="mm kb ht mi b fv nh mo l mp mq">   listen [::]:443 ssl ipv6only=on; # managed by Certbot</span><span id="7cbf" class="mm kb ht mi b fv nh mo l mp mq">   listen 443 ssl; # managed by Certbot</span><span id="a72e" class="mm kb ht mi b fv nh mo l mp mq">   ssl_certificate ./fullchain.pem; # managed by Certbot</span><span id="423a" class="mm kb ht mi b fv nh mo l mp mq">   ssl_certificate_key ./privkey.pem; # managed by Certbot</span><span id="abcc" class="mm kb ht mi b fv nh mo l mp mq">   include ./options-ssl-nginx.conf; # managed by Certbot</span><span id="84cd" class="mm kb ht mi b fv nh mo l mp mq">   ssl_dhparam ./ssl-dhparams.pem; # managed by Certbot</span><span id="0615" class="mm kb ht mi b fv nh mo l mp mq">   root /var/www/html;</span><span id="a26c" class="mm kb ht mi b fv nh mo l mp mq">   index index.html;</span><span id="2d5c" class="mm kb ht mi b fv nh mo l mp mq">   server_name <em class="na">your_domain</em>;</span><span id="7f9c" class="mm kb ht mi b fv nh mo l mp mq">   location / {</span><span id="0678" class="mm kb ht mi b fv nh mo l mp mq">      try_files $uri $uri/ =404;</span><span id="859b" class="mm kb ht mi b fv nh mo l mp mq">   }</span><span id="cdd3" class="mm kb ht mi b fv nh mo l mp mq">}</span><span id="eb5d" class="mm kb ht mi b fv nh mo l mp mq">server {<br/># Web services SSL configuration for Lisk API</span><span id="9dd2" class="mm kb ht mi b fv nh mo l mp mq">#</span><span id="2c03" class="mm kb ht mi b fv nh mo l mp mq">   listen 8090 ssl;</span><span id="6806" class="mm kb ht mi b fv nh mo l mp mq">   server_name WS;</span><span id="0d34" class="mm kb ht mi b fv nh mo l mp mq">   ssl_certificate ./fullchain.pem; # managed by Certbot</span><span id="453e" class="mm kb ht mi b fv nh mo l mp mq">   ssl_certificate_key ./privkey.pem; # managed by Certbot</span><span id="4245" class="mm kb ht mi b fv nh mo l mp mq">   include ./options-ssl-nginx.conf; # managed by Certbot</span><span id="9b0e" class="mm kb ht mi b fv nh mo l mp mq">   ssl_dhparam ./ssl-dhparams.pem; # managed by Certbot</span><span id="e38d" class="mm kb ht mi b fv nh mo l mp mq">   location / {</span><span id="318d" class="mm kb ht mi b fv nh mo l mp mq">      proxy_pass <a class="ae jz" href="http://127.0.0.1:9000;" rel="noopener ugc nofollow" target="_blank">http://127.0.0.1:9000;</a></span><span id="5b68" class="mm kb ht mi b fv nh mo l mp mq">      proxy_http_version 1.1;</span><span id="3c92" class="mm kb ht mi b fv nh mo l mp mq">      proxy_set_header Upgrade $http_upgrade;</span><span id="0a3d" class="mm kb ht mi b fv nh mo l mp mq">      proxy_set_header Connection "upgrade";</span><span id="ab45" class="mm kb ht mi b fv nh mo l mp mq">      proxy_read_timeout 86400;</span><span id="be87" class="mm kb ht mi b fv nh mo l mp mq">   }</span><span id="ae3a" class="mm kb ht mi b fv nh mo l mp mq">}</span><span id="00d6" class="mm kb ht mi b fv nh mo l mp mq">server {<br/># Node REST API SSL configuration</span><span id="d54c" class="mm kb ht mi b fv nh mo l mp mq">#</span><span id="8b22" class="mm kb ht mi b fv nh mo l mp mq">   listen 8080 ssl;</span><span id="f63b" class="mm kb ht mi b fv nh mo l mp mq">   server_name API;</span><span id="ee72" class="mm kb ht mi b fv nh mo l mp mq">   ssl_certificate ./fullchain.pem; # managed by Certbot</span><span id="b72f" class="mm kb ht mi b fv nh mo l mp mq">   ssl_certificate_key ./privkey.pem; # managed by Certbot</span><span id="8ca1" class="mm kb ht mi b fv nh mo l mp mq">   include ./options-ssl-nginx.conf; # managed by Certbot</span><span id="dd89" class="mm kb ht mi b fv nh mo l mp mq">   ssl_dhparam ./ssl-dhparams.pem; # managed by Certbot</span><span id="a888" class="mm kb ht mi b fv nh mo l mp mq">   location / {</span><span id="613e" class="mm kb ht mi b fv nh mo l mp mq">      proxy_pass <a class="ae jz" href="http://127.0.0.1:8000;" rel="noopener ugc nofollow" target="_blank">http://127.0.0.1:8000;</a></span><span id="78a6" class="mm kb ht mi b fv nh mo l mp mq">   }</span><span id="389d" class="mm kb ht mi b fv nh mo l mp mq">}</span></pre><p id="2c3d" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated"><strong class="jd hu">静态页面SSL配置</strong></p><p id="e6c3" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">这个模块描述了Nginx显示的静态文件的设置。如果有必要，你可以放置关于你的节点的附加信息(就像我们对https://tn-alpha.idntty.org做的那样)。</p><p id="66ce" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated"><strong class="jd hu">Lisk API的Web服务SSL配置</strong></p><p id="adc0" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">如果您已经使用Web服务启用了与主机的通信，并且想要从公共网络提供公共访问，则必须发布它。默认情况下，IDNTTY WS运行在本地IP和9000端口上。在上面的例子中，我们在端口8090上发布了该服务，并使用SSL协议对该访问进行了加密。</p><p id="4ae8" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated"><strong class="jd hu">节点REST API SSL配置</strong></p><p id="14b6" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">如果您已经激活了使用REST API与您的节点通信的能力(在使用REST API的IDNTTY节点上可用)，您还必须将其发布到公共网络。默认情况下，REST API服务运行在本地端口8000上，我们使用SSL协议在端口8080的公共地址上发布它。</p><p id="a573" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">完成后，保存并关闭文件。接下来，测试以确保您的任何Nginx文件中没有语法错误:</p><pre class="md me mf mg fq mh mi mj mk aw ml dt"><span id="590a" class="mm kb ht mi b fv mn mo l mp mq">$ sudo nginx -t</span></pre><p id="0764" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">如果没有任何问题，重启Nginx以使您的更改生效:</p><pre class="md me mf mg fq mh mi mj mk aw ml dt"><span id="9276" class="mm kb ht mi b fv mn mo l mp mq">$ sudo systemctl restart nginx</span></pre><p id="e47d" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">Nginx现在应该为你的域名服务了。您可以通过导航到<code class="eh ne nf ng mi b">http://your_domain</code>来测试这一点，在这里您应该会看到类似这样的内容:</p><figure class="md me mf mg fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff ni"><img src="../Images/7471c036bec8c1cb6fdee9fb0374027e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QG6vMwWkYuWlINwXtOL1qw.png"/></div></div><figcaption class="mt mu fg fe ff mv mw bd b be z ek">Default IDNTTY node welcome screen on Nginx</figcaption></figure><p id="33eb" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">我们真心希望这份详细的手册能够让您自己安装和配置IDNTTY节点。但是如果你没有成功或者有什么问题，你随时可以在我们的不和谐聊天中提问:<a class="ae jz" href="https://lisk.chat" rel="noopener ugc nofollow" target="_blank"> https://lisk.chat </a>。</p><blockquote class="nj"><p id="1c26" class="nk nl ht bd nm nn no np nq nr ns jy ek translated">交易新手？试试<a class="ae jz" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">加密交易机器人</a>或者<a class="ae jz" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">复制交易</a></p></blockquote></div></div>    
</body>
</html>