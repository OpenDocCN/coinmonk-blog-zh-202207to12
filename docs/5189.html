<html>
<head>
<title>Protect your assets in a rapidly growing chain — Fantasm Finance Hack</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在快速增长的链条中保护您的资产— Fantasm Finance Hack</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/protect-your-assets-in-a-rapidly-growing-chain-fantasm-finance-hack-b97fd0913318?source=collection_archive---------29-----------------------#2022-10-18">https://medium.com/coinmonks/protect-your-assets-in-a-rapidly-growing-chain-fantasm-finance-hack-b97fd0913318?source=collection_archive---------29-----------------------#2022-10-18</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><div class=""><h2 id="f486" class="pw-subtitle-paragraph iq hs ht bd b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ek translated">Fantom chain是市场份额增长最快的EVM之一。每个月，这个链都会增加一百万个新地址，但是黑客们不会落后。</h2></div><p id="e9e2" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">2022年3月9日下午1:50:20+UTC，Fantasm Finance的抵押品储备池被欺诈性地利用了262万美元。</p><p id="653b" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">重要的是要记住，攻击发生时，Fantom Network刚刚开始崭露头角，其新平台也开始浮出水面。这使得它成为坏演员的好目标，因为他们继续在不断增长的利基和网络上捕食。</p><p id="1202" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">攻击者使用龙卷风现金来掩盖交易。</p><p id="447b" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">Fantom的本地令牌FTM是Fantasm上用作抵押品支持的令牌之一。</p><p id="c7ce" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">Fantasm Finance黑客利用了该协议mint函数的错误检查代码中的一个漏洞。错误检查功能的工作是验证用户在创建XFTM令牌时是否在合同中输入了FTM令牌。</p><p id="2c64" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">但是，该代码将msg.value的值(计算随交易一起发送的ETH的数量)与可接受的铸造FTM令牌的最低值进行了比较。</p><p id="bcd3" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">攻击者能够通过只发送FSM令牌(铸造中使用的附属令牌)而不发送任何FTM令牌来利用该代码。这种不正确的错误检查功能允许攻击者在不插入任何FTM的情况下制造XFTM令牌。</p><p id="fb46" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">使用Fantasm的少量FSM令牌，黑客能够铸造XFTM，这是Fantom在平台上的FTM的代表。</p><p id="685a" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">攻击者能够从协议中获得价值，并通过将新创建的XFTM令牌卖回给项目来购买更多的FSM令牌用于后续攻击。</p><p id="4fb0" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">从50 FTM开始，黑客们逐渐增加数量，总共切换了280万XFTM。黑客使用Tornado Cash将资金交换了大约1,007 ETH，约合262万美元。</p><p id="32d2" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">让我们再详细回顾一遍发生的事情。</p><p id="46ff" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">通过龙卷风现金，剥削者从BNB链获得资金。</p><p id="3238" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">剥削者使用Pancakeswap将BNB变成USDC。</p><p id="25d9" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">剥削者使用Celer桥连接USDC和Fantom。</p><p id="ec80" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">剥削者通过Fantom链上的桥接收这个USDC:</p><div class="ke kf fm fo kg kh"><a href="https://ftmscan.com/tx/0x39be07303cf562407c857d9b43077f99bd63ee46b1a95d5cfe5947ee3c106422" rel="noopener  ugc nofollow" target="_blank"><div class="ki ab ej"><div class="kj ab kk cl cj kl"><h2 class="bd hu fv z el km eo ep kn er et hs dt translated">Fantom事务哈希(Txhash)详细信息| FtmScan</h2><div class="ko l"><h3 class="bd b fv z el km eo ep kn er et ek translated">0x 39 be 07303 cf 562407 c 857 d9b 43077 f 99 BD 63 ee 46 B1 a 95 D5 cfe 5947 ee3c 106422 222天前15小时(2022年3月9日01:39:21 PM +UTC)…</h3></div><div class="kp l"><p class="bd b gc z el km eo ep kn er et ek translated">ftmscan.com</p></div></div></div></a></div><p id="4192" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">水龙头提供FTM给剥削者，然后剥削者用更多的USDC交换FTM。</p><p id="a71f" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">开发者利用了Fantasm Pool合同中的漏洞，部署了一份合同。这是开发商忽略了在要求的最小FTM存款后将条件设置为mint XFTM的地方。</p><figure class="kr ks kt ku fq kv fe ff paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="fe ff kq"><img src="../Images/9b608d40b1dbee3434b9117c89e78724.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JDwrgZoJ6WWGzZNHPBX3eA.jpeg"/></div></div></figure><p id="4859" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">合同使用以下公式计算calcMint函数中的薄荷量:<code class="eh lc ld le lf b">_xftmOut = (_fantasmIn * _fantasmPrice * COLLATERAL_RATIO_MAX * (PRECISION — mintingFee)) / PRECISION / (COLLATERAL_RATIO_MAX — collateralRatio) / PRICE_PRECISION;</code></p><p id="e82c" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">由于小数错误,_xftmOut比它应该的要大。</p><p id="6650" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">通过只插入FSM令牌而不插入FTM，攻击者伪造了XFTM。为了获得越来越多的FTM，开发者向FTM出售XFTM令牌，购买更多的FSM，并重复这个过程。</p><p id="5725" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">最后，剥削者将他所有的FTM换成ETH，并使用Celer Bridge再次将这些资金转移到以太坊。</p><blockquote class="lg"><p id="8ccf" class="lh li ht bd lj lk ll lm ln lo lp kd ek translated">交易新手？试试<a class="ae lq" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">加密交易机器人</a>或者<a class="ae lq" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">复制交易</a></p></blockquote></div></div>    
</body>
</html>