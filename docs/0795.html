<html>
<head>
<title>Learn Solidity lesson 2. Public variables.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">学习第二课的可靠性。公共变量。</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/learn-solidity-lesson-2-public-variables-2f79389a3a44?source=collection_archive---------0-----------------------#2022-07-16">https://medium.com/coinmonks/learn-solidity-lesson-2-public-variables-2f79389a3a44?source=collection_archive---------0-----------------------#2022-07-16</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><figure class="fi fk ir is it iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff iq"><img src="../Images/3fadb62eed501c7544a994617b2d29c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2z-A3hYEUx0Bkl-YLssQvw.jpeg"/></div></div></figure><p id="7d0d" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">所有区块链国家的集合是它的世界国家。当我们进行交易时，我们改变了这个世界状态。例如，部署一个契约会在几个方面改变世界状态。最显而易见的是，一个新的契约在区块链诞生了，但这不是唯一的契约。</p><p id="49f9" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">合同有一个地址，指定一个以太坊账户。以太坊上有两种类型的账户，合约账户和外部拥有的账户(<strong class="jd hu"> EOA </strong>)。当我们部署合同时，会创建一个新的合同帐户。</p><p id="cc71" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">与合同帐户相关联的有四个值。其中之一是我们部署的合同的二进制代码，即<strong class="jd hu">字节码</strong>。另一个是由契约创建的所有变量的映射，即契约状态变量。</p><p id="e375" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">请记住，变量是在声明时初始化的(如果没有设置，则使用默认值)。因此，变量在部署时被初始化，这导致新的状态在此时被定义和创建。</p><p id="145e" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">对世界状态的其他修改不太明显。其中之一是部署合同的帐户余额的变化。以太坊上的每一笔交易都要耗费以太，所以部署契约的账号必须以以太支付这笔费用。我想指出的是，账户的余额是世界状态的一部分，任何交易都改变了账户的余额，从而改变了世界状态。</p><p id="114d" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">到目前为止，我们的合同代码可以在下图中看到。它定义了一个状态变量，<em class="jz">名称</em>，类型<em class="jz">字符串</em>，这将是区块链世界状态的一部分。</p><figure class="kb kc kd ke fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff ka"><img src="../Images/3eb779cc114d94da938c88b4c77f4c76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WDDOCCtlfiru0_uEItCqag.png"/></div></div><figcaption class="kf kg fg fe ff kh ki bd b be z ek">A “Hello World” smart contract.</figcaption></figure><p id="c2e7" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">如果我们想改变这个状态变量，我们必须写一个函数来实现。我们很快就会看到。在此之前，我们将看到如何以简单的方式读取这个状态变量。</p><p id="6288" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated"><strong class="jd hu">公共变量</strong></p><p id="ae45" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">在solidity中，变量有三种类型的可见性:<strong class="jd hu">公共</strong>、<strong class="jd hu">私有</strong>或<strong class="jd hu">内部</strong>。当我们没有明确定义变量的可见性时，它被认为是内部的。在我们的例子中，变量名称<em class="jz">就是这种情况。</em></p><p id="553c" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">内部变量可以由协定本身和子(继承的)协定访问。我们稍后将研究继承的问题。私有变量只能由契约本身访问，这更受限制。</p><blockquote class="kj kk kl"><p id="3a93" class="jb jc jz jd b je jf jg jh ji jj jk jl km jn jo jp kn jr js jt ko jv jw jx jy hm dt translated">交易新手？试试<a class="ae kp" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">加密交易机器人</a>或者<a class="ae kp" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">复制交易</a></p></blockquote><p id="50d7" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">另一个选项，public variables，让编译器为它创建一个<em class="jz"> getter </em>函数。随着课程的进行，这一点会变得更加清楚。现在，只需要理解公共变量可以从契约外部访问。让我们看看怎么做。</p><p id="39e9" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">在Remix中，在deployed contracts选项卡中，单击您刚刚部署的合同。请注意，它没有要执行的方法，如下图所示。</p><figure class="kb kc kd ke fq iu fe ff paragraph-image"><div class="fe ff kq"><img src="../Images/49e7ce0cf12e46aed2b5574917c06187.png" data-original-src="https://miro.medium.com/v2/resize:fit:826/format:webp/1*dJl7lHuJuxB5987DYTbuDw.png"/></div><figcaption class="kf kg fg fe ff kh ki bd b be z ek">When the variable is private, there is no getter associated with it.</figcaption></figure><p id="397e" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">现在让我们对契约进行修改，将变量<em class="jz"> name </em>的可见性改为public。将这行代码改为</p><pre class="kb kc kd ke fq kr ks kt ku aw kv dt"><span id="95b7" class="kw kx ht ks b fv ky kz l la lb">string public name = "Hello World";</span></pre><p id="4599" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">再次部署。新合同将在“已部署的合同”选项卡中列出。当你点击它，你会看到现在有一个方法被执行，叫做<em class="jz">名称</em>，如下图所示。</p><figure class="kb kc kd ke fq iu fe ff paragraph-image"><div class="fe ff lc"><img src="../Images/4fa92415d15f82edf7b95e49efa37590.png" data-original-src="https://miro.medium.com/v2/resize:fit:786/format:webp/1*5fVocx9Qp-mTGEG-_yKp7w.png"/></div><figcaption class="kf kg fg fe ff kh ki bd b be z ek">When the variable is public, a getter is automatically created to fetch the variable’s value.</figcaption></figure><p id="a069" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">此方法用于获取网络上变量的值。对于每个公共变量，编译器生成一个等价的getter，这样每个公共变量都可以很容易地被其他契约和区块链的任何客户端读取。</p><p id="4c90" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">我们必须澄清的一个问题是，区块链的任何一个州在某种程度上都是公有的。即使变量被声明为internal或private，它仍然可以被客户端间接检索。将变量声明为public只是为变量创建一个getter方法，使它对网络上的其他契约可见。</p><p id="8f0b" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated"><strong class="jd hu">通过Remix进入合同</strong></p><p id="d94c" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">我们已经看到，当设置一个状态变量public时，Remix会生成一个按钮，允许我们从区块链中检索该变量。当点击蓝色按钮<em class="jz">名称</em>时，我们得到值“<em class="jz">Hello World”</em>作为返回。</p><figure class="kb kc kd ke fq iu fe ff paragraph-image"><div class="fe ff ld"><img src="../Images/add7368c086158f2b70ea1d5f64981c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:766/format:webp/1*W2ul9bpnDhBtsL8nhqBa8g.png"/></div><figcaption class="kf kg fg fe ff kh ki bd b be z ek">Interaction with the contract via Remix.</figcaption></figure><p id="d95e" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">这是使Remix成为一个伟大的IDE的特性之一。对于与区块链交互的每种方法，它都会创建一个按钮来执行该方法。另一方面，这个功能可能会给那些刚开始学习DApps的人带来一些困惑。</p><p id="ddfe" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">仅仅从区块链中检索某个状态，而不改变它，不需要事务。请记住，事务会以某种方式改变世界状态。要检索(读取)状态，必须进行调用。</p><p id="eb23" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">呼叫就像是对网络的信息请求，它必须被发送到某个节点(客户端)。请求协议被称为<strong class="jd hu"> JSON-RPC </strong>，我们将在未来看到更多相关内容。现在，让我们了解一下Remix是做什么的。</p><p id="a526" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">创建请求按钮时，Remix会为您编写<em class="jz">调用</em>。如果合同是为非本地测试虚拟机的区块链发布的，则有必要通知Remix该调用将被发送到哪个节点。在我们的例子中，契约被发布到本地EVM，由Remix自己管理，因此不需要通知节点进行通信。</p><p id="ce06" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">按钮的颜色，在Remix中，表示正在讨论的方法是事务还是调用。蓝色按钮表示呼叫，而橙色按钮表示交易，我们很快就会看到。红色按钮表示涉及发送以太网的交易。</p><p id="359d" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">在下一课中，我们将在契约中创建第一个函数。</p><p id="c02a" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated"><strong class="jd hu">感谢阅读！</strong></p><blockquote class="le"><p id="eec5" class="lf lg ht bd lh li lj lk ll lm ln jy ek translated">加入Coinmonks <a class="ae kp" href="https://t.me/coincodecap" rel="noopener ugc nofollow" target="_blank">电报频道</a>和<a class="ae kp" href="https://www.youtube.com/c/coinmonks/videos" rel="noopener ugc nofollow" target="_blank"> Youtube频道</a>了解加密交易和投资</p></blockquote><h1 id="167c" class="lo kx ht bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk dt translated">另外，阅读</h1><ul class=""><li id="82ac" class="ml mm ht jd b je mn ji mo jm mp jq mq ju mr jy ms mt mu mv dt translated"><a class="ae kp" rel="noopener" href="/coinmonks/mxc-exchange-review-3af0ec1cba8c"> MXC交易所评论</a> | <a class="ae kp" href="https://coincodecap.com/pionex-vs-binance" rel="noopener ugc nofollow" target="_blank"> Pionex vs币安</a> | <a class="ae kp" href="https://coincodecap.com/pionex-arbitrage-bot" rel="noopener ugc nofollow" target="_blank"> Pionex套利机器人</a></li><li id="bebf" class="ml mm ht jd b je mw ji mx jm my jq mz ju na jy ms mt mu mv dt translated"><a class="ae kp" rel="noopener" href="/coinmonks/my-experience-with-crypto-copy-trading-d6feb2ce3ac5">我的密码交易经验</a> | <a class="ae kp" rel="noopener" href="/coinmonks/coinbase-review-6ef4e0f56064">比特币基地评论</a></li><li id="5355" class="ml mm ht jd b je mw ji mx jm my jq mz ju na jy ms mt mu mv dt translated"><a class="ae kp" href="https://coincodecap.com/coinflex-review" rel="noopener ugc nofollow" target="_blank"> CoinFLEX评论</a> | <a class="ae kp" href="https://coincodecap.com/aex-exchange-review" rel="noopener ugc nofollow" target="_blank"> AEX交易所评论</a> | <a class="ae kp" href="https://coincodecap.com/upbit-review" rel="noopener ugc nofollow" target="_blank"> UPbit评论</a></li><li id="e594" class="ml mm ht jd b je mw ji mx jm my jq mz ju na jy ms mt mu mv dt translated"><a class="ae kp" href="https://coincodecap.com/ascendex-margin-trading" rel="noopener ugc nofollow" target="_blank"> AscendEx保证金交易</a> | <a class="ae kp" href="https://coincodecap.com/bitfinex-staking" rel="noopener ugc nofollow" target="_blank"> Bitfinex赌注</a> | <a class="ae kp" href="https://coincodecap.com/bitflyer-review" rel="noopener ugc nofollow" target="_blank"> bitFlyer审核</a></li><li id="3e4b" class="ml mm ht jd b je mw ji mx jm my jq mz ju na jy ms mt mu mv dt translated"><a class="ae kp" href="https://coincodecap.com/sparrow-exchange-review" rel="noopener ugc nofollow" target="_blank">麻雀交换评论</a> | <a class="ae kp" href="https://coincodecap.com/nash-exchange-review" rel="noopener ugc nofollow" target="_blank">纳什交换评论</a></li></ul></div></div>    
</body>
</html>