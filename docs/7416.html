<html>
<head>
<title>How the $1.25M Flash Loan Attack on the New Free DAO Worked</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">125万美元闪贷攻击新的免费道是如何运作的</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/how-the-1-25m-flash-loan-attack-on-the-new-free-dao-worked-256b0b6bec0?source=collection_archive---------40-----------------------#2022-12-13">https://medium.com/coinmonks/how-the-1-25m-flash-loan-attack-on-the-new-free-dao-worked-256b0b6bec0?source=collection_archive---------40-----------------------#2022-12-13</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="e250" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">2022年9月8日，利用“闪贷”攻击，利用新的免费道。</p><p id="0658" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">攻击者从这一漏洞中获利4481 WBNB(约125万美元)，导致原生令牌$NFD价格下跌99%。</p><p id="197f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在BNB链上，“新自由道”是一个“道工程”道代表“去中心化的自治组织”</p><p id="274d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">治理决策由整个社区做出，实体的本地令牌(NFD)持有者通常会对其进行投票。</p><p id="1f0a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">$NFD被制作成具有许多不同的特征，并且是专门为NFT制作的。</p><p id="94f2" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">快速贷款攻击是指有人利用平台的智能合同安全，在没有任何抵押的情况下借入大量资金。</p><p id="7a12" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">然后，他们在一个交易所操纵加密货币资产的价格，并在另一个交易所迅速出售。</p><p id="d303" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">为了成为契约的成员，攻击者首先部署一个未经验证的契约，并调用函数addMember()。</p><p id="d2f5" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这是黑客的地址:0x22c 9736 D4 fc 73 A8 fa 0 EB 436 D2 ce 919 f 5849 d6fd 2</p><p id="646e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">攻击者从pancakeswap获得了约250 WBNB的闪贷，用于部署合同。</p><p id="8345" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">而且，他用WBNB换了NFD代币，送去了攻击合同。</p><p id="58ba" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">然后攻击者通过调用契约中的0xe2f9d09c函数来调用奖励契约函数。</p><p id="edfe" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">攻击者随后签订了一系列新合同，并从头再做一遍以获得奖励。</p><p id="50b3" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">获得奖励后，黑客将NFD代币兑换回WBNB，兑换金额约为3202 WBNB。</p><p id="d699" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">然后，他们向PancakeSwap偿还了250 WBNB的快速贷款，并获得了2952 WBNB的利润。</p><p id="ac28" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">同样，攻击者在执行交易三次后获利4481 WBNB，或大约125万美元。</p><h2 id="3c0d" class="jo jp ht bd jq jr js jt ju jv jw jx jy jb jz ka kb jf kc kd ke jj kf kg kh ki dt translated">NFD项目未经核实的奖励合同是漏洞所在</h2><p id="6d92" class="pw-post-body-paragraph iq ir ht is b it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj kn jl jm jn hm dt translated">下面代码片段中的函数0x6811e3b9是根本原因。</p><figure class="kp kq kr ks fq kt fe ff paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="fe ff ko"><img src="../Images/bffe575cb9eee6473125b39c2261ee94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y5-yVr4_1FD0uAhzkx51Pg.jpeg"/></div></div></figure><p id="1925" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">代码实施有两个主要方面会影响奖励:</p><ul class=""><li id="4e97" class="la lb ht is b it iu ix iy jb lc jf ld jj le jn lf lg lh li dt translated">时间间隔:激励越大，定期存款时间越长。</li><li id="4e01" class="la lb ht is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li dt translated">用户拥有的代币越多，获得的奖励就越多。</li></ul><p id="dd9b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">然而，由于flashloans不受护栏的限制，攻击者可以使用它们来显著增加他的令牌余额。</p><p id="3210" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><em class="lo">另外，因为“block.tmestamp — store 6”在L169中有一个非零值，所以用户的打赏开始时间将被初始化为“store 6”。因此，攻击者可以通过借用令牌并使用flashloan放大它来大大提高收益。</em></p><p id="84fb" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">由于这个漏洞，新DAO的本机令牌有99%崩溃。龙卷风现金被用来存放偷来的资金。</p><h2 id="267f" class="jo jp ht bd jq jr js jt ju jv jw jx jy jb jz ka kb jf kc kd ke jj kf kg kh ki dt translated">最后的话</h2><p id="4dca" class="pw-post-body-paragraph iq ir ht is b it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj kn jl jm jn hm dt translated">一份提交给区块链的合同没有链接到GitHub上的相关源代码，成为了新的免费DAO黑客攻击的目标。</p><p id="4d0c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">可以反汇编和读取合同代码，但这更困难，并且使用未经验证的代码表明合同没有经过安全审计。</p><p id="e8a3" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在DeFi领域，已经出现了许多利用不安全的价格预言或报酬计算的快速贷款攻击。</p><p id="aa7a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在启动包含此功能的任何合同之前，建议对其进行审核，以确保该机制不易受到攻击。</p><blockquote class="lp"><p id="109a" class="lq lr ht bd ls lt lu lv lw lx ly jn ek translated"><em class="lz">交易新手？试试</em> <a class="ae ma" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a"> <em class="lz">密码交易机器人</em> </a> <em class="lz">或</em> <a class="ae ma" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c"> <em class="lz">复制交易</em> </a></p><p id="2860" class="lq lr ht bd ls lt lu lv lw lx ly jn ek translated"><em class="lz">分散密码持有量，了解</em> <a class="ae ma" href="https://coincodecap.com/binance-alternatives" rel="noopener ugc nofollow" target="_blank"> <em class="lz">币安替代品</em> </a></p><p id="b2b9" class="lq lr ht bd ls lt lu lv lw lx ly jn ek translated"><em class="lz">加入Coinmonks </em> <a class="ae ma" href="https://t.me/coincodecap" rel="noopener ugc nofollow" target="_blank"> <em class="lz">电报频道</em> </a> <em class="lz">和</em> <a class="ae ma" href="https://www.youtube.com/c/coinmonks/videos" rel="noopener ugc nofollow" target="_blank"> <em class="lz"> Youtube频道</em> </a> <em class="lz">获取每日</em> <a class="ae ma" href="http://coincodecap.com/" rel="noopener ugc nofollow" target="_blank"> <em class="lz">加密新闻</em> </a></p></blockquote><h1 id="f66e" class="mb jp ht bd jq mc md me ju mf mg mh jy mi mj mk kb ml mm mn ke mo mp mq kh mr dt translated">另外，阅读</h1><ul class=""><li id="dd1b" class="la lb ht is b it kj ix kk jb ms jf mt jj mu jn lf lg lh li dt translated"><a class="ae ma" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">复制交易</a> | <a class="ae ma" rel="noopener" href="/coinmonks/crypto-tax-software-ed4b4810e338">加密税务软件</a></li><li id="f297" class="la lb ht is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li dt translated"><a class="ae ma" href="https://coincodecap.com/grid-trading" rel="noopener ugc nofollow" target="_blank">网格交易</a> | <a class="ae ma" rel="noopener" href="/coinmonks/the-best-cryptocurrency-hardware-wallets-of-2020-e28b1c124069">加密硬件钱包</a></li><li id="3756" class="la lb ht is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li dt translated"><a class="ae ma" rel="noopener" href="/coinmonks/top-3-telegram-channels-for-crypto-traders-in-2021-8385f4411ff4">密码电报信号</a> | <a class="ae ma" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">密码交易机器人</a></li><li id="87d9" class="la lb ht is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li dt translated"><a class="ae ma" rel="noopener" href="/coinmonks/crypto-exchange-dd2f9d6f3769">最佳加密交易所</a> | <a class="ae ma" rel="noopener" href="/coinmonks/bitcoin-exchange-in-india-7f1fe79715c9">印度最佳加密交易所</a></li><li id="600b" class="la lb ht is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li dt translated"><a class="ae ma" rel="noopener" href="/coinmonks/best-crypto-apis-for-developers-5efe3a597a9f">面向开发者的最佳加密API</a></li><li id="9342" class="la lb ht is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li dt translated">最佳<a class="ae ma" rel="noopener" href="/coinmonks/top-5-crypto-lending-platforms-in-2020-that-you-need-to-know-a1b675cec3fa">密码借贷平台</a></li><li id="d7b9" class="la lb ht is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li dt translated"><a class="ae ma" rel="noopener" href="/coinmonks/free-crypto-signals-48b25e61a8da">免费加密信号</a> | <a class="ae ma" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">加密交易机器人</a></li><li id="1715" class="la lb ht is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li dt translated">杠杆代币的终极指南</li></ul></div></div>    
</body>
</html>